webpackJsonp([4],[,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
 Scroller 1.2.2
 Â©2011-2014 SpryMedia Ltd - datatables.net/license
 */
!function(m,n,k){var l=function(e){var g=function(a,b){!this instanceof g?alert("Scroller warning: Scroller must be initialised with the 'new' keyword."):(void 0===b&&(b={}),this.s={dt:a,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:!0,viewportRows:0,stateTO:null,drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null},topRowFloat:0,scrollDrawDiff:null,loaderVisible:!1},this.s=e.extend(this.s,g.oDefaults,b),this.s.heights.row=this.s.rowHeight,this.dom={force:n.createElement("div"),scroller:null,table:null,loader:null},this.s.dt.oScroller=this,this._fnConstruct())};if(g.prototype={fnRowToPixels:function(a,b,c){return a=c?this._domain("virtualToPhysical",a*this.s.heights.row):this.s.baseScrollTop+(a-this.s.baseRowTop)*this.s.heights.row,b||b===k?parseInt(a,10):a},fnPixelsToRow:function(a,b,c){var d=a-this.s.baseScrollTop,a=c?this._domain("physicalToVirtual",a)/this.s.heights.row:d/this.s.heights.row+this.s.baseRowTop;return b||b===k?parseInt(a,10):a},fnScrollToRow:function(a,b){var c=this,d=!1,f=this.fnRowToPixels(a),h=a-(this.s.displayBuffer-1)/2*this.s.viewportRows;0>h&&(h=0),(f>this.s.redrawBottom||f<this.s.redrawTop)&&this.s.dt._iDisplayStart!==h&&(d=!0,f=this.fnRowToPixels(a,!1,!0)),void 0===b||b?(this.s.ani=d,e(this.dom.scroller).animate({scrollTop:f},function(){setTimeout(function(){c.s.ani=!1},25)})):e(this.dom.scroller).scrollTop(f)},fnMeasure:function(a){this.s.autoHeight&&this._fnCalcRowHeight();var b=this.s.heights;b.viewport=e(this.dom.scroller).height(),this.s.viewportRows=parseInt(b.viewport/b.row,10)+1,this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer,(a===k||a)&&this.s.dt.oInstance.fnDraw()},_fnConstruct:function(){var a=this;if(this.s.dt.oFeatures.bPaginate){this.dom.force.style.position="absolute",this.dom.force.style.top="0px",this.dom.force.style.left="0px",this.dom.force.style.width="1px",this.dom.scroller=e("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0],this.dom.scroller.appendChild(this.dom.force),this.dom.scroller.style.position="relative",this.dom.table=e(">table",this.dom.scroller)[0],this.dom.table.style.position="absolute",this.dom.table.style.top="0px",this.dom.table.style.left="0px",e(this.s.dt.nTableWrapper).addClass("DTS"),this.s.loadingIndicator&&(this.dom.loader=e('<div class="DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none"),e(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)),this.s.heights.row&&"auto"!=this.s.heights.row&&(this.s.autoHeight=!1),this.fnMeasure(!1),this.s.ingnoreScroll=!0,this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){a.s.dt.oApi._fnSaveState(a.s.dt)},500),e(this.dom.scroller).on("scroll.DTS",function(){a._fnScroll.call(a)}),e(this.dom.scroller).on("touchstart.DTS",function(){a._fnScroll.call(a)}),this.s.dt.aoDrawCallback.push({fn:function(){a.s.dt.bInitialised&&a._fnDrawCallback.call(a)},sName:"Scroller"}),e(m).on("resize.DTS",function(){a.fnMeasure(!1),a._fnInfo()});var b=!0;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(c,d){b&&a.s.dt.oLoadedState?(d.iScroller=a.s.dt.oLoadedState.iScroller,d.iScrollerTopRow=a.s.dt.oLoadedState.iScrollerTopRow,b=!1):(d.iScroller=a.dom.scroller.scrollTop,d.iScrollerTopRow=a.s.topRowFloat)},"Scroller_State"),this.s.dt.oLoadedState&&(this.s.topRowFloat=this.s.dt.oLoadedState.iScrollerTopRow||0),this.s.dt.aoDestroyCallback.push({sName:"Scroller",fn:function(){e(m).off("resize.DTS"),e(a.dom.scroller).off("touchstart.DTS scroll.DTS"),e(a.s.dt.nTableWrapper).removeClass("DTS"),e("div.DTS_Loading",a.dom.scroller.parentNode).remove(),a.dom.table.style.position="",a.dom.table.style.top="",a.dom.table.style.left=""}})}else this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller")},_fnScroll:function(){var d,a=this,b=this.s.heights,c=this.dom.scroller.scrollTop;if(!this.s.skip&&!this.s.ingnoreScroll)if(this.s.dt.bFiltered||this.s.dt.bSorted)this.s.lastScrollTop=0;else{if(this._fnInfo(),clearTimeout(this.s.stateTO),this.s.stateTO=setTimeout(function(){a.s.dt.oApi._fnSaveState(a.s.dt)},250),c<this.s.redrawTop||c>this.s.redrawBottom){var f=Math.ceil((this.s.displayBuffer-1)/2*this.s.viewportRows);Math.abs(c-this.s.lastScrollTop)>b.viewport||this.s.ani?(d=parseInt(this._domain("physicalToVirtual",c)/b.row,10)-f,this.s.topRowFloat=this._domain("physicalToVirtual",c)/b.row):(d=this.fnPixelsToRow(c)-f,this.s.topRowFloat=this.fnPixelsToRow(c,!1)),0>=d?d=0:d+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()?0>(d=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength)&&(d=0):0!=d%2&&d++,d!=this.s.dt._iDisplayStart&&(this.s.tableTop=e(this.s.dt.nTable).offset().top,this.s.tableBottom=e(this.s.dt.nTable).height()+this.s.tableTop,b=function(){null===a.s.scrollDrawReq&&(a.s.scrollDrawReq=c),a.s.dt._iDisplayStart=d,a.s.dt.oApi._fnCalculateEnd&&a.s.dt.oApi._fnCalculateEnd(a.s.dt),a.s.dt.oApi._fnDraw(a.s.dt)},this.s.dt.oFeatures.bServerSide?(clearTimeout(this.s.drawTO),this.s.drawTO=setTimeout(b,this.s.serverWait)):b(),this.dom.loader&&!this.s.loaderVisible)&&(this.dom.loader.css("display","block"),this.s.loaderVisible=!0)}this.s.lastScrollTop=c,this.s.stateSaveThrottle()}},_domain:function(a,b){var d,c=this.s.heights;if(c.virtual===c.scroll){if(d=(c.virtual-c.viewport)/(c.scroll-c.viewport),"virtualToPhysical"===a)return b/d;if("physicalToVirtual"===a)return b*d}var e=(c.scroll-c.viewport)/2,h=(c.virtual-c.viewport)/2;return d=h/(e*e),"virtualToPhysical"===a?b<h?Math.pow(b/d,.5):(b=2*h-b,0>b?c.scroll:2*e-Math.pow(b/d,.5)):"physicalToVirtual"===a?b<e?b*b*d:(b=2*e-b,0>b?c.virtual:2*h-b*b*d):void 0},_fnDrawCallback:function(){var a=this,b=this.s.heights,c=this.dom.scroller.scrollTop,d=e(this.s.dt.nTable).height(),f=this.s.dt._iDisplayStart,h=this.s.dt._iDisplayLength,g=this.s.dt.fnRecordsDisplay();this.s.skip=!0,this._fnScrollForce(),c=0===f?this.s.topRowFloat*b.row:f+h>=g?b.scroll-(g-this.s.topRowFloat)*b.row:this._domain("virtualToPhysical",this.s.topRowFloat*b.row),this.dom.scroller.scrollTop=c,this.s.baseScrollTop=c,this.s.baseRowTop=this.s.topRowFloat;var j=c-(this.s.topRowFloat-f)*b.row;0===f?j=0:f+h>=g&&(j=b.scroll-d),this.dom.table.style.top=j+"px",this.s.tableTop=j,this.s.tableBottom=d+this.s.tableTop,d=(c-this.s.tableTop)*this.s.boundaryScale,this.s.redrawTop=c-d,this.s.redrawBottom=c+d,this.s.skip=!1,this.s.dt.oFeatures.bStateSave&&null!==this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.iScroller?((c=!(!this.s.dt.sAjaxSource&&!a.s.dt.ajax||this.s.dt.oFeatures.bServerSide))&&2==this.s.dt.iDraw||!c&&1==this.s.dt.iDraw)&&setTimeout(function(){e(a.dom.scroller).scrollTop(a.s.dt.oLoadedState.iScroller),a.s.redrawTop=a.s.dt.oLoadedState.iScroller-b.viewport/2,setTimeout(function(){a.s.ingnoreScroll=!1},0)},0):a.s.ingnoreScroll=!1,setTimeout(function(){a._fnInfo.call(a)},0),this.dom.loader&&this.s.loaderVisible&&(this.dom.loader.css("display","none"),this.s.loaderVisible=!1)},_fnScrollForce:function(){var a=this.s.heights;a.virtual=a.row*this.s.dt.fnRecordsDisplay(),a.scroll=a.virtual,1e6<a.scroll&&(a.scroll=1e6),this.dom.force.style.height=a.scroll+"px"},_fnCalcRowHeight:function(){var a=this.s.dt,b=a.nTable,c=b.cloneNode(!1),d=e("<tbody/>").appendTo(c),f=e('<div class="'+a.oClasses.sWrapper+' DTS"><div class="'+a.oClasses.sScrollWrapper+'"><div class="'+a.oClasses.sScrollBody+'"></div></div></div>');for(e("tbody tr:lt(4)",b).clone().appendTo(d);3>e("tr",d).length;)d.append("<tr><td>&nbsp;</td></tr>");e("div."+a.oClasses.sScrollBody,f).append(c),a._bInitComplete?a=b.parentNode:(this.s.dt.nHolding||(this.s.dt.nHolding=e("<div></div>").insertBefore(this.s.dt.nTable)),a=this.s.dt.nHolding),f.appendTo(a),this.s.heights.row=e("tr",d).eq(1).outerHeight(),f.remove()},_fnInfo:function(){if(this.s.dt.oFeatures.bInfo){var a=this.s.dt,b=a.oLanguage,c=this.dom.scroller.scrollTop,d=Math.floor(this.fnPixelsToRow(c,!1,this.s.ani)+1),f=a.fnRecordsTotal(),h=a.fnRecordsDisplay(),c=Math.ceil(this.fnPixelsToRow(c+this.s.heights.viewport,!1,this.s.ani)),c=h<c?h:c,g=a.fnFormatNumber(d),j=a.fnFormatNumber(c),i=a.fnFormatNumber(f),k=a.fnFormatNumber(h),g=0===a.fnRecordsDisplay()&&a.fnRecordsDisplay()==a.fnRecordsTotal()?b.sInfoEmpty+b.sInfoPostFix:0===a.fnRecordsDisplay()?b.sInfoEmpty+" "+b.sInfoFiltered.replace("_MAX_",i)+b.sInfoPostFix:a.fnRecordsDisplay()==a.fnRecordsTotal()?b.sInfo.replace("_START_",g).replace("_END_",j).replace("_MAX_",i).replace("_TOTAL_",k)+b.sInfoPostFix:b.sInfo.replace("_START_",g).replace("_END_",j).replace("_MAX_",i).replace("_TOTAL_",k)+" "+b.sInfoFiltered.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()))+b.sInfoPostFix;if((b=b.fnInfoCallback)&&(g=b.call(a.oInstance,a,d,c,f,h,g)),void 0!==(a=a.aanFeatures.i))for(d=0,f=a.length;d<f;d++)e(a[d]).html(g)}}},g.defaults={trace:!1,rowHeight:"auto",serverWait:200,displayBuffer:9,boundaryScale:.5,loadingIndicator:!1},g.oDefaults=g.defaults,g.version="1.2.2","function"==typeof e.fn.dataTable&&"function"==typeof e.fn.dataTableExt.fnVersionCheck&&e.fn.dataTableExt.fnVersionCheck("1.9.0")?e.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInit;return new g(a,b.scroller||b.oScroller||{}).dom.wrapper},cFeature:"S",sFeature:"Scroller"}):alert("Warning: Scroller requires DataTables 1.9.0 or greater - www.datatables.net/download"),e.fn.dataTable.Scroller=g,e.fn.DataTable.Scroller=g,e.fn.dataTable.Api){var i=e.fn.dataTable.Api;i.register("scroller()",function(){return this}),i.register("scroller().rowToPixels()",function(a,b,c){var d=this.context;if(d.length&&d[0].oScroller)return d[0].oScroller.fnRowToPixels(a,b,c)}),i.register("scroller().pixelsToRow()",function(a,b,c){var d=this.context;if(d.length&&d[0].oScroller)return d[0].oScroller.fnPixelsToRow(a,b,c)}),i.register("scroller().scrollToRow()",function(a,b){return this.iterator("table",function(c){c.oScroller&&c.oScroller.fnScrollToRow(a,b)}),this}),i.register("scroller().measure()",function(a){return this.iterator("table",function(b){b.oScroller&&b.oScroller.fnMeasure(a)}),this})}return g};__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(3)],__WEBPACK_AMD_DEFINE_FACTORY__=l,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document)},,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(64),__webpack_require__(57),__webpack_require__(69)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(chat,ui,accountsImporter){var socket=io.connect(),sClient={socket:socket};return ui.init(socket),sClient.ui=ui,chat.init(socket),sClient.chat=chat,accountsImporter.init(socket),sClient.accountsImporter=accountsImporter,sClient}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(7),__webpack_require__(2),__webpack_require__(39)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,helpers,_,socket){function closeFlash(e){$(this).parent().slideUp(250,function(){helpers.resizeAll()}),e.preventDefault()}function clearNotifications(){socket.ui.clearNotifications()}function hideDropdownMouseUp(e){if($(".enjoyhint").length>0)return!0;$("a[data-notifications]").each(function(){var drop=$("#"+$(this).attr("data-notifications"));0===$(this).has(e.target).length&&(drop.is(e.target)||0!==drop.has(e.target).length||drop.hasClass("pDropOpen")&&drop.removeClass("pDropOpen"))})}function showDropdown(e){var drop=$("#"+$(this).attr("data-notifications"));$("#"+$(drop).attr("data-scroll"));if("visible"===drop.css("visibility"))return drop.removeClass("pDropOpen"),!0;var pageContent=$(this).parents("#page-content > div"),insidePage=pageContent.length>0,pageOffsetTop=0,pageOffsetLeft=0;if(insidePage){var pOffset=pageContent.offset();pageOffsetTop=pOffset.top,pageOffsetLeft=pOffset.left}pageOffsetTop+=$(this).offset().top;var leftO=250;$(drop).hasClass("pSmall")&&(leftO=180);var left=$(this).offset().left-$(window).scrollLeft()-pageOffsetLeft-leftO;drop.hasClass("p-dropdown-left");var leftExtraOffset=$(drop).attr("data-left-offset");_.isUndefined(leftExtraOffset)&&(leftExtraOffset=0),left+=Number(leftExtraOffset),left+="px";var hasNotice=!1,$noticeFrame=$(".wrapper").find("#notice-banner");$noticeFrame.length>0&&(hasNotice=!1===$noticeFrame.hasClass("uk-hidden"));var topOffset=$(this).offset().top-$(window).scrollTop()-pageOffsetTop,top=$(this).outerHeight()+topOffset,topExtraOffset=$(drop).attr("data-top-offset");_.isUndefined(topExtraOffset)&&(topExtraOffset=0),top+=Number(topExtraOffset),hasNotice&&(top+=30),top+="px";var override=$(drop).attr("data-override");!_.isUndefined(override)&&override.length>0&&(top=topExtraOffset+"px",left=leftExtraOffset+"px"),$(drop).find(".close-on-click").find("li > a").each(function(){$(this).off("click",liClick),$(this).on("click",liClick)}),$(drop).addClass("pDropOpen"),$(drop).css({position:"absolute",left:left,top:top}),e.preventDefault()}function liClick(){helpers.hideAllpDropDowns()}var navigation={};return navigation.init=function(){this.notifications(),this.flashMessageClose()},navigation.flashMessageClose=function(){var flashMessage=$(".flash-message").find(".close");flashMessage.off("click",closeFlash),flashMessage.on("click",closeFlash)},navigation.notifications=function(){$("a[data-notifications]").each(function(){$(this).off("click",showDropdown),$(this).on("click",showDropdown)}),$("a[data-clearNotifications]").each(function(){$(this).off("click",clearNotifications),$(this).on("click",clearNotifications)}),$(document).off("mouseup",hideDropdownMouseUp),$(document).on("mouseup",hideDropdownMouseUp)},navigation}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},,,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(50),__webpack_require__(62),__webpack_require__(26),__webpack_require__(27),__webpack_require__(28)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular){return angular.module("trudesk",["trudesk.services.session","ngRoute","ngCookies","ngSanitize","trudesk.controllers"]).config(function($interpolateProvider){$interpolateProvider.startSymbol("{[{"),$interpolateProvider.endSymbol("}]}")})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},,,,,,function(module,exports,__webpack_require__){(function(__webpack_provided_window_dot_jQuery){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,u,o=gap,a=t[e];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(s=a.length,n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;n<s;n+=1)"string"==typeof rep[n]&&(r=rep[n],(i=str(r,a))&&u.push(quote(r)+(gap?": ":":")+i));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a))&&u.push(quote(r)+(gap?": ":":")+i);return i=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},r=__webpack_provided_window_dot_jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){return n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||void 0},onDomLoad:function(e){r(e)}},void 0!==n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex();return e===t},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,r=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var r,i,u,a,t="",f=Boolean(o.getHash());return o.isInternetExplorer()?(r="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",r),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),u="",a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash(),r=o.getHash(i.contentWindow.document);return n!==t?(t=n,r!==n&&(u=r=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,"hashchange")):r!==u&&(u=r,f&&""===r?o.back():o.setHash(r,!1)),a=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||"";return n!==t&&(t=n,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var a,n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(o.getHashByState(i),a=o.discardedState(i),a?(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,r,i){if(r=encodeURI(r).replace(/%25/g,"%"),o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===f?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))&&o.setHash(u,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){if(r=encodeURI(r).replace(/%25/g,"%"),o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getStateByIndex(-2);return o.discardState(a,s,l),u===f?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},void 0!==o.init&&o.init()}(window),function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{s=e.sessionStorage,s.setItem("TEST","1"),s.removeItem("TEST")}catch(d){s=!1}if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,void 0!==h.init)throw new Error("History.js Core has already been loaded...");h.init=function(e){return void 0!==h.Adapter&&(void 0!==h.initCore&&h.initCore(),void 0!==h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(d){if(void 0!==h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var i,s,o,u,a,e=void 0!==n&&void 0!==n.log&&void 0!==n.log.apply,t=r.getElementById("log");for(e?(u=Array.prototype.slice.call(arguments),i=u.shift(),void 0!==n.debug?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i="\n"+arguments[0]+"\n",s=1,o=arguments.length;s<o;++s){if("object"==typeof(a=arguments[s])&&void 0!==l)try{a=l.stringify(a)}catch(f){}i+="\n"+a+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached=void 0!==h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},h.isInternetExplorer=function(){return h.isInternetExplorer.cached=void 0!==h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},h.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){var e=h.getState(!1,!1),t=(e||{}).url||h.getLocationHref();return t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===r?h.getRootUrl()+e.replace(/^\/+/,""):"#"===r?h.getPageUrl().replace(/#.*/,"")+e:"?"===r?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var n,t=h.extractId(e.url);if(!t)if(n=h.getStateString(e),void 0!==h.stateToId[n])t=h.stateToId[n];else if(void 0!==h.store.stateToId[n])t=h.store.stateToId[n];else{for(;t=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==h.idToState[t]||void 0!==h.store.idToState[t];);h.stateToId[n]=t,h.idToState[t]=e}return t},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&!0!==h.options.disableSuid&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r)},h.getStateById=function(e){return e=String(e),h.idToState[e]||h.store.idToState[e]||t},h.getStateString=function(e){var t,n;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},l.stringify(n)},h.getStateId=function(e){var t;return t=h.normalizeState(e),t.id},h.getHashByState=function(e){var t;return t=h.normalizeState(e),t.hash},h.extractId=function(e){var n,i;return i=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),n?n[1]||e:e,(n?String(n[2]||""):"")||!1},h.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},h.extractState=function(e,t){var r,i,n=null;return t=t||!1,r=h.extractId(e),r&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),r=h.getIdByUrl(i)||!1,r&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){return h.urlToId[e]||h.store.urlToId[e]||t},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var n;return n=h.extractState(e.url),n&&n.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var n,r,i,t=!1;return h.savedStates.length&&(n=e.id,r=h.getLastSavedState(),i=r.id,t=n===i),t},h.saveState=function(e){return!h.isLastSavedState(e)&&(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){return void 0===e?h.savedStates[h.savedStates.length-1]:e<0?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){return h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t=h.getLocationHref(e);return h.getHashByUrl(t)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(e,t){var n,i;return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var n,t=e.title;t||(n=h.getStateByIndex(0))&&n.url===e.url&&(t=n.title||h.options.initialTitle);try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=t,h},h.queues=[],h.busy=function(e){if(void 0!==e?h.busy.flag=e:void 0===h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)n=h.queues[e],0!==n.length&&(r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay))};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var n,t=h.extractState(h.getLocationHref());if(!h.isLastSavedState(t))return n=t,n||(n=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var s,o,r=!1,i=!1;return h.doubleCheckComplete(),s=h.getHash(),s?(o=h.extractState(s||h.getLocationHref(),!0),o?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,n)||!1,i=r?h.getStateById(r):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()),i||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==i.vendor&&"Mozilla"!==(i.appCodeName||"")||(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},(!h.options||!h.options.delayInit)&&h.init()}(window)}).call(exports,__webpack_require__(0))},,,function(module,exports,__webpack_require__){var require,require;!function(f){module.exports=f()}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function trim(string){return string.replace(/^[ \r\n\t]+|[ \r\n\t]+$/g,"")}function isBlock(node){return-1!==blocks.indexOf(node.nodeName.toLowerCase())}function isVoid(node){return-1!==voids.indexOf(node.nodeName.toLowerCase())}function htmlToDom(string){var tree=(new HtmlParser).parseFromString(string,"text/html");return collapse(tree,isBlock),tree}function bfsOrder(node){for(var elem,children,i,inqueue=[node],outqueue=[];inqueue.length>0;)for(elem=inqueue.shift(),outqueue.push(elem),children=elem.childNodes,i=0;i<children.length;i++)1===children[i].nodeType&&inqueue.push(children[i]);return outqueue.shift(),outqueue}function getContent(node){for(var text="",i=0;i<node.childNodes.length;i++)if(1===node.childNodes[i].nodeType)text+=node.childNodes[i]._replacement;else{if(3!==node.childNodes[i].nodeType)continue;text+=node.childNodes[i].data}return text}function outer(node,content){return node.cloneNode(!1).outerHTML.replace("><",">"+content+"<")}function canConvert(node,filter){if("string"==typeof filter)return filter===node.nodeName.toLowerCase();if(Array.isArray(filter))return-1!==filter.indexOf(node.nodeName.toLowerCase());if("function"==typeof filter)return filter.call(toMarkdown,node);throw new TypeError("`filter` needs to be a string, array, or function")}function isFlankedByWhitespace(side,node){var sibling,regExp,isFlanked;return"left"===side?(sibling=node.previousSibling,regExp=/ $/):(sibling=node.nextSibling,regExp=/^ /),sibling&&(3===sibling.nodeType?isFlanked=regExp.test(sibling.nodeValue):1!==sibling.nodeType||isBlock(sibling)||(isFlanked=regExp.test(sibling.textContent))),isFlanked}function flankingWhitespace(node){var leading="",trailing="";if(!isBlock(node)){var hasLeading=/^[ \r\n\t]/.test(node.innerHTML),hasTrailing=/[ \r\n\t]$/.test(node.innerHTML);hasLeading&&!isFlankedByWhitespace("left",node)&&(leading=" "),hasTrailing&&!isFlankedByWhitespace("right",node)&&(trailing=" ")}return{leading:leading,trailing:trailing}}function process(node){for(var replacement,content=getContent(node),i=0;i<converters.length;i++){var converter=converters[i];if(canConvert(node,converter.filter)){if("function"!=typeof converter.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var whitespace=flankingWhitespace(node);(whitespace.leading||whitespace.trailing)&&(content=trim(content)),replacement=whitespace.leading+converter.replacement.call(toMarkdown,content,node)+whitespace.trailing;break}}isVoid(node)||/A/.test(node.nodeName)||!/^\s*$/i.test(content)||(replacement=""),node._replacement=replacement}var toMarkdown,converters,_document,mdConverters=require("./lib/md-converters"),gfmConverters=require("./lib/gfm-converters"),collapse=require("collapse-whitespace"),_window="undefined"!=typeof window?window:this;_document="undefined"==typeof document?require("jsdom").jsdom():document;var blocks=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],voids=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],HtmlParser=function(){var Parser=_window.DOMParser,canParse=!1;try{(new Parser).parseFromString("","text/html")&&(canParse=!0)}catch(e){}return canParse}()?_window.DOMParser:function(){var Parser=function(){};return Parser.prototype.parseFromString=function(string){var newDoc=_document.implementation.createHTMLDocument("");return string.toLowerCase().indexOf("<!doctype")>-1?newDoc.documentElement.innerHTML=string:newDoc.body.innerHTML=string,newDoc},Parser}();toMarkdown=function(input,options){if(options=options||{},"string"!=typeof input)throw new TypeError(input+" is not a string");input=input.replace(/(\d+)\. /g,"$1\\. ");var output,clone=htmlToDom(input).body,nodes=bfsOrder(clone);converters=mdConverters.slice(0),options.gfm&&(converters=gfmConverters.concat(converters)),options.converters&&(converters=options.converters.concat(converters));for(var i=nodes.length-1;i>=0;i--)process(nodes[i]);return output=getContent(clone),output.replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")},toMarkdown.isBlock=isBlock,toMarkdown.isVoid=isVoid,toMarkdown.trim=trim,toMarkdown.outer=outer,module.exports=toMarkdown},{"./lib/gfm-converters":2,"./lib/md-converters":3,"collapse-whitespace":5,jsdom:6}],2:[function(require,module,exports){"use strict";function cell(content,node){var index=Array.prototype.indexOf.call(node.parentNode.childNodes,node),prefix=" ";return 0===index&&(prefix="| "),prefix+content+" |"}var highlightRegEx=/highlight highlight-(\S+)/;module.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(content){return"~~"+content+"~~"}},{filter:function(node){return"checkbox"===node.type&&"LI"===node.parentNode.nodeName},replacement:function(content,node){return(node.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(content,node){return cell(content,node)}},{filter:"tr",replacement:function(content,node){var borderCells="",alignMap={left:":--",right:"--:",center:":-:"};if("THEAD"===node.parentNode.nodeName)for(var i=0;i<node.childNodes.length;i++){var align=node.childNodes[i].attributes.align,border="---";align&&(border=alignMap[align.value]||border),borderCells+=cell(border,node.childNodes[i])}return"\n"+content+(borderCells?"\n"+borderCells:"")}},{filter:"table",replacement:function(content){return"\n\n"+content+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(content){return content}},{filter:function(node){return"PRE"===node.nodeName&&node.firstChild&&"CODE"===node.firstChild.nodeName},replacement:function(content,node){return"\n\n```\n"+node.firstChild.textContent+"\n```\n\n"}},{filter:function(node){return"PRE"===node.nodeName&&"DIV"===node.parentNode.nodeName&&highlightRegEx.test(node.parentNode.className)},replacement:function(content,node){return"\n\n```"+node.parentNode.className.match(highlightRegEx)[1]+"\n"+node.textContent+"\n```\n\n"}},{filter:function(node){return"DIV"===node.nodeName&&highlightRegEx.test(node.className)},replacement:function(content){return"\n\n"+content+"\n\n"}}]},{}],3:[function(require,module,exports){"use strict";module.exports=[{filter:"p",replacement:function(content){return"\n\n"+content+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(content,node){for(var hLevel=node.nodeName.charAt(1),hPrefix="",i=0;i<hLevel;i++)hPrefix+="#";return"\n\n"+hPrefix+" "+content+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(content){return"_"+content+"_"}},{filter:["strong","b"],replacement:function(content){return"**"+content+"**"}},{filter:function(node){var hasSiblings=node.previousSibling||node.nextSibling,isCodeBlock="PRE"===node.parentNode.nodeName&&!hasSiblings;return"CODE"===node.nodeName&&!isCodeBlock},replacement:function(content){return"`"+content+"`"}},{filter:function(node){return"A"===node.nodeName&&node.getAttribute("href")},replacement:function(content,node){var titlePart=node.title?' "'+node.title+'"':"";return"["+content+"]("+node.getAttribute("href")+titlePart+")"}},{filter:"img",replacement:function(content,node){var alt=node.alt||"",src=node.getAttribute("src")||"",title=node.title||"",titlePart=title?' "'+title+'"':"";return src?"!["+alt+"]("+src+titlePart+")":""}},{filter:function(node){return"PRE"===node.nodeName&&"CODE"===node.firstChild.nodeName},replacement:function(content,node){return"\n\n    "+node.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(content){return content=this.trim(content),content=content.replace(/\n{3,}/g,"\n\n"),"\n\n"+(content=content.replace(/^/gm,"> "))+"\n\n"}},{filter:"li",replacement:function(content,node){content=content.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var parent=node.parentNode,index=Array.prototype.indexOf.call(parent.children,node)+1;return(/ol/i.test(parent.nodeName)?index+".  ":"*   ")+content}},{filter:["ul","ol"],replacement:function(content,node){for(var strings=[],i=0;i<node.childNodes.length;i++)strings.push(node.childNodes[i]._replacement);return/li/i.test(node.parentNode.nodeName)?"\n"+strings.join("\n"):"\n\n"+strings.join("\n")+"\n\n"}},{filter:function(node){return this.isBlock(node)},replacement:function(content,node){return"\n\n"+this.outer(node,content)+"\n\n"}},{filter:function(){return!0},replacement:function(content,node){return this.outer(node,content)}}]},{}],4:[function(require,module,exports){module.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],5:[function(require,module,exports){"use strict";function defaultBlockTest(node){return isElem(node)&&blocks.indexOf(node.nodeName)>=0}function isText(node){return node&&3===node.nodeType}function isElem(node){return node&&1===node.nodeType}function whitespace(root,isBlock){function next(node){for(;node&&node!==root;){if(node.nextSibling)return node.nextSibling;node=node.parentNode,prevText&&isBlock(node)&&(prevText.data=prevText.data.replace(/[ \r\n\t]$/,""),prevText=null)}return null}function first(node){return node.firstChild?node.firstChild:next(node)}function remove(node){var nextNode=next(node);return node.parentNode.removeChild(node),nextNode}var nextNode,prevNode,prevText,node,text,startSpace=/^ /,endSpace=/ $/;if("function"!=typeof isBlock&&(isBlock=defaultBlockTest),"PRE"!==root.nodeName){for(root.normalize(),node=first(root);node;)if(prevNode=node.previousSibling,nextNode=node.nextSibling,isText(node))text=node.data.replace(/[ \r\n\t]+/g," "),(!prevText||prevNode&&isBlock(prevNode))&&(text=text.replace(startSpace,"")),nextNode&&isBlock(nextNode)&&(text=text.replace(endSpace,"")),prevText&&endSpace.test(prevText.data)&&startSpace.test(text)&&(text=text.substr(1)),text?(node.data=text,prevText=node,node=next(node)):node=remove(node);else if(isElem(node)){if("PRE"===node.nodeName){node=next(node);continue}prevText&&isBlock(node)&&(prevText.data=prevText.data.replace(endSpace,""),prevText=null),node=first(node)}else node=remove(node);prevText&&(prevText.data=prevText.data.replace(endSpace,""))}}var blocks=require("block-elements").map(function(name){return name.toUpperCase()});module.exports=whitespace},{"block-elements":4}],6:[function(require,module,exports){},{}]},{},[1])(1)})},,,,,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(2),__webpack_require__(7),__webpack_require__(40),__webpack_require__(66),__webpack_require__(67),__webpack_require__(68),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,_,helpers,nav,noticeUI,ticketsUI,logsIO){function setAssigneeClicked(e){e.preventDefault();var _id=e.data._id,ticketId=$("#__ticketId").html(),payload={_id:_id,ticketId:ticketId};socket.emit("setAssignee",payload),$("#assigneeDropdown").removeClass("pDropOpen")}function updateMailNotificationsClicked(e){socket.emit("updateMailNotifications"),e.preventDefault()}function updateUsersBtnClicked(e){socket.emit("updateUsers"),e.preventDefault()}function updateAssigneeList(e){socket.emit("updateAssigneeList"),e.preventDefault()}function updateNotificationsClicked(e){socket.emit("updateNotifications"),e.preventDefault()}var socket,loggedInAccount,socketUi={};return socketUi.init=function(sock){loggedInAccount=window.trudeskSessionService.getUser(),socketUi.socket=socket=sock,this.onReconnect(),this.onDisconnect(),this.updateUsers(),this.updateNotifications(),this.updateConversationsNotifications(),this.updateComments(),this.updateUi(),this.updateTicketStatus(),this.updateAssigneeList(),this.updateAssignee(),this.updateTicketType(),this.updateTicketPriority(),this.updateTicketGroup(),this.updateTicketIssue(),this.updateTicketAttachments(),this.updateTicketTags(),this.onTicketCreated(),this.onTicketDelete(),this.onUpdateTicketGrid(),this.onProfileImageUpdate(),this.updateShowNotice(socket),this.updateClearNotice(socket),this.updateSubscribe(socket),this.updateServerLogs(socket)},socketUi.setShowNotice=function(notice){noticeUI.setShowNotice(socket,notice)},socketUi.setClearNotice=function(){noticeUI.setClearNotice(socket)},socketUi.updateShowNotice=noticeUI.updateShowNotice,socketUi.updateClearNotice=noticeUI.updateClearNotice,socketUi.updateSubscribe=ticketsUI.updateSubscribe,socketUi.updateServerLogs=logsIO.getLogData,socketUi.fetchServerLogs=function(){socket.emit("logs:fetch")},socketUi.onReconnect=function(){socket.removeAllListeners("reconnect"),socket.on("reconnect",function(){helpers.UI.hideDisconnectedOverlay()})},socketUi.onDisconnect=function(){socket.removeAllListeners("disconnect"),socket.on("disconnect",function(){helpers.UI.showDisconnectedOverlay()}),socket.removeAllListeners("reconnect_attempt"),socket.on("reconnect_attempt",function(){helpers.UI.showDisconnectedOverlay()}),socket.removeAllListeners("connect_timeout"),socket.on("connect_timeout",function(){helpers.UI.showDisconnectedOverlay()})},socketUi.sendUpdateTicketStatus=function(id,status){socket.emit("updateTicketStatus",{ticketId:id,status:status})},socketUi.clearAssignee=function(id){socket.emit("clearAssignee",id)},socketUi.updateConversationsNotifications=function(){$(document).ready(function(){var btnMailNotifications=$("#btn_mail-notifications");btnMailNotifications.off("click",updateMailNotificationsClicked),btnMailNotifications.on("click",updateMailNotificationsClicked)}),socket.removeAllListeners("updateConversationsNotifications"),socket.on("updateConversationsNotifications",function(data){var label=$("#btn_mail-notifications").find("> span"),items=data.conversations;label.hide();var mailDropList=$("div.mail-Messages").find("ul");mailDropList.empty();var html="";_.each(items,function(item){void 0!==item.partner&&(html+="<li>",html+='<a class="messageNotification" href="/messages/'+item._id+'" role="button">',html+='<div class="uk-clearfix">',item.partner.image?html+='<div class="profilePic left"><img src="/uploads/users/'+item.partner.image+'" alt="profile"/></div>':html+='<div class="profilePic left"><img src="/uploads/users/defaultProfile.jpg" alt="profile"/></div>',html+='<div class="messageAuthor"><strong>'+item.partner.fullname+"</strong></div>",html+='<div class="messageSnippet">',html+="<span>"+item.recentMessage+"</span>",html+="</div>",html+='<div class="messageDate" style="position: absolute; top: 10px; right: 15px;">',html+='<time datetime="'+helpers.formatDate(item.updatedAt,"YYYY-MM-DDThh:mm")+'" class="timestamp">'+helpers.formatDate(item.updatedAt,"MMM DD, YYYY")+"</time>",html+="</div>",html+="</div>",html+="</a>",html+="</li>")}),mailDropList.append(html),$("body").ajaxify()})},socketUi.updateTicketStatus=function(){socket.removeAllListeners("updateTicketStatus"),socket.on("updateTicketStatus",function(payload){var ticketId=payload.tid,status=payload.status,statusSelectBox=$("#statusSelect");statusSelectBox.length>0&&statusSelectBox.addClass("hide");var tStatusBox=$('.floating-ticket-status[data-ticketId="'+ticketId+'"] > .ticket-status');if(tStatusBox.length>0){tStatusBox.removeClass("ticket-new"),tStatusBox.removeClass("ticket-open"),tStatusBox.removeClass("ticket-pending"),tStatusBox.removeClass("ticket-closed");var s="New",c="ticket-new";switch(status){case 0:s="New",c="ticket-new";break;case 1:s="Open",c="ticket-open";break;case 2:s="Pending",c="ticket-pending";break;case 3:s="Closed",c="ticket-closed"}tStatusBox.find("span").html(s),tStatusBox.addClass(c);var ticketReply=$(".ticket-reply"),assigneeListBtn=$(".ticket-assignee > a"),ticketTypeSelect=$("select#tType"),ticketPriority=$("select#tPriority"),ticketGroup=$("select#tGroup"),ticketTags=$("div#editTags"),addAttachments=$("form#attachmentForm > div.add-attachment"),editIssue=$("div.initial-issue > div.edit-issue"),commentActions=$("div.comment-actions");3===status?(ticketReply.length>0&&ticketReply.addClass("hide"),assigneeListBtn.length>0&&(assigneeListBtn.removeAttr("data-notifications"),assigneeListBtn.removeAttr("data-updateUi"),nav.notifications()),ticketTypeSelect.length>0&&ticketTypeSelect.prop("disabled",!0),ticketPriority.length>0&&ticketPriority.prop("disabled",!0),ticketGroup.length>0&&ticketGroup.prop("disabled",!0),ticketTags.length>0&&ticketTags.addClass("hide"),addAttachments.length>0&&addAttachments.addClass("hide"),editIssue.length>0&&editIssue.addClass("hide"),commentActions.length>0&&commentActions.addClass("hide")):(ticketReply.length>0&&ticketReply.removeClass("hide"),ticketTypeSelect.length>0&&ticketTypeSelect.prop("disabled",!1),ticketPriority.length>0&&ticketPriority.prop("disabled",!1),ticketGroup.length>0&&ticketGroup.prop("disabled",!1),ticketTags.length>0&&ticketTags.removeClass("hide"),addAttachments.length>0&&addAttachments.removeClass("hide"),editIssue.length>0&&editIssue.removeClass("hide"),commentActions.length>0&&commentActions.removeClass("hide"),assigneeListBtn.length>0&&(assigneeListBtn.attr("data-notifications","assigneeDropdown"),assigneeListBtn.attr("data-updateui","assigneeList"),nav.notifications(),socketUi.updateUi()))}})},socketUi.updateAssigneeList=function(){socket.removeAllListeners("updateAssigneeList"),socket.on("updateAssigneeList",function(users){var wrapper="";_.each(users,function(user){var html='<li data-setAssignee="'+user._id+'">';html+='<a class="messageNotification no-ajaxy" role="button">',html+='<div class="uk-clearfix">',_.isUndefined(user.image)?html+='<div class="profilePic left"><img src="/uploads/users/defaultProfile.jpg" alt="profile"/></div>':html+='<div class="profilePic left"><img src="/uploads/users/'+user.image+'" alt="profile"/></div>',html+='<div class="messageAuthor"><strong>'+user.fullname+"</strong></div>",html+='<div class="messageSnippet">',html+="<span>"+user.email+"</span>",html+="</div>",html+='<div class="messageDate">',html+="<span>"+user.title+"</span>",html+="</div>",html+="</div>",html+="</a>",html+="</li>",wrapper+=html});var assigneeListDrop=$("#assigneeDropdown-content > ul");$("#assigneeDropdown-content").addClass("uk-clearfix").css({height:"auto","max-height":"372px","overflow-y":"auto","overflow-x":"hidden"}),assigneeListDrop.length>0&&(assigneeListDrop.css({height:"100%"}),assigneeListDrop.html(wrapper),$.each(assigneeListDrop.find("li[data-setAssignee]"),function(){var self=$(this),$_id=self.attr("data-setAssignee");self.off("click",setAssigneeClicked),self.on("click",{_id:$_id},setAssigneeClicked)}))})},socketUi.updateAssignee=function(){socket.removeAllListeners("updateAssignee"),socket.on("updateAssignee",function(ticket){var assigneeContainer=$('.ticket-assignee[data-ticketId="'+ticket._id+'"]');if(assigneeContainer.length>0){var image=_.isUndefined(ticket.assignee)?"defaultProfile.jpg":ticket.assignee.image;_.isUndefined(image)&&(image="defaultProfile.jpg"),assigneeContainer.find("a > img").attr("src","/uploads/users/"+image);var $bubble=assigneeContainer.find("a > span[data-user-status-id]");$bubble.length<1&&ticket.assignee&&($bubble=$('<span class="user-offline uk-border-circle" data-user-status-id></span>'),assigneeContainer.find("a").append($bubble),$bubble=assigneeContainer.find("a > span[data-user-status-id]")),ticket.assignee?($bubble.attr("data-user-status-id",ticket.assignee._id),socket.emit("updateUsers")):$bubble.length>0&&$bubble.remove();var details=assigneeContainer.find(".ticket-assignee-details");if(details.length>0){var name=_.isUndefined(ticket.assignee)?"No User Assigned":ticket.assignee.fullname;details.find("h3").html(name);var a=details.find("a.comment-email-link"),email=_.isUndefined(ticket.assignee)?"":ticket.assignee.email;a.length>0?a.attr("href","mailto:"+email).html(email):(a=$("<a></a>").attr("href","mailto:"+email).html(email).addClass("comment-email-link uk-text-truncate"),details.append(a));var span=details.find("span"),title=_.isUndefined(ticket.assignee)?"":ticket.assignee.title;span.length>0?span.html(title):(span=$("<span></span>").html(title),details.append(span))}}socket.emit("$trudesk:chat:updateOnlineBubbles")})},socketUi.setTicketType=function(ticketId,typeId){var payload={ticketId:ticketId,typeId:typeId};socket.emit("setTicketType",payload)},socketUi.updateTicketType=function(){socket.removeAllListeners("updateTicketType"),socket.on("updateTicketType",function(data){var typeSelect=$('select#tType[data-ticketId="'+data._id+'"] option[value="'+data.type._id+'"]');typeSelect.length>0?typeSelect.prop("selected",!0):(typeSelect=$('div#tType[data-ticketId="'+data._id+'"]'),typeSelect.length>0&&typeSelect.html(data.type.name))})},socketUi.setTicketPriority=function(ticketId,priority){var payload={ticketId:ticketId,priority:priority};socket.emit("setTicketPriority",payload)},socketUi.updateTicketPriority=function(){socket.removeAllListeners("updateTicketPriority"),socket.on("updateTicketPriority",function(data){var prioritySelect=$('select#tPriority[data-ticketId="'+data._id+'"] option[value="'+data.priority+'"]');if(prioritySelect.length>0)prioritySelect.prop("selected",!0);else if(prioritySelect=$('div#tPriority[data-ticketId="'+data._id+'"]'),prioritySelect.length>0){var priorityname="Normal";switch(data.priority){case 1:priorityname="Normal";break;case 2:priorityname="Urgent";break;case 3:priorityname="Critical"}prioritySelect.html(priorityname)}})},socketUi.setTicketGroup=function(ticketId,group){var payload={ticketId:ticketId,groupId:group._id};socket.emit("setTicketGroup",payload)},socketUi.updateTicketGroup=function(){socket.removeAllListeners("updateTicketGroup"),socket.on("updateTicketGroup",function(data){var groupSelect=$('select#tGroup[data-ticketId="'+data._id+'"] option[value="'+data.group._id+'"]');groupSelect.length>0?groupSelect.prop("selected",!0):(groupSelect=$('div#tGroup[data-ticketId="'+data._id+'"]'),groupSelect.length>0&&groupSelect.html(data.group.name))})},socketUi.setTicketIssue=function(ticketId,issue){var payload={ticketId:ticketId,issue:issue};socket.emit("setTicketIssue",payload)},socketUi.updateTicketIssue=function(){socket.removeAllListeners("updateTicketIssue"),socket.on("updateTicketIssue",function(data){var issueText=$('.initial-issue[data-ticketid="'+data._id+'"]').find("div.issue-text").find("div.issue-body"),issueForm=$(".edit-issue-form");issueText.length>0&&(issueText.html(data.issue),issueForm.addClass("hide"),issueText.removeClass("hide"))})},socketUi.setCommentText=function(ticketId,commentId,commentText){var payload={ticketId:ticketId,commentId:commentId,commentText:commentText};socket.emit("setCommentText",payload)},socketUi.removeComment=function(ticketId,commentId){var payload={ticketId:ticketId,commentId:commentId};socket.emit("removeComment",payload)},socketUi.setNoteText=function(ticketId,noteId,noteText){var payload={ticketId:ticketId,noteId:noteId,noteText:noteText};socket.emit("$trudesk:tickets:setNoteText",payload)},socketUi.removeNote=function(ticketId,noteId){var payload={ticketId:ticketId,noteId:noteId};socket.emit("$trudesk:tickets:removeNote",payload)},socketUi.refreshTicketAttachments=function(ticketId){var payload={ticketId:ticketId};socket.emit("refreshTicketAttachments",payload)},socketUi.updateTicketAttachments=function(){socket.removeAllListeners("updateTicketAttachments"),socket.on("updateTicketAttachments",function(data){var ticket=data.ticket,canRemoveAttachments=data.canRemoveAttachments,$ul=$('ul.attachments[data-ticketid="'+ticket._id+'"]');if($ul.length<1)return!0;$ul.empty(),_.each(ticket.attachments,function(attachment){var html='<li><a href="'+attachment.path+'" class="no-ajaxy" target="_blank">'+attachment.name+"</a>";canRemoveAttachments&&(html+='<a href="#" class="remove-attachment" data-attachmentId="'+attachment._id+'"><i class="fa fa-remove"></i></a></li>'),$ul.append(html)}),__webpack_require__.e(3).then(function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__webpack_require__(51)];(function(st){st.init()}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)}).catch(__webpack_require__.oe)})},socketUi.refreshTicketTags=function(ticketId){var payload={ticketId:ticketId};socket.emit("refreshTicketTags",payload)},socketUi.updateTicketTags=function(){socket.removeAllListeners("updateTicketTags"),socket.on("updateTicketTags",function(data){var ticket=data.ticket,tagsDiv=$('.tag-list[data-ticketId="'+ticket._id+'"]');if(tagsDiv.length<1)return!0;tagsDiv.html("");var html="";if(_.isUndefined(ticket.tags)&&_.size(ticket.tags)<1)return!0;_.each(ticket.tags,function(item){html+='<div class="__TAG_SELECTED hide" style="display: none; opacity: 0; visibility: hidden;">'+item._id+'</div><div class="item">'+item.name+"</div>"}),tagsDiv.html(html)})},socketUi.updateUi=function(){$(document).ready(function(){var $button=$("*[data-updateUi]");$.each($button,function(){var self=$(this),$action=self.attr("data-updateUi");"online-users"===$action.toLowerCase()?(self.off("click",updateUsersBtnClicked),self.on("click",updateUsersBtnClicked)):"assigneelist"===$action.toLowerCase()?(self.off("click",updateAssigneeList),self.on("click",updateAssigneeList)):"notifications"===$action.toLowerCase()&&(self.off("click",updateNotificationsClicked),self.on("click",updateNotificationsClicked))})})},socketUi.updateUsers=function(){socket.emit("updateUsers")},socketUi.updateComments=function(){socket.removeAllListeners("updateComments"),socket.on("updateComments",function(data){var ticket=data,canViewNotes=helpers.canUser("notes:view");_.each(ticket.comments,function(i){i.isComment=!0});var combined=ticket.comments,allCount=ticket.comments.length;canViewNotes?(_.each(ticket.notes,function(i){i.isNote=!0}),combined=_.union(ticket.comments,ticket.notes),allCount=ticket.comments.length+ticket.notes.length):$('#tab-internal-notes[data-ticketid="'+ticket._id+'"]').addClass("hide"),ticket.commentsAndNotes=_.sortBy(combined,"date");var commentsNotesTab=$('.comments-notes-tab[data-ticketid="'+ticket._id+'"]');if(!(ticket.commentsAndNotes.length>0))return commentsNotesTab.addClass("hide"),!0;commentsNotesTab.removeClass("hide");var allCommentsContainer=$('.all-comments[data-ticketId="'+ticket._id+'"]'),commentContainer=$('.comments[data-ticketId="'+ticket._id+'"]'),notesContainer=$('.notes[data-ticketId="'+ticket._id+'"]');$('#tab-all-comments[data-ticketid="'+ticket._id+'"]').find("span").html(allCount),$('#tab-public-comments[data-ticketid="'+ticket._id+'"]').find("span").html(ticket.comments.length),$('#tab-internal-notes[data-ticketid="'+ticket._id+'"]').find("span").html(ticket.notes.length);var allCommentsHtml="",commentsHtml="",notesHtml="";_.each(ticket.commentsAndNotes,function(item){var image=item.owner.image;_.isUndefined(image)&&(image="defaultProfile.jpg"),item.isComment?(allCommentsHtml+='<div class="ticket-comment" data-commentid="'+item._id+'"><div class="ticket-comment-image relative uk-clearfix uk-float-left uk-display-inline-block"><img src="/uploads/users/'+image+'" alt=""/><span class="uk-border-circle user-offline" data-user-status-id="'+item.owner._id+'"></span></div><div class="issue-text"><h3>Re: '+ticket.subject+'</h3><a class="comment-email-link" href="mailto:'+item.owner.email+'">'+item.owner.fullname+" &lt;"+item.owner.email+'&gt;</a><time datetime="'+item.date+'">'+helpers.formatDate(item.date,"MMM DD, h:mma")+'</time><div class="comment-body"><p>'+item.comment+'</p></div></div><div class="edit-comment-form uk-clearfix hide" data-commentid="'+item._id+'" style="margin-bottom: 15px;"><form data-commentid="'+item._id+'" data-abide><div class="edit-comment-box"><textarea name="commentText" id="commentText" cols="2" rows="5" data-clearOnSubmit="true" class="md-input" required data-validation="length" data-validation-length="min5" data-validation-error-msg="Please enter a valid comment. Comment must contain at least 5 characters."></textarea></div><div class="right"><button class="uk-button resetForm" type="reset" style="margin-right: 5px;">Cancel</button><button class="uk-button" type="submit" data-preventDefault="false">Save</button></div></form></div><div class="comment-actions">',(helpers.canUser("comment:delete")||helpers.canUserEditSelf(item.owner._id,"comment"))&&(allCommentsHtml+='<div class="remove-comment" data-commentId="'+item._id+'"><i class="material-icons">&#xE5CD;</i></div>'),(helpers.canUser("commen:edit")||helpers.canUserEditSelf(item.owner._id,"comment"))&&(allCommentsHtml+='<div class="edit-comment" data-commentId="'+item._id+'"><i class="material-icons">&#xE254;</i></div>'),allCommentsHtml+="</div></div>"):item.isNote&&(allCommentsHtml+='<div class="ticket-note" data-noteid="'+item._id+'"><div class="ticket-comment-image relative uk-clearfix uk-float-left uk-display-inline-block"><img src="/uploads/users/'+image+'" alt=""/><span class="uk-border-circle user-offline" data-user-status-id="'+item.owner._id+'"></span></div><div class="issue-text"><h3>Re: '+ticket.subject+'</h3><a class="comment-email-link" href="mailto:'+item.owner.email+'">'+item.owner.fullname+" &lt;"+item.owner.email+'&gt;</a><time datetime="'+item.date+'">'+helpers.formatDate(item.date,"MMM DD, h:mma")+'</time><span class="uk-badge uk-badge-small nomargin-left-right">NOTE</span><div class="comment-body"><p>'+item.note+'</p></div></div><div class="edit-note-form uk-clearfix hide" data-noteid="'+item._id+'" style="margin-bottom: 15px;"><form data-noteid="'+item._id+'" data-abide><div class="edit-comment-box"><textarea name="noteText" id="noteText" cols="2" rows="5" data-clearOnSubmit="true" class="md-input" required data-validation="length" data-validation-length="min5" data-validation-error-msg="Please enter a valid note. A note must contain at least 5 characters."></textarea></div><div class="right"><button class="uk-button resetForm" type="reset" style="margin-right: 5px;">Cancel</button><button class="uk-button" type="submit" data-preventDefault="false">Save</button></div></form></div><div class="comment-actions">',(helpers.canUser("note:delete")||helpers.canUserEditSelf(item.owner._id,"note"))&&(allCommentsHtml+='<div class="remove-note" data-noteid="'+item._id+'"><i class="material-icons">&#xE5CD;</i></div>'),(helpers.canUser("note:edit")||helpers.canUserEditSelf(item.owner._id,"note"))&&(allCommentsHtml+='<div class="edit-note" data-noteid="'+item._id+'"><i class="material-icons">&#xE254;</i></div>'),allCommentsHtml+="</div></div>")}),_.each(ticket.comments,function(comment){var image=comment.owner.image;_.isUndefined(image)&&(image="defaultProfile.jpg"),commentsHtml+='<div class="ticket-comment" data-commentid="'+comment._id+'"><div class="ticket-comment-image relative uk-clearfix uk-float-left uk-display-inline-block"><img src="/uploads/users/'+image+'" alt=""/><span class="uk-border-circle user-offline" data-user-status-id="'+comment.owner._id+'"></span></div><div class="issue-text"><h3>Re: '+ticket.subject+'</h3><a class="comment-email-link" href="mailto:'+comment.owner.email+'">'+comment.owner.fullname+" &lt;"+comment.owner.email+'&gt;</a><time datetime="'+comment.date+'">'+helpers.formatDate(comment.date,"MMM DD, h:mma")+'</time><div class="comment-body"><p>'+comment.comment+'</p></div></div><div class="edit-comment-form uk-clearfix hide" data-commentid="'+comment._id+'" style="margin-bottom: 15px;"><form data-commentid="'+comment._id+'" data-abide><div class="edit-comment-box"><textarea name="commentText" id="commentText" cols="2" rows="5" data-clearOnSubmit="true" class="md-input" required data-validation="length" data-validation-length="min5" data-validation-error-msg="Please enter a valid comment. Comment must contain at least 5 characters."></textarea></div><div class="right"><button class="uk-button resetForm" type="reset" style="margin-right: 5px;">Cancel</button><button class="uk-button" type="submit" data-preventDefault="false">Save</button></div></form></div><div class="comment-actions">',(helpers.canUser("comment:delete")||helpers.canUserEditSelf(comment.owner._id,"comment"))&&(commentsHtml+='<div class="remove-comment" data-commentId="'+comment._id+'"><i class="material-icons">&#xE5CD;</i></div>'),(helpers.canUser("commen:edit")||helpers.canUserEditSelf(comment.owner._id,"comment"))&&(commentsHtml+='<div class="edit-comment" data-commentId="'+comment._id+'"><i class="material-icons">&#xE254;</i></div>'),commentsHtml+="</div></div>"}),_.each(ticket.notes,function(note){var image=note.owner.image;_.isUndefined(image)&&(image="defaultProfile.jpg"),notesHtml+='<div class="ticket-note" data-noteid="'+note._id+'"><div class="ticket-comment-image relative uk-clearfix uk-float-left uk-display-inline-block"><img src="/uploads/users/'+image+'" alt=""/><span class="uk-border-circle user-offline" data-user-status-id="'+note.owner._id+'"></span></div><div class="issue-text"><h3>Re: '+ticket.subject+'</h3><a class="comment-email-link" href="mailto:'+note.owner.email+'">'+note.owner.fullname+" &lt;"+note.owner.email+'&gt;</a><time datetime="'+note.date+'">'+helpers.formatDate(note.date,"MMM DD, h:mma")+'</time><span class="uk-badge uk-badge-small nomargin-left-right">NOTE</span><div class="comment-body"><p>'+note.note+'</p></div></div><div class="edit-note-form uk-clearfix hide" data-noteid="'+note._id+'" style="margin-bottom: 15px;"><form data-noteid="'+note._id+'" data-abide><div class="edit-comment-box"><textarea name="noteText" id="noteText" cols="2" rows="5" data-clearOnSubmit="true" class="md-input" required data-validation="length" data-validation-length="min5" data-validation-error-msg="Please enter a valid note. A note must contain at least 5 characters."></textarea></div><div class="right"><button class="uk-button resetForm" type="reset" style="margin-right: 5px;">Cancel</button><button class="uk-button" type="submit" data-preventDefault="false">Save</button></div></form></div><div class="comment-actions">',(helpers.canUser("note:delete")||helpers.canUserEditSelf(note.owner._id,"note"))&&(notesHtml+='<div class="remove-note" data-noteid="'+note._id+'"><i class="material-icons">&#xE5CD;</i></div>'),(helpers.canUser("note:edit")||helpers.canUserEditSelf(note.owner._id,"note"))&&(notesHtml+='<div class="edit-note" data-noteid="'+note._id+'"><i class="material-icons">&#xE254;</i></div>'),notesHtml+="</div></div>"}),allCommentsContainer.html(allCommentsHtml),commentContainer.html(commentsHtml),canViewNotes&&notesContainer.html(notesHtml),helpers.resizeAll(),__webpack_require__.e(3).then(function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__webpack_require__(51)];(function(st){st.init()}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)}).catch(__webpack_require__.oe)})},socketUi.clearNotifications=function(){socket.emit("clearNotifications"),helpers.hideAllpDropDowns()},socketUi.markNotificationRead=function(_id){socket.emit("markNotificationRead",_id),helpers.hideAllpDropDowns()},socketUi.updateNotifications=function(){socket.removeAllListeners("updateNotifications"),socket.on("updateNotifications",function(data){var $notifications=$("#notifications-Messages").find("ul");if(!($notifications.length<1)){var last5=_.take(data.items,5);$notifications.html(""),_.each(last5,function(item){var html="";switch(html+='<li><a class="messageNotification" href="/tickets/'+item.data.ticket.uid+'" role="button" data-notificationId="'+item._id+'" ><div class="uk-clearfix">',!0===item.unread&&(html+='<div class="messageUnread"></div>'),item.type){case 0:html+='<div class="messageIcon left"><i class="fa fa-check green"></i></div>';break;case 1:html+='<div class="messageIcon left"><i class="fa fa-comment-o green" style="margin-top: -5px"></i></div>';break;case 2:html+='<div class="messageIcon left"><i class="fa fa-exclamation red"></i></div>'}html+='<div class="messageAuthor"><strong>'+item.title+'</strong></div><div class="messageSnippet"><span>'+item.message+'</span></div><div class="messageDate"><time datetime="'+helpers.formatDate(item.created,"YYYY-MM-DDThh:mm")+'" class="timestamp">'+helpers.formatDate(item.created,"MMM DD, YYYY")+"</time></div></div></a></li>",$notifications.append(html);var $nLinks=$("#notifications-Messages").find("a[data-notificationId]");$.each($nLinks,function(k,val){var item=$(val);item.off("click"),item.on("click",function(e){e.preventDefault(),e.stopPropagation();var $id=$(e.currentTarget).attr("data-notificationId"),$href=$(e.currentTarget).attr("href");$id.length<1||(socketUi.markNotificationRead($id),History.pushState(null,null,$href))})})});var $notificationsTable=$("table.notificationsTable");if($notifications.length>0){var $tbody=$notificationsTable.find("tbody");$tbody.html(""),_.each(data.items,function(item){if(item.data||!item.data.ticket){var html="";html+='<tr class="notification-row '+(item.unread?"unread":"")+'" data-notificationid="'+item._id+'" data-ticket-uid="'+item.data.ticket.uid+'" ng-click="notificationClick($event)">',html+='<td class="type">',html+='<i class="fa fa-2x fa-check"></i>',html+="</td>",html+='<td class="title">',html+="<p>"+item.title+"</p>",html+='<div class="body">',html+=item.message,html+="</div>",html+="</td>",html+='<td class="date">',html+='<time datetime="'+helpers.formatDate(item.created,"YYYY-MM-DDThh:mm")+'">'+helpers.formatDate(item.created,"MMM DD, YYYY")+"</time>",html+="</td>",html+="</tr>",$tbody.append(html);var $nRows=$tbody.find(".notification-row");$.each($nRows,function(k,val){var $item=$(val);$item.off("click"),$item.on("click",function(e){e.preventDefault(),e.stopPropagation();var $id=$(e.currentTarget).attr("data-notificationId"),$uid=$(e.currentTarget).attr("data-ticket-uid");socketUi.markNotificationRead($id),helpers.closeNotificationsWindow(),History.pushState(null,null,"/tickets/"+$uid)})})}})}var $notificationsCount=$("#btn_notifications").find("span"),$bottomActions=$("#notifications").find(".bottom-actions");$notificationsCount.length>0&&(0===data.count?($notificationsCount.html("0"),$notificationsCount.addClass("hide"),$bottomActions.addClass("hide")):($notificationsCount.removeClass("hide"),$notificationsCount.html(data.count),$bottomActions.removeClass("hide")))}})},socketUi.onTicketCreated=function(){socket.removeAllListeners("ticket:created"),socket.on("ticket:created",function(){socket.emit("updateNotifications");var audio=$("audio#newticketaudio");audio.length>0&&audio.trigger("play"),$("a#refreshTicketGrid").trigger("click")})},socketUi.onTicketDelete=function(){socket.removeAllListeners("ticket:delete"),socket.on("ticket:delete",function(){$("input#refreshSwitch:checked").length>0&&$("a#refreshTicketGrid").trigger("click")})},socketUi.onUpdateTicketGrid=function(){socket.removeAllListeners("ticket:updategrid"),socket.on("ticket:updategrid",function(){$("input#refreshSwitch:checked").length>0&&$("a#refreshTicketGrid").trigger("click")})},socketUi.onProfileImageUpdate=function(){socket.removeAllListeners("trudesk:profileImageUpdate"),socket.on("trudesk:profileImageUpdate",function(data){var profileImage=$('#profileImage[data-userid="'+data.userid+'"]');profileImage.length>0&&profileImage.attr("src","/uploads/users/"+data.img+"?r="+(new Date).getTime())})},socketUi}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){(function(jQuery){!function(r){r.fn.qrcode=function(h){function u(a){this.mode=s,this.data=a}function o(a,c){this.typeNumber=a,this.errorCorrectLevel=c,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function q(a,c){if(void 0==a.length)throw Error(a.length+"/"+c);for(var d=0;d<a.length&&0==a[d];)d++;this.num=Array(a.length-d+c);for(var b=0;b<a.length-d;b++)this.num[b]=a[b+d]}function p(a,c){this.totalCount=a,this.dataCount=c}function t(){this.buffer=[],this.length=0}var s;u.prototype={getLength:function(){return this.data.length},write:function(a){for(var c=0;c<this.data.length;c++)a.put(this.data.charCodeAt(c),8)}},o.prototype={addData:function(a){this.dataList.push(new u(a)),this.dataCache=null},isDark:function(a,c){if(0>a||this.moduleCount<=a||0>c||this.moduleCount<=c)throw Error(a+","+c);return this.modules[a][c]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var c=p.getRSBlocks(a,this.errorCorrectLevel),d=new t,b=0,e=0;e<c.length;e++)b+=c[e].dataCount;for(e=0;e<this.dataList.length;e++)c=this.dataList[e],d.put(c.mode,4),d.put(c.getLength(),j.getLengthInBits(c.mode,a)),c.write(d);if(d.getLengthInBits()<=8*b)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[d][b]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),7<=this.typeNumber&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,c){for(var d=-1;7>=d;d++)if(!(-1>=a+d||this.moduleCount<=a+d))for(var b=-1;7>=b;b++)-1>=c+b||this.moduleCount<=c+b||(this.modules[a+d][c+b]=0<=d&&6>=d&&(0==b||6==b)||0<=b&&6>=b&&(0==d||6==d)||2<=d&&4>=d&&2<=b&&4>=b)},getBestMaskPattern:function(){for(var a=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var b=j.getLostPoint(this);(0==d||a>b)&&(a=b,c=d)}return c},createMovieClip:function(a,c,d){for(a=a.createEmptyMovieClip(c,d),this.make(),c=0;c<this.modules.length;c++)for(var d=1*c,b=0;b<this.modules[c].length;b++){var e=1*b;this.modules[c][b]&&(a.beginFill(0,100),a.moveTo(e,d),a.lineTo(e+1,d),a.lineTo(e+1,d+1),a.lineTo(e,d+1),a.endFill())}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=j.getPatternPosition(this.typeNumber),c=0;c<a.length;c++)for(var d=0;d<a.length;d++){var b=a[c],e=a[d];if(null==this.modules[b][e])for(var f=-2;2>=f;f++)for(var i=-2;2>=i;i++)this.modules[b+f][e+i]=-2==f||2==f||-2==i||2==i||0==f&&0==i}},setupTypeNumber:function(a){for(var c=j.getBCHTypeNumber(this.typeNumber),d=0;18>d;d++){var b=!a&&1==(c>>d&1);this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=b}for(d=0;18>d;d++)b=!a&&1==(c>>d&1),this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=b},setupTypeInfo:function(a,c){for(var d=j.getBCHTypeInfo(this.errorCorrectLevel<<3|c),b=0;15>b;b++){var e=!a&&1==(d>>b&1);6>b?this.modules[b][8]=e:8>b?this.modules[b+1][8]=e:this.modules[this.moduleCount-15+b][8]=e}for(b=0;15>b;b++)e=!a&&1==(d>>b&1),8>b?this.modules[8][this.moduleCount-b-1]=e:9>b?this.modules[8][15-b-1+1]=e:this.modules[8][15-b-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,c){for(var d=-1,b=this.moduleCount-1,e=7,f=0,i=this.moduleCount-1;0<i;i-=2)for(6==i&&i--;;){for(var g=0;2>g;g++)if(null==this.modules[b][i-g]){var n=!1;f<a.length&&(n=1==(a[f]>>>e&1)),j.getMask(c,b,i-g)&&(n=!n),this.modules[b][i-g]=n,e--,-1==e&&(f++,e=7)}if(0>(b+=d)||this.moduleCount<=b){b-=d,d=-d;break}}}},o.PAD0=236,o.PAD1=17,o.createData=function(a,c,d){for(var c=p.getRSBlocks(a,c),b=new t,e=0;e<d.length;e++){var f=d[e];b.put(f.mode,4),b.put(f.getLength(),j.getLengthInBits(f.mode,a)),f.write(b)}for(e=a=0;e<c.length;e++)a+=c[e].dataCount;if(b.getLengthInBits()>8*a)throw Error("code length overflow. ("+b.getLengthInBits()+">"+8*a+")");for(b.getLengthInBits()+4<=8*a&&b.put(0,4);0!=b.getLengthInBits()%8;)b.putBit(!1);for(;!(b.getLengthInBits()>=8*a)&&(b.put(o.PAD0,8),!(b.getLengthInBits()>=8*a));)b.put(o.PAD1,8);return o.createBytes(b,c)},o.createBytes=function(a,c){for(var d=0,b=0,e=0,f=Array(c.length),i=Array(c.length),g=0;g<c.length;g++){var n=c[g].dataCount,h=c[g].totalCount-n,b=Math.max(b,n),e=Math.max(e,h);f[g]=Array(n);for(var k=0;k<f[g].length;k++)f[g][k]=255&a.buffer[k+d];for(d+=n,k=j.getErrorCorrectPolynomial(h),n=new q(f[g],k.getLength()-1).mod(k),i[g]=Array(k.getLength()-1),k=0;k<i[g].length;k++)h=k+n.getLength()-i[g].length,i[g][k]=0<=h?n.get(h):0}for(k=g=0;k<c.length;k++)g+=c[k].totalCount;for(d=Array(g),k=n=0;k<b;k++)for(g=0;g<c.length;g++)k<f[g].length&&(d[n++]=f[g][k]);for(k=0;k<e;k++)for(g=0;g<c.length;g++)k<i[g].length&&(d[n++]=i[g][k]);return d},s=4;for(var j={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var c=a<<10;0<=j.getBCHDigit(c)-j.getBCHDigit(j.G15);)c^=j.G15<<j.getBCHDigit(c)-j.getBCHDigit(j.G15);return(a<<10|c)^j.G15_MASK},getBCHTypeNumber:function(a){for(var c=a<<12;0<=j.getBCHDigit(c)-j.getBCHDigit(j.G18);)c^=j.G18<<j.getBCHDigit(c)-j.getBCHDigit(j.G18);return a<<12|c},getBCHDigit:function(a){for(var c=0;0!=a;)c++,a>>>=1;return c},getPatternPosition:function(a){return j.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,c,d){switch(a){case 0:return 0==(c+d)%2;case 1:return 0==c%2;case 2:return 0==d%3;case 3:return 0==(c+d)%3;case 4:return 0==(Math.floor(c/2)+Math.floor(d/3))%2;case 5:return 0==c*d%2+c*d%3;case 6:return 0==(c*d%2+c*d%3)%2;case 7:return 0==(c*d%3+(c+d)%2)%2;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var c=new q([1],0),d=0;d<a;d++)c=c.multiply(new q([1,l.gexp(d)],0));return c},getLengthInBits:function(a,c){if(1<=c&&10>c)switch(a){case 1:return 10;case 2:return 9;case s:case 8:return 8;default:throw Error("mode:"+a)}else if(27>c)switch(a){case 1:return 12;case 2:return 11;case s:return 16;case 8:return 10;default:throw Error("mode:"+a)}else{if(!(41>c))throw Error("type:"+c);switch(a){case 1:return 14;case 2:return 13;case s:return 16;case 8:return 12;default:throw Error("mode:"+a)}}},getLostPoint:function(a){for(var c=a.getModuleCount(),d=0,b=0;b<c;b++)for(var e=0;e<c;e++){for(var f=0,i=a.isDark(b,e),g=-1;1>=g;g++)if(!(0>b+g||c<=b+g))for(var h=-1;1>=h;h++)0>e+h||c<=e+h||0==g&&0==h||i==a.isDark(b+g,e+h)&&f++;5<f&&(d+=3+f-5)}for(b=0;b<c-1;b++)for(e=0;e<c-1;e++)f=0,a.isDark(b,e)&&f++,a.isDark(b+1,e)&&f++,a.isDark(b,e+1)&&f++,a.isDark(b+1,e+1)&&f++,(0==f||4==f)&&(d+=3);for(b=0;b<c;b++)for(e=0;e<c-6;e++)a.isDark(b,e)&&!a.isDark(b,e+1)&&a.isDark(b,e+2)&&a.isDark(b,e+3)&&a.isDark(b,e+4)&&!a.isDark(b,e+5)&&a.isDark(b,e+6)&&(d+=40);for(e=0;e<c;e++)for(b=0;b<c-6;b++)a.isDark(b,e)&&!a.isDark(b+1,e)&&a.isDark(b+2,e)&&a.isDark(b+3,e)&&a.isDark(b+4,e)&&!a.isDark(b+5,e)&&a.isDark(b+6,e)&&(d+=40);for(e=f=0;e<c;e++)for(b=0;b<c;b++)a.isDark(b,e)&&f++;return a=Math.abs(100*f/c/c-50)/5,d+10*a}},l={glog:function(a){if(1>a)throw Error("glog("+a+")");return l.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return l.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},m=0;8>m;m++)l.EXP_TABLE[m]=1<<m;for(m=8;256>m;m++)l.EXP_TABLE[m]=l.EXP_TABLE[m-4]^l.EXP_TABLE[m-5]^l.EXP_TABLE[m-6]^l.EXP_TABLE[m-8];for(m=0;255>m;m++)l.LOG_TABLE[l.EXP_TABLE[m]]=m;return q.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var c=Array(this.getLength()+a.getLength()-1),d=0;d<this.getLength();d++)for(var b=0;b<a.getLength();b++)c[d+b]^=l.gexp(l.glog(this.get(d))+l.glog(a.get(b)));return new q(c,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var c=l.glog(this.get(0))-l.glog(a.get(0)),d=Array(this.getLength()),b=0;b<this.getLength();b++)d[b]=this.get(b);for(b=0;b<a.getLength();b++)d[b]^=l.gexp(l.glog(a.get(b))+c);return new q(d,0).mod(a)}},p.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],p.getRSBlocks=function(a,c){var d=p.getRsBlockTable(a,c);if(void 0==d)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var b=d.length/3,e=[],f=0;f<b;f++)for(var h=d[3*f+0],g=d[3*f+1],j=d[3*f+2],l=0;l<h;l++)e.push(new p(g,j));return e},p.getRsBlockTable=function(a,c){switch(c){case 1:return p.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return p.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return p.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return p.RS_BLOCK_TABLE[4*(a-1)+3]}},t.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,c){for(var d=0;d<c;d++)this.putBit(1==(a>>>c-d-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0),a&&(this.buffer[c]|=128>>>this.length%8),this.length++}},"string"==typeof h&&(h={text:h}),h=r.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},h),this.each(function(){var a;if("canvas"==h.render){a=new o(h.typeNumber,h.correctLevel),a.addData(h.text),a.make();var c=document.createElement("canvas");c.width=h.width,c.height=h.height;for(var d=c.getContext("2d"),b=h.width/a.getModuleCount(),e=h.height/a.getModuleCount(),f=0;f<a.getModuleCount();f++)for(var i=0;i<a.getModuleCount();i++){d.fillStyle=a.isDark(f,i)?h.foreground:h.background;var g=Math.ceil((i+1)*b)-Math.floor(i*b),j=Math.ceil((f+1)*b)-Math.floor(f*b);d.fillRect(Math.round(i*b),Math.round(f*e),g,j)}}else for(a=new o(h.typeNumber,h.correctLevel),a.addData(h.text),a.make(),c=r("<table></table>").css("width",h.width+"px").css("height",h.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",h.background),d=h.width/a.getModuleCount(),b=h.height/a.getModuleCount(),e=0;e<a.getModuleCount();e++)for(f=r("<tr></tr>").css("height",b+"px").appendTo(c),i=0;i<a.getModuleCount();i++)r("<td></td>").css("width",d+"px").css("background-color",a.isDark(e,i)?h.foreground:h.background).appendTo(f);a=c,jQuery(a).appendTo(this)})}}(jQuery)}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2),__webpack_require__(0),__webpack_require__(8),__webpack_require__(7),__webpack_require__(5),__webpack_require__(39),__webpack_require__(60),__webpack_require__(3),__webpack_require__(16),__webpack_require__(17),__webpack_require__(15),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,angular,helpers,UIkit,socket){"use strict";function buildUserHTML(user,addRemove){if(!addRemove){if($('[data-card-username="'+user.username+'"]').length>0)return""}var html='<div data-uk-filter="'+user.role+","+user.fullname+'">';return html+=addRemove?'<div class="tru-card tru-card-hover" data-card-username="'+user.username+'" data-search-result>':'<div class="tru-card tru-card-hover" data-card-username="'+user.username+'">',"admin"===user.role?html+='<div class="tru-card-head tru-card-head-admin">':html+='<div class="tru-card-head '+(user.deleted?"tru-card-head-deleted":"")+'">',html+="<div class=\"tru-card-head-menu\" data-uk-dropdown=\"{pos: 'bottom-right', mode: 'click'}\">",html+='<i class="material-icons tru-icon">&#xE5D4;</i>',html+='<div class="uk-dropdown uk-dropdown-small">',html+='<ul class="uk-nav">',html+='<li><a href="#" data-username="'+user.username+'" ng-click="editAccount($event)" class="no-ajaxy">Edit</a></li>',html+='<li><a href="#" data-username="'+user.username+'" ng-click="deleteAccount($event)" class="no-ajaxy delete-account-action '+(user.deleted?"hide":"")+'">Delete</a></li>',html+='<li><a href="#" data-username="'+user.username+'" ng-click="enableAccount($event)" class="no-ajaxy enable-account-action '+(user.deleted?"":"hide")+'">Enable</a></li>',html+="</ul>",html+="</div>",html+="</div>",html+='<div class="uk-text-center">',html+='<div class="account-image relative uk-display-inline-block">',user.image?html+='<img src="/uploads/users/'+user.image+"?"+(Math.floor(9e4*Math.random())+1e4)+'" alt="Profile Pic" class="tru-card-head-avatar" />':html+='<img src="/uploads/users/defaultProfile.jpg" alt="Profile Pic" class="tru-card-head-avatar" />',html+='<span class="user-status-large user-offline uk-border-circle" data-user-status-id="'+user._id+'"></span>',html+="</div>",html+="</div>",html+='<h3 class="tru-card-head-text uk-text-center">',html+=user.fullname,html+='<span class="uk-text-truncate">'+(_.isUndefined(user.title)?"":user.title.capitalizeFirstLetter())+"</span>",html+="</h3>",html+="</div>",html+='<div class="tru-card-content">',html+='<ul class="tru-list">',html+="<li>",html+='<div class="tru-list-content">',html+='<span class="tru-list-heading">Role</span>',html+='<span class="uk-text-small uk-text-muted">'+user.role.capitalizeFirstLetter()+"</span>",html+="</div>",html+="</li>",html+="<li>",html+='<div class="tru-list-content">',html+='<span class="tru-list-heading">Email</span>',html+='<span class="uk-text-small uk-text-muted uk-text-truncate"><a href="mailto:'+user.email+'">'+user.email+"</a></span>",html+="</div>",html+="</li>",html+="<li>",html+='<div class="tru-list-content">',html+='<span class="tru-list-heading">Groups</span>',html+='<span class="uk-text-small uk-text-muted uk-text-truncate">',_.each(user.groups,function(g){html+=g,_.size(user.groups)>1&&_.last(user.groups)!==g&&(html+=", ")}),html+="</span>",html+="</div>",html+="</li>",html+="</ul>",html+="</div>",html+="</div>",html+="</div>"}var accountsPage={};return String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},accountsPage.init=function(callback,reset){$(document).ready(function(){function getAccounts(){return!(!$enabled||$loading)&&(!$filterAll.hasClass("uk-active")||($loading=!0,$spinner.removeClass("uk-hidden"),void $.ajax({url:"/api/v1/users?limit=20&page="+$nextPage}).done(function(data){$spinner.addClass("uk-hidden");var users=data.users;if(_.size(users)<1)return $enabled=!1,$loading=!1,!1;var html="";_.each(users,function(u){var h=null;reset?($account_list.html(""),h=buildUserHTML(u,!0),reset=!1):h=buildUserHTML(u,!1),h.length>0&&(html+=h)}),angular.injector(["ng","trudesk"]).invoke(["$compile","$rootScope",function($compile,$rootScope){var $scope=$account_list.append(html).scope();$compile($account_list)($scope||$rootScope),$rootScope.$digest()}]),UIkit.$html.trigger("changed.uk.dom"),helpers.resizeAll(),$(".s-ajaxify").on("click",function(e){e.preventDefault();var href=$(e.target).attr("href");History.pushState(null,null,href)}),$nextPage+=1,$loading=!1,socket.ui.updateUsers()}).fail(function(err){console.log("[trudesk:accountsPage:setupGrid] - Error: "+err.error),$loading=!1})))}var $account_list=$("#account_list"),$scroller=$account_list.parents(".scrollable"),$scrollspy=$("#scrollspy"),$spinner=$scrollspy.find("i"),$filterAll=$(".filter-all"),$nextPage=1,$enabled=!0,$loading=!1;if(reset&&($nextPage=0,getAccounts()),UIkit.grid($account_list,{controls:"#account_list_filter",gutter:20}),$scroller.scroll(function(){if($scrollspy.isInView($scroller)){_.throttle(getAccounts,500)()}}),$("#account_list_filter li a").on("click",function(){$("#account_list_search").val(""),$(".tru-card[data-search-result]").remove(),setTimeout(function(){helpers.resizeAll()},280)}),$("#account_list_search").keyup(function(e){e.preventDefault();var key=event.keyCode||event.which,sValue=$(this).val().toLowerCase();if(13===key){if(sValue.length<3)return $("#account_list_filter li.uk-active a").trigger("click"),!0;$.ajax({url:"/api/v1/users?search="+sValue,success:function(data){$account_list.children().css("display","none");var users=data.users,html="";_.each(users,function(u){html+=buildUserHTML(u,!0)}),angular.injector(["ng","trudesk"]).invoke(["$compile","$rootScope",function($compile,$rootScope){var $scope=$account_list.append(html).scope();$compile($account_list)($scope||$rootScope),$rootScope.$digest()}]),$(".s-ajaxify").on("click",function(e){e.preventDefault();var href=$(e.target).attr("href");History.pushState(null,null,href)}),UIkit.$html.trigger("changed.uk.dom"),helpers.resizeAll(),socket.ui.updateUsers()},error:function(error){console.log("[trudesk:accountsPage:setupGrid] - Error: "+error.error)}})}return!1}),"function"==typeof callback)return callback()})},accountsPage}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){(function($){!function(root,factory){"use strict";module.exports=factory(__webpack_require__(0),__webpack_require__(75))}(0,function(jQuery){"use strict";!function($){function hasScrollbar($elem,axis){var $body,elemProps,bodyProps,innerWidth,innerHeight,scrollWidth,scrollHeight,query={target:{}},result={},context={},elem=$elem[0];if($elem=$elem.eq(0),axis||(axis="both"),query.getBoth="both"===axis,query.getHorizontal="horizontal"===axis||query.getBoth,query.getVertical="vertical"===axis||query.getBoth,"horizontal"!==axis&&"vertical"!==axis&&"both"!==axis)throw new Error("Invalid parameter value: axis = "+axis);if($elem.length)return query.target.isWindow=$.isWindow(elem),query.target.isWindow?context.document=elem.document:9===elem.nodeType?(context.document=elem,query.target.isWindow=!0):elem===elem.ownerDocument.documentElement?(context.document=elem.ownerDocument,query.target.isWindow=!0):1===elem.nodeType&&"iframe"===elem.tagName.toLowerCase()?(context.document=elem.contentDocument||elem.contentWindow.document,query.target.isWindow=!0):elem===elem.ownerDocument.body&&(context.document=elem.ownerDocument,query.target.isBody=!0),(query.target.isWindow||query.target.isBody)&&(context.window=context.document.defaultView||context.document.parentWindow,context.$document=$(context.document),context.documentElement=context.document.documentElement,context.body=context.document.body,elem=$elem=void 0),query.target.isWindow?result=_windowHasScrollbar(query,context):query.target.isBody?(bodyProps=_getViewportOverflows(query,context).body,$body=$(context.body),query.getHorizontal&&(result.horizontal=bodyProps.overflowScrollX||bodyProps.overflowAutoX&&context.body.clientHeight<$body.height()),query.getVertical&&(result.vertical=bodyProps.overflowScrollY||bodyProps.overflowAutoY&&context.body.clientWidth<$body.width())):(elemProps=getCss(elem,["overflow","overflowX","overflowY"],{toLowerCase:!0}),elemProps=getAppliedOverflows(elemProps,!0),scrollWidth=elem.scrollWidth,scrollHeight=elem.scrollHeight,result.horizontal=scrollWidth>0&&(elemProps.overflowScrollX||elemProps.overflowAutoX&&(innerWidth=$elem.innerWidth())<scrollWidth),result.vertical=scrollHeight>0&&(elemProps.overflowScrollY||elemProps.overflowAutoY&&(innerHeight=$elem.innerHeight())<scrollHeight),result.vertical=result.vertical||result.horizontal&&elemProps.overflowAutoY&&(void 0!==innerHeight?innerHeight:$elem.innerHeight())-$.scrollbarWidth()<scrollHeight,result.horizontal=result.horizontal||result.vertical&&elemProps.overflowAutoX&&(void 0!==innerWidth?innerWidth:$elem.innerWidth())-$.scrollbarWidth()<scrollWidth),query.getBoth?result:query.getHorizontal?result.horizontal:result.vertical}function effectiveScrollbarWith($elem,axis){var queryHorizontal,queryVertical,queryBoth,elemHasScrollbar,horizontal,vertical,globalWidth=$.scrollbarWidth();if(axis||(axis="both"),queryBoth="both"===axis,queryHorizontal="horizontal"===axis||queryBoth,queryVertical="vertical"===axis||queryBoth,"horizontal"!==axis&&"vertical"!==axis&&"both"!==axis)throw new Error("Invalid parameter value: axis = "+axis);if($elem.length)return 0===globalWidth?queryBoth?{horizontal:0,vertical:0}:0:(elemHasScrollbar=queryBoth?hasScrollbar($elem):queryHorizontal?{horizontal:hasScrollbar($elem,"horizontal")}:{vertical:hasScrollbar($elem,"vertical")},queryHorizontal&&(horizontal=elemHasScrollbar.horizontal?globalWidth:0),queryVertical&&(vertical=elemHasScrollbar.vertical?globalWidth:0),queryBoth?{horizontal:horizontal,vertical:vertical}:queryHorizontal?horizontal:vertical)}function ownerWindow($elem){var elem=$elem[0],ownerDocument=elem&&(9===elem.nodeType?elem:elem.ownerDocument);return ownerDocument&&(ownerDocument.defaultView||ownerDocument.parentWindow)||$.isWindow(elem)&&elem||void 0}function inView($elems,container,opts){var config,elemsInView=[];return $elems.length?(config=_prepareConfig($elems,container,opts),checkHierarchy($elems[0],config.container),$elems.each(function(){_isInView(this,config)&&elemsInView.push(this)}),$(elemsInView)):$()}function isInView($elem,container,opts){var config,elem=$elem[0];return!!$elem.length&&(config=_prepareConfig($elem,container,opts),checkHierarchy(elem,config.container),_isInView(elem,config))}function _prepareConfig($elem,container,opts){var $container,direction,config={};return opts||(opts={}),container||(container=ownerWindow($elem)),config.$container=$container=wrapContainer(container),config.container=container=$container[0],checkOptions(opts),direction=opts.direction||"both",config.useVertical="both"===direction||"vertical"===direction,config.useHorizontal="both"===direction||"horizontal"===direction,config.partially=opts.partially,config.excludeHidden=opts.excludeHidden,config.borderBox="content-box"!==opts.box,config.containerIsWindow=$.isWindow(container),void 0!==opts.tolerance?(config.toleranceType=isNumber(opts.tolerance)||"px"===opts.tolerance.slice(-3)?"add":"multiply",config.tolerance="add"===config.toleranceType?parseFloat(opts.tolerance):parseFloat(opts.tolerance)/100+1):(config.tolerance=0,config.toleranceType="add"),config.cache={},config}function _isInView(elem,config){var containerWidth,containerHeight,hTolerance,vTolerance,rect,container=config.container,$container=config.$container,cache=config.cache,elemInView=!0;if(elem===container)throw new Error("Invalid container: is the same as the element");return(!config.excludeHidden||elem.offsetWidth>0&&elem.offsetHeight>0)&&(config.useHorizontal&&(containerWidth=getNetContainerWidth($container,config.containerIsWindow,cache)),config.useVertical&&(containerHeight=getNetContainerHeight($container,config.containerIsWindow,cache)),hTolerance=void 0!==cache.hTolerance?cache.hTolerance:cache.hTolerance="add"===config.toleranceType?config.tolerance:containerWidth*config.tolerance,vTolerance=void 0!==cache.vTolerance?cache.vTolerance:cache.vTolerance="add"===config.toleranceType?config.tolerance:containerHeight*config.tolerance,rect=config.borderBox?elem.getBoundingClientRect():getContentRect(elem),config.containerIsWindow||(rect=getRelativeRect(rect,$container,cache)),config.partially?(config.useVertical&&(elemInView=rect.top<containerHeight+vTolerance&&rect.bottom>-vTolerance),config.useHorizontal&&(elemInView=elemInView&&rect.left<containerWidth+hTolerance&&rect.right>-hTolerance)):(config.useVertical&&(elemInView=rect.top>=-vTolerance&&rect.top<containerHeight+vTolerance&&rect.bottom>-vTolerance&&rect.bottom<=containerHeight+vTolerance),config.useHorizontal&&(elemInView=elemInView&&rect.left>=-hTolerance&&rect.left<containerWidth+hTolerance&&rect.right>-hTolerance&&rect.right<=containerWidth+hTolerance)),elemInView)}function getRelativeRect(rect,$container,cache){var containerPaddingRectRoot;return cache&&cache.containerPaddingRectRoot?containerPaddingRectRoot=cache.containerPaddingRectRoot:(containerPaddingRectRoot=getPaddingRectRoot($container[0]),cache&&(cache.containerPaddingRectRoot=containerPaddingRectRoot)),{top:rect.top-containerPaddingRectRoot.top,bottom:rect.bottom-containerPaddingRectRoot.top,left:rect.left-containerPaddingRectRoot.left,right:rect.right-containerPaddingRectRoot.left}}function getContentRect(elem){var rect=elem.getBoundingClientRect(),props=getCss(elem,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft"],{toFloat:!0});return{top:rect.top+props.paddingTop+props.borderTopWidth,right:rect.right-(props.paddingRight+props.borderRightWidth),bottom:rect.bottom-(props.paddingBottom+props.borderBottomWidth),left:rect.left+props.paddingLeft+props.borderLeftWidth}}function getPaddingRectRoot(elem){var rect=elem.getBoundingClientRect(),props=getCss(elem,["borderTopWidth","borderLeftWidth"],{toFloat:!0});return{top:rect.top+props.borderTopWidth,left:rect.left+props.borderLeftWidth}}function _windowHasScrollbar(query,context){var windowInnerHeight,windowInnerWidth,windowProps,scrollbarWidth=$.scrollbarWidth(),result={},doneX=!query.getHorizontal,doneY=!query.getVertical;return query.getHorizontal&&scrollbarWidth>0&&(windowInnerHeight=context.window.innerHeight)>10&&(result.horizontal=windowInnerHeight>context.documentElement.clientHeight,doneX=!0),query.getVertical&&scrollbarWidth>0&&(windowInnerWidth=context.window.innerWidth)>10&&(result.vertical=windowInnerWidth>context.documentElement.clientWidth,doneY=!0),doneX&&doneY||(windowProps=_getViewportOverflows(query,context).window,!doneX&&windowProps.overflowScrollX&&(result.horizontal=doneX=!0),!doneY&&windowProps.overflowScrollY&&(result.vertical=doneY=!0),!doneX&&windowProps.overflowHiddenX&&(result.horizontal=!1,doneX=!0),!doneY&&windowProps.overflowHiddenY&&(result.vertical=!1,doneY=!0),doneX||(result.horizontal=context.documentElement.clientWidth<$.documentWidth(context.document)),doneY||(result.vertical=context.documentElement.clientHeight<$.documentHeight(context.document))),result}function _getViewportOverflows(query,context){var windowProps,bodyProps,overflowPropNames=["overflow"],bodyOverflowPropNames=["overflow"];return query.getHorizontal&&(overflowPropNames.push("overflowX"),bodyOverflowPropNames.push("overflowX")),query.getVertical&&(overflowPropNames.push("overflowY"),bodyOverflowPropNames.push("overflowY")),windowProps=getCss(context.documentElement,overflowPropNames,{toLowerCase:!0}),bodyProps=getCss(context.body,bodyOverflowPropNames,{toLowerCase:!0}),getAppliedViewportOverflows(windowProps,bodyProps)}function getAppliedOverflows(props,createBooleans){var status={};return status.overflowX=props.overflowX||props.overflow||"visible",status.overflowY=props.overflowY||props.overflow||"visible",createBooleans&&$.each(["Visible","Auto","Scroll","Hidden"],function(index,type){var lcType=type.toLowerCase();status["overflow"+type+"X"]=status.overflowX===lcType,status["overflow"+type+"Y"]=status.overflowY===lcType}),status}function getAppliedViewportOverflows(documentElementProps,bodyProps){var _window=getAppliedOverflows(documentElementProps,!1),body=getAppliedOverflows(bodyProps,!1),consolidated={window:{},body:{}};return"visible"===_window.overflowX?(consolidated.body.overflowX="visible",consolidated.window.overflowX=body.overflowX):(consolidated.body.overflowX=body.overflowX,consolidated.window.overflowX=_window.overflowX),"visible"===_window.overflowY?(consolidated.body.overflowY="visible",consolidated.window.overflowY=body.overflowY):(consolidated.body.overflowY=body.overflowY,consolidated.window.overflowY=_window.overflowY),"visible"===consolidated.window.overflowX&&(consolidated.window.overflowX="auto"),"visible"===consolidated.window.overflowY&&(consolidated.window.overflowY="auto"),isIOS()&&("hidden"===consolidated.window.overflowX&&(consolidated.window.overflowX="auto"),"hidden"===consolidated.window.overflowY&&(consolidated.window.overflowY="auto")),consolidated.window=getAppliedOverflows(consolidated.window,!0),consolidated.body=getAppliedOverflows(consolidated.body,!0),consolidated}function wrapContainer(container){var $container,isJquery=container instanceof $;if(!(isJquery||$.isWindow(container)||container.nodeType||isString(container)))throw new Error("Invalid container: not a window, node, jQuery object or selector string");if($container=isJquery?container:container===root?$root:$(container),!$container.length)throw new Error("Invalid container: empty jQuery object");if(container=$container[0],9===container.nodeType?$container=wrapContainer(container.defaultView||container.parentWindow):1===container.nodeType&&"iframe"===container.tagName.toLowerCase()&&($container=wrapContainer(container.contentWindow)),!$.isWindow($container[0])&&"visible"===$container.css("overflow"))throw new Error("Invalid container: is set to overflow:visible. Containers must have the ability to obscure some of their content, otherwise the in-view test is pointless. Containers must be set to overflow:scroll/auto/hide, or be a window (or document, or iframe, as proxies for a window)");return $container}function checkHierarchy(elem,container){if(1!==elem.nodeType)throw new Error("Invalid node: is not an element");if(!($.isWindow(container)?elem.ownerDocument&&container===(elem.ownerDocument.defaultView||elem.ownerDocument.parentWindow):9===container.nodeType?$.contains(container.documentElement,elem):$.contains(container,elem)))throw new Error("Invalid container: is not an ancestor of the element")}function checkOptions(opts){var isNum,isNumWithUnit;if(opts.direction&&"vertical"!==opts.direction&&"horizontal"!==opts.direction&&"both"!==opts.direction)throw new Error('Invalid option value: direction = "'+opts.direction+'"');if(opts.box&&"border-box"!==opts.box&&"content-box"!==opts.box)throw new Error('Invalid option value: box = "'+opts.box+'"');if(void 0!==opts.tolerance&&(isNum=isNumber(opts.tolerance),isNumWithUnit=isString(opts.tolerance)&&/^[+-]?\d*\.?\d+(px|%)?$/.test(opts.tolerance),!isNum&&!isNumWithUnit))throw new Error('Invalid option value: tolerance = "'+opts.tolerance+'"')}function getNetContainerWidth($container,isWindow,cache){var width;return cache&&void 0!==cache.netContainerWidth?width=cache.netContainerWidth:(width=isWindow?getWindowDimension($container,"Width"):$container.innerWidth()-getContainerScrollbarWidths($container,cache).vertical,cache&&(cache.netContainerWidth=width)),width}function getNetContainerHeight($container,isWindow,cache){var height;return cache&&void 0!==cache.netContainerHeight?height=cache.netContainerHeight:(height=isWindow?getWindowDimension($container,"Height"):$container.innerHeight()-getContainerScrollbarWidths($container,cache).horizontal,cache&&(cache.netContainerHeight=height)),height}function getContainerScrollbarWidths($container,cache){var containerScrollbarWidths;return cache&&cache.containerScrollbarWidths?containerScrollbarWidths=cache.containerScrollbarWidths:(containerScrollbarWidths=effectiveScrollbarWith($container),cache&&(cache.containerScrollbarWidths=containerScrollbarWidths)),containerScrollbarWidths}function getWindowDimension($window,dimension){var doc=$window[0].document,property="client"+dimension;return"BackCompat"===doc.compatMode?doc.body[property]:doc.documentElement[property]}function getCss(elem,properties,opts){var i,length,name,props={},_window=elem.ownerDocument.defaultView||elem.ownerDocument.parentWindow,computedStyles=_useGetComputedStyle?_window.getComputedStyle(elem,null):elem.currentStyle;for(opts||(opts={}),$.isArray(properties)||(properties=[properties]),length=properties.length,i=0;i<length;i++)name=properties[i],props[name]=$.css(elem,name,!1,computedStyles),opts.toLowerCase&&props[name]&&props[name].toLowerCase&&(props[name]=props[name].toLowerCase()),opts.toFloat&&(props[name]=parseFloat(props[name]));return props}function isIOS(){return void 0===_isIOS&&(_isIOS=/iPad|iPhone|iPod/g.test(navigator.userAgent)),_isIOS}function isNumber(value){return("number"==typeof value||value&&"object"==typeof value&&"[object Number]"===Object.prototype.toString.call(value)||!1)&&value===+value}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&"[object String]"===Object.prototype.toString.call(value)||!1}var _isIOS,_useGetComputedStyle=!!window.getComputedStyle,root=window,$root=$(window);$.fn.hasScrollbar=function(axis){return hasScrollbar(this,axis)},$.fn.scrollbarWidth=function(axis){return effectiveScrollbarWith(this,axis)},$.fn.ownerWindow=function(){return ownerWindow(this)},$.fn.inView=function(container,opts){return inView(this,container,opts)},$.fn.inViewport=function(opts){return inView(this,ownerWindow(this),opts)},$.fn.isInView=function(container,opts){return isInView(this,container,opts)},$.fn.isInViewport=function(opts){return isInView(this,ownerWindow(this),opts)},$.expr.match.inviewport=/^(?:inVieport)$/i,$.expr.setFilters.inviewport=$.expr.createPseudo(function(){return $.expr.createPseudo(function(elems,matches){var i,config,length=elems.length;if(length)for(config=_prepareConfig($(elems)),checkHierarchy(elems[0],config.container),i=0;i<length;i++)matches[i]=_isInView(elems[i],config)?elems[i]:void 0})})}(void 0!==jQuery?jQuery:$)})}).call(exports,__webpack_require__(0))},,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(8),__webpack_require__(2),__webpack_require__(70),__webpack_require__(73),__webpack_require__(74),__webpack_require__(76),__webpack_require__(63),__webpack_require__(77),__webpack_require__(78),__webpack_require__(79),__webpack_require__(80),__webpack_require__(81),__webpack_require__(82)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,angular,_){return angular.module("trudesk.controllers",["trudesk.controllers.common","trudesk.controllers.profile","trudesk.controllers.accounts","trudesk.controllers.groups","trudesk.controllers.tickets","trudesk.controllers.singleTicket","trudesk.controllers.messages","trudesk.controllers.notices","trudesk.controllers.plugins","trudesk.controllers.reports","trudesk.controllers.settings"]).controller("truCtrl",function($rootScope,$scope){$scope.submitForm=function(formName,$event){if(_.isNull(formName)||_.isUndefined(formName))return!0;$event.preventDefault();var form=$("#"+formName);_.isUndefined(form)||form.submit()}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(39),__webpack_require__(5),__webpack_require__(49),__webpack_require__(21)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,socket,UIkit){return angular.module("trudesk.controllers.tickets",[]).controller("ticketsCtrl",function($scope,$http,$window,$log,openFilterTicketWindow){function clearChecked(){$("#ticketTable").find('input[type="checkbox"]:checked').each(function(){$(this).prop("checked",!1)})}function getChecked(){var checkedIds=[];return $("#ticketTable").find('input[type="checkbox"]:checked').each(function(){var vm=this,self=$(vm),$ticketTR=self.parents("tr");if(!_.isUndefined($ticketTR)){var ticketOid=$ticketTR.attr("data-ticketOid");!_.isUndefined(ticketOid)&&ticketOid.length>0&&checkedIds.push(ticketOid)}}),checkedIds}function removeCheckedFromGrid(){$("#ticketTable").find('input[type="checkbox"]:checked').each(function(){var vm=this,self=$(vm),$ticketTR=self.parents("tr");_.isUndefined($ticketTR)||$ticketTR.remove()})}$scope.openFilterTicketWindow=function(){openFilterTicketWindow.openWindow()},$scope.submitTicketForm=function(event){event.preventDefault();var socketId=socket.ui.socket.io.engine.id,data={},form=$("#createTicketForm");if(!form.isValid(null,null,!1))return!0;form.serializeArray().map(function(x){data[x.name]=x.value}),data.tags=form.find("#tags").val(),data.socketId=socketId,$http({method:"POST",url:"/api/v1/tickets/create",data:data,headers:{"Content-Type":"application/json"}}).success(function(data){if(!data.success){if(data.error)return void helpers.UI.showSnackbar({text:"Error: "+data.error,actionTextColor:"#B92929"});helpers.UI.showSnackbar({text:"Error submitting ticket.",actionTextColor:"#B92929"})}helpers.UI.showSnackbar({text:"Ticket Created Successfully"}),UIkit.modal("#ticketCreateModal").hide()}).error(function(err){$log.error("[trudesk:tickets:submitTicketForm] - "+err.error.message),helpers.UI.showSnackbar({text:"Error: "+err.error.message,actionTextColor:"#B92929"})})},$scope.searchBarSubmit=function(event){if(!_.isUndefined(event.keyCode)&&13===event.keyCode){var searchBoxText=$("#tickets_Search").val();if(searchBoxText.length<3)return!0;var queryString="?uid={0}&fs={0}&it={0}".formatUnicorn(searchBoxText);History.pushState(null,null,"/tickets/filter/"+queryString+"&r="+Math.floor(99999*Math.random())+1)}},$scope.showTags=function(event){event.preventDefault();var tagModal=$("#addTagModal");tagModal.length>0&&(tagModal.find("#tags").trigger("chosen:updated"),UIkit.modal(tagModal).show())},$scope.submitAddTag=function(event){event.preventDefault();var form=$("form#addTagForm");if(form.length>0){var tag=form.find("#tag").val();$http({method:"POST",url:"/api/v1/tickets/addtag",data:{tag:tag},headers:{"Content-Type":"application/json"}}).success(function(data){var tagModal=$("#addTagModal"),tagFormField=$("#tags");tagFormField.append('<option id="TAG__"'+data.tag._id+'" value="'+data.tag._id+'" selected>'+data.tag.name+"</option>"),tagFormField.trigger("chosen:updated"),tagModal.length>0&&UIkit.modal(tagModal).hide()}).error(function(err){$log.error("[trudesk:tickets:addTag} - Error: "+err.error),helpers.UI.showSnackbar({text:"Error: "+err.error,actionTextColor:"#B92929"})})}},$scope.deleteTickets=function(){var $ids=getChecked();_.each($ids,function(id){$http.delete("/api/v1/tickets/"+id).success(function(){clearChecked(),removeCheckedFromGrid(),helpers.UI.showSnackbar({text:"Ticket Deleted Successfully"})}).error(function(e){$log.error("[trudesk:tickets:deleteTickets] - "+e),helpers.UI.showSnackbar({text:"Error: "+e.error.message,actionTextColor:"#B92929"})})}),helpers.hideAllpDropDowns()},$scope.setOpenTickets=function(){var $ids=getChecked();_.each($ids,function(id){$http.put("/api/v1/tickets/"+id,{status:1}).success(function(){helpers.UI.showSnackbar({text:"Ticket status set to open"})}).error(function(e){$log.error("[trudesk:tickets:openTickets] - Error: ",e),helpers.UI.showSnackbar("An Error occurred. Please check console.",!0)})})},$scope.setPendingTickets=function(){var $ids=getChecked();_.each($ids,function(id){$http.put("/api/v1/tickets/"+id,{status:2}).success(function(){helpers.UI.showSnackbar("Ticket status set to pending",!1)}).error(function(e){$log.error("[trudes:tickets:setPendingTickets] - Error ",e),helpers.UI.showSnackbar("An Error occurred. Please check console.",!0)})})},$scope.setClosedTickets=function(){var $ids=getChecked();_.each($ids,function(id){$http.put("/api/v1/tickets/"+id,{status:3}).success(function(){helpers.UI.showSnackbar("Ticket status set to closed",!1)}).error(function(e){$log.error("[trudesk:tickets:closeTickets] - Error",e),helpers.UI.showSnackbar("An Error occurred. Please check console.",!0)})})},$scope.GridRefreshChanged=function(){$http.put("/api/v1/users/"+$scope.username+"/updatepreferences",{preference:"autoRefreshTicketGrid",value:$scope.preferences_autoRefreshTicketGrid}).success(function(){}).error(function(e){$log.error("[trudesk:tickets:GridRefreshChanged] - "+e),helpers.UI.showSnackbar({text:"Error: "+e.message,actionTextColor:"#B92929"})})},$scope.RefreshTicketGrid=function(event){var path=$window.location.pathname;History.pushState(null,null,path+"?r="+Math.random()),event.preventDefault()},$scope.submitFilter=function(){var data={},$ticketFilterForm=$("#ticketFilterForm");$ticketFilterForm.serializeArray().map(function(x){data[x.name]=x.value});var querystring="?f=1";_.isEmpty(data.filterSubject)||(querystring+="&fs="+data.filterSubject),_.isEmpty(data.filterDate_Start)||(querystring+="&ds="+data.filterDate_Start),_.isEmpty(data.filterDate_End)||(querystring+="&de="+data.filterDate_End);var filterStatus=$ticketFilterForm.find("select#filterStatus").val();_.each(filterStatus,function(item){querystring+="&st="+item});var filterPriority=$ticketFilterForm.find("select#filterPriority").val();_.each(filterPriority,function(item){querystring+="&pr="+item});var filterGroup=$ticketFilterForm.find("select#filterGroup").val();_.each(filterGroup,function(item){querystring+="&gp="+item});var filterType=$ticketFilterForm.find("select#filterType").val();_.each(filterType,function(item){querystring+="&tt="+item});var filterTags=$ticketFilterForm.find("select#filterTags").val();_.each(filterTags,function(item){querystring+="&tag="+item});var filterAssignee=$ticketFilterForm.find("select#filterAssignee").val();_.each(filterAssignee,function(item){querystring+="&au="+item}),openFilterTicketWindow.closeWindow(),History.pushState(null,null,"/tickets/filter/"+querystring+"&r="+Math.floor(99999*Math.random())+1)},$scope.clearFilterForm=function(e){$(":input","#ticketFilterForm").not(":button, :submit, :reset, :hidden").val(""),$("#ticketFilterForm").find("option:selected").removeAttr("selected").trigger("chosen:updated"),e.preventDefault()}}).factory("openFilterTicketWindow",function(){return{openWindow:function(){UIkit.modal("#ticketFilterModal").show()},closeWindow:function(){UIkit.modal("#ticketFilterModal").hide()}}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(2),__webpack_require__(9),__webpack_require__(7),__webpack_require__(5),__webpack_require__(65),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,_,moment,helpers,UIKit){function stopTyping(cid,to){isTyping[cid]=!1,typingTimeout[cid]=void 0;var loggedInAccountId=loggedInAccount._id;socket.emit("chatStopTyping",{cid:cid,to:to,from:loggedInAccountId})}function bindChatWindowActions(convoId){var $chatBox=$('.chat-box[data-conversation-id="'+convoId+'"]');if($chatBox.length<1)return!1;var $textarea=$chatBox.find("textarea.textAreaAutogrow"),$chatBoxText=$chatBox.find(".chat-box-text"),$chatCloseButton=$chatBox.find(".chatCloseBtn"),$chatTitleBar=$chatBox.find(".chat-box-title");$textarea.off("keyup"),$textarea.off("keydown"),$textarea.on("keydown",function(e){if(13!==e.keyCode){var self=$(this),cid=self.parent().parent().attr("data-conversation-id"),user=self.parent().parent().attr("data-chat-userid");if(void 0===cid||void 0===user)return console.log("Invalid Conversation ID or User ID"),!1;chatClient.startTyping(cid,user,function(){})}}),$textarea.autogrow({postGrowCallback:chatBoxTextAreaGrowCallback,enterPressed:function(self,v){var messages=self.parent().siblings(".chat-box-messages"),cid=self.parent().parent().attr("data-conversation-id"),userId=self.parents(".chat-box").attr("data-chat-userid");helpers.scrollToBottom(messages),v.length<1||chatClient.sendChatMessage(cid,userId,v,function(){clearTimeout(typingTimeout[cid]),stopTyping(cid,userId)})}}),$chatBoxText.off("click"),$chatBoxText.click(function(e){if($(this).children("textarea").is(":focus"))return e.stopPropagation(),!1;$(this).children("textarea").focus();var val=$(this).children("textarea").val();$(this).children("textarea").val("").val(val)}),$chatCloseButton.off("click"),$chatCloseButton.click(function(e){e.preventDefault(),$(this).parents(".chat-box[data-chat-userid]").parent().remove();var $loggedInAccountId=loggedInAccount._id,cid=$chatCloseButton.parents(".chat-box[data-conversation-id]").attr("data-conversation-id");socket.emit("saveChatWindow",{userId:$loggedInAccountId,convoId:cid,remove:!0})}),$chatTitleBar.off("click"),$chatTitleBar.click(function(){var p=$(this).parents(".chat-box-position");"-280px"===p.css("top")?p.animate({top:-29},250):p.animate({top:-280},250)})}function startConversation(owner,receiver,callback){if(owner===receiver)return callback("Invalid Participants");$.ajax({url:"/api/v1/messages/conversation/start",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({owner:owner,participants:[owner,receiver]}),success:function(data){$.ajax({url:"/api/v1/messages/conversation/"+data.conversation._id,type:"GET",success:function(d){var userMeta=data.conversation.userMeta[_.findIndex(data.conversation.userMeta,function(item){return item.userId.toString()===owner.toString()})];return userMeta&&userMeta.deletedAt&&(d.messages=_.filter(d.messages,function(message){return moment(message.createdAt)>moment(userMeta.deletedAt)})),data.conversation.messages=d.messages,callback(null,data.conversation)},error:function(err){return callback(err)}})},error:function(err){return callback(err)}})}function loadChatMessages(chatBox,messageArray){var chatMessage,chatMessageList,scroller,to=chatBox.attr("data-chat-userid");messageArray=messageArray.reverse(),_.each(messageArray,function(m){m.owner._id===to?(chatMessage=createChatMessageFromUser(m.owner,m.body),chatMessageList=chatBox.find(".chat-message-list:first"),chatMessageList.append(chatMessage),scroller=chatBox.find(".chat-box-messages"),helpers.scrollToBottom(scroller)):(chatMessage=createChatMessageDiv(m.body),chatMessageList=chatBox.find(".chat-message-list:first"),scroller=chatBox.find(".chat-box-messages"),chatMessageList.append(chatMessage),helpers.scrollToBottom(scroller))}),$("body").ajaxify()}function UpdateOnlineBubbles(usersOnline){$("span[data-user-status-id]").each(function(){$(this).removeClass("user-online user-idle").addClass("user-offline")});var onlineUserList=usersOnline.sortedUserList,idleUserList=usersOnline.sortedIdleList;_.each(onlineUserList,function(v){$('span[data-user-status-id="'+v.user._id+'"]').each(function(){$(this).removeClass("user-offline user-idle").addClass("user-online")})}),_.each(idleUserList,function(v){$('span[data-user-status-id="'+v.user._id+'"]').each(function(){$(this).removeClass("user-offline user-online").addClass("user-idle")})})}function createChatMessageDiv(message){var html='<div class="chat-message chat-message-user uk-clearfix" data-chat-messageId="">';return html+='<div class="chat-text-wrapper">',html+='<div class="chat-text chat-text-user">',html+='<div class="chat-text-inner"><span>'+message.replace(/\n\r?/g,"<br>")+"</span>",html+="</div></div></div></div>"}function createChatMessageFromUser(user,message){var imageUrl=user.image;_.isUndefined(imageUrl)&&(imageUrl="defaultProfile.jpg");var html='<div class="chat-message uk-clearfix">';return html+='<div class="chat-user-profile"><a href="#"><img src="/uploads/users/'+imageUrl+'" alt="'+user.fullname+'"/></a></div>',html+='<div class="chat-text-wrapper">',html+='<div class="chat-text">',html+='<div class="chat-text-inner">',html+="<span>"+message.replace(/\n\r?/g,"<br>")+"</span>",html+="</div>",html+="</div>",html+="</div>",html+="</div>"}function chatBoxTextAreaGrowCallback(self,oldHeight,newHeight){if(oldHeight===newHeight)return!0;var messages=self.parent().siblings(".chat-box-messages");messages.css({"min-height":"170px","max-height":"220px"}),self.parent().css({"max-height":"77px","min-height":"16px"}),newHeight<80&&messages.height(messages.height()-(newHeight-oldHeight)),messages.scrollTop(messages[0].scrollHeight)}var socket,loggedInAccount,chatClient={};chatClient.init=function(sock){loggedInAccount=window.trudeskSessionService.getUser(),socket=sock,socket.removeAllListeners("connect"),socket.on("connect",function(){}),socket.removeAllListeners("connectingToSocketServer"),socket.on("connectingToSocketServer",function(){}),socket.removeAllListeners("updateUsers"),socket.on("updateUsers",function(data){var html="",onlineList=$(".online-list-wrapper").find("ul.online-list"),username=loggedInAccount.username,isUserRole="user"===loggedInAccount.role,filteredData=_.filter(data,function(item){return item.user.username!==username}),activeNow=$(".active-now");_.size(filteredData)<1?activeNow.hide():activeNow.show(),onlineList.html("");var activeCount=0;_.each(filteredData,function(v){var onlineUser=v.user;if(onlineUser.username===username)return!0;if(isUserRole&&"user"===onlineUser.role)return!0;var imageUrl=onlineUser.image;_.isUndefined(imageUrl)&&(imageUrl="defaultProfile.jpg"),html+="<li>",html+='<a class="no-ajaxy" data-action="startChat" data-chatUser="'+onlineUser._id+'" href="#" role="button">',html+='<div class="online-list-user">',html+='<div class="image"><img src="/uploads/users/'+imageUrl+'"></div>',html+='<span class="online-status" data-user-status-id="'+onlineUser._id+'"></span>',html+='<div class="online-name">'+onlineUser.fullname+"</div>",html+="</div>",html+="</a>",html+="</li>";var allUserList=$("ul.user-list"),userStatus=allUserList.find('li[data-user-id="'+onlineUser._id+'"]').find(".online-status-offline");userStatus.removeClass("online-status-offline").addClass("online-status"),userStatus.text(""),activeCount++}),onlineList.append(html);var onlineUserCount=$(".online-user-count");if(onlineUserCount.length>0){_.size(filteredData)<1?onlineUserCount.addClass("hide"):(onlineUserCount.text(activeCount),onlineUserCount.removeClass("hide"))}chatClient.bindActions(),socket.emit("$trudesk:chat:updateOnlineBubbles")}),socket.removeAllListeners("$trudesk:chat:updateOnlineBubbles"),socket.on("$trudesk:chat:updateOnlineBubbles",function(data){_.throttle(function(){UpdateOnlineBubbles(data)},1e3,{trailing:!1})()}),socket.removeAllListeners("spawnChatWindow"),socket.on("spawnChatWindow",function(data){$("#message-content[data-conversation-id]").length>0?startConversation(loggedInAccount._id,data._id,function(err,convo){if(err)return console.log("[trudesk:chat:openChatWindow] - Error"),console.error(err),helpers.UI.showSnackbar("Unable to start chat",!0);var splitPath=window.location.pathname.split("/");if(splitPath.length>1){if("messages"===splitPath[0].toString().toLowerCase())return!0}else History.pushState(null,null,"/messages/"+convo._id,!0)}):chatClient.openChatWindow(data)}),socket.removeAllListeners("chatMessage"),socket.on("chatMessage",function(data){var type=data.type,to=data.to,from=data.from,chatBox="",chatMessage="",chatMessageList="",scroller="",selector="";"s"===type?(chatBox=$('.chat-box[data-chat-userid="'+to+'"]'),chatMessage=createChatMessageDiv(data.message),chatMessageList=chatBox.find(".chat-message-list:first"),scroller=chatBox.find(".chat-box-messages"),chatMessageList.append(chatMessage),helpers.scrollToBottom(scroller)):"r"===type&&(selector='.chat-box[data-chat-userid="'+from+'"]',chatBox=$(selector),chatBox.length<1?chatClient.openChatWindow(data.fromUser,function(){chatBox=$(selector),scroller=chatBox.find(".chat-box-messages"),helpers.scrollToBottom(scroller)}):(chatMessage=createChatMessageFromUser(data.fromUser,data.message),chatMessageList=chatBox.find(".chat-message-list:first"),chatMessageList.append(chatMessage),scroller=chatBox.find(".chat-box-messages"),helpers.scrollToBottom(scroller))),$.event.trigger("$trudesk:chat:message",data),$("body").ajaxify()}),socket.removeAllListeners("chatTyping"),socket.on("chatTyping",function(data){$.event.trigger("$trudesk:chat:typing",data);var chatBox=$('div[data-conversation-id="'+data.cid+'"]');chatBox.find(".user-is-typing-wrapper").removeClass("hide");var scroller=chatBox.find(".chat-box-messages");scroller.length>0&&scroller.scrollTop()+window.innerHeight>=scroller[0].scrollHeight&&helpers.scrollToBottom(scroller),scroller=$("#message-content"),scroller.length>0&&scroller.scrollTop()+window.innerHeight>=scroller[0].scrollHeight&&helpers.scrollToBottom(scroller)}),socket.removeAllListeners("chatStopTyping"),socket.on("chatStopTyping",function(data){$.event.trigger("$trudesk:chat:stoptyping",data)}),socket.removeAllListeners("leftChatServer"),socket.on("leftChatServer",function(data){$.event.trigger("$trudesk:chat:leftchatserver",data)}),$(window).on("$trudesk:chat:stoptyping.chatSystem",function(event,data){var chatBox=[],scroller=void 0;chatBox[0]=$('#message-content[data-conversation-id="'+data.cid+'"]'),chatBox[1]=$('.chat-box[data-conversation-id="'+data.cid+'"]');for(var i=0;i<chatBox.length;i++)chatBox[i].find(".user-is-typing-wrapper").addClass("hide"),scroller=chatBox[i].find(".chat-box-messages"),scroller.length>0&&scroller.scrollTop()===scroller[0].scrollHeight&&helpers.scrollToBottom(scroller);scroller=$("#message-content"),scroller.length>0&&scroller.scrollTop()===scroller[0].scrollHeight&&helpers.scrollToBottom(scroller)})};var typingTimeout={},isTyping={};return chatClient.stopTyping=function(cid,to,complete){if(stopTyping(cid,to),_.isFunction(complete))return complete()},chatClient.startTyping=function(cid,userid,complete){return isTyping[cid]?(clearTimeout(typingTimeout[cid]),void(typingTimeout[cid]=setTimeout(stopTyping,5e3,cid,userid))):(socket.emit("chatTyping",{cid:cid,to:userid,from:loggedInAccount._id}),isTyping[cid]=!0,void 0===typingTimeout[cid]&&(typingTimeout[cid]=setTimeout(stopTyping,5e3,cid,userid)),_.isFunction(complete)?complete():void 0)},chatClient.bindActions=function(){$(document).ready(function(){$('*[data-action="startChat"]').each(function(){var self=$(this);self.off("click"),self.click(function(e){var userId=self.attr("data-chatUser");socket.emit("spawnChatWindow",userId),UIKit.offcanvas.hide(),e.preventDefault()})})})},chatClient.sendChatMessage=function(cid,toUserId,message,complete){var loggedInAccountId=loggedInAccount._id;$.ajax({url:"/api/v1/messages/send",type:"POST",contentType:"application/json",data:JSON.stringify({cId:cid,owner:loggedInAccountId,body:message}),success:function(data){if(socket.emit("chatMessage",{conversation:cid,to:toUserId,from:loggedInAccountId,type:"s",messageId:data.message._id,message:data.message.body}),void 0!==complete&&_.isFunction(complete))return complete()},error:function(error){if(console.log("[trudesk:chat:bindActions] Error"),console.log(error),helpers.UI.showSnackbar(error,!0),void 0!==complete&&_.isFunction(complete))return complete(error)}})},chatClient.getOpenWindows=function(){socket.emit("getOpenChatWindows")},chatClient.openChatWindow=function(user,complete){if("messages"===$("#__page").text().toLowerCase())return!_.isFunction(complete)||complete();var loggedInAccountId=loggedInAccount._id;if(_.isUndefined(loggedInAccountId))return helpers.UI.showSnackbar("Unable to start chat",!0);startConversation(loggedInAccountId,user._id,function(err,convo){err&&(console.log("[trudesk:chat:openChatWindow] - Error"),console.log(err));var username=loggedInAccount.username;if(user.username===username)return!0;var cWindow=$(".chat-box-position").find('.chat-box[data-chat-userid="'+user._id+'"]');if(cWindow.length>0)return cWindow.find("textarea").focus(),helpers.scrollToBottom(cWindow.find(".chat-box-messages")),!0;var imageUrl=user.image;_.isUndefined(imageUrl)&&(imageUrl="defaultProfile.jpg");var userMeta=convo.userMeta[_.findIndex(convo.userMeta,function(item){return item.userId.toString()===loggedInAccountId.toString()})],html='<div class="chat-box-position">';return html+='<div class="chat-box" data-conversation-id="'+convo._id+'" data-chat-userid="'+user._id+'">',html+='<div class="chat-box-title">',html+='<div class="chat-box-title-buttons right">',html+='<a class="chatCloseBtn"><i class="material-icons material-icons-small">close</i></a>',html+="</div>",html+='<h4 class="chat-box-title-text-wrapper">',html+='<a href="#">'+user.fullname+"</a>",html+="</h4>",html+="</div>",html+='<div class="chat-box-messages scrollable">',userMeta&&userMeta.deletedAt&&(html+='<div class="chat-box-deletedAt">Conversation deleted at '+moment(userMeta.deletedAt).format("MM.D.YY \\at h:mma")+"</div>"),html+='<div class="chat-message-list" data-chat-userid="'+user._id+'">',html+="</div>",html+='<div class="user-is-typing-wrapper hide">',html+='<div class="chat-user-profile"><a href="#"><img src="/uploads/users/'+imageUrl+'" alt="'+user.fullname+'"/></a></div>',html+='<div class="user-is-typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>',html+="</div>",html+="</div>",html+='<div class="chat-box-text">',html+='<textarea class="textAreaAutogrow autogrow-short" name="message" rows="1"></textarea>',html+="</div>",html+="</div>",html+="</div>",$(".chat-box-wrapper").append(html),$('.chat-box[data-chat-userid="'+user._id+'"] textarea').focus(),loadChatMessages($(".chat-box-position").find('.chat-box[data-chat-userid="'+user._id+'"]'),convo.messages),helpers.hideAllpDropDowns(),helpers.setupScrollers('.chat-box[data-chat-userid="'+user._id+'"] > div.scrollable'),bindChatWindowActions(convo._id),helpers.scrollToBottom($('.chat-box[data-chat-userid="'+user._id+'"]').find(".chat-box-messages")),socket.emit("saveChatWindow",{userId:loggedInAccountId,convoId:convo._id,remove:!1}),_.isFunction(complete)?complete():void 0})},chatClient.setUserIdle=function(){socket.emit("$trudesk:setUserIdle")},chatClient.setUserActive=function(){socket.emit("$trudesk:setUserActive")},chatClient.updateOnlineBubbles=function(){socket.emit("$trudesk:chat:updateOnlineBubbles")},chatClient}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){(function(jQuery){!function($){$.fn.autogrow=function(options){return this.filter("textarea").each(function(){var self=this,$self=$(self),noFlickerPad=$self.hasClass("autogrow-short")?0:parseInt($self.css("lineHeight"))||0,settings=$.extend({preGrowCallback:null,postGrowCallback:null,enterPressed:null,shiftEnterPressed:null},options),shadow=$("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:$self.width(),fontSize:$self.css("fontSize"),fontFamily:$self.css("fontFamily"),fontWeight:$self.css("fontWeight"),lineHeight:$self.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),update=function(event){var times=function(string,number){for(var i=0,r="";i<number;i++)r+=string;return r},val=self.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(space){return times("&nbsp;",space.length-1)+" "});if(event&&event.data&&"keydown"===event.data.event&&13===event.keyCode&&event.shiftKey)val+="<br />",null!=settings.shiftEnterPressed&&settings.shiftEnterPressed($self);else if(event&&event.data&&"keydown"===event.data.event&&13===event.keyCode){var value=val;return $self.val(""),val="",$self.height(Math.max(shadow.height()+noFlickerPad,16)),null!=settings.enterPressed&&settings.enterPressed($self,value),!1}shadow.css("width",$self.width()),shadow.html(val+(0===noFlickerPad?"...":""));var oldHeight=$self.height(),newHeight=Math.max(shadow.height()+noFlickerPad,16);null!=settings.preGrowCallback&&(newHeight=settings.preGrowCallback($self,shadow,newHeight,16)),$self.height(newHeight),null!=settings.postGrowCallback&&settings.postGrowCallback($self,oldHeight,newHeight)};$self.change(update).keyup(update).keydown({event:"keydown"},update),$(window).resize(update),update()})}}(jQuery)}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(2),__webpack_require__(9),__webpack_require__(7),__webpack_require__(5),__webpack_require__(40),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,_,moment,helpers,UIkit){function showNoticeAlertWindow(notice){var noticeAlertWindow=$("#noticeAlertWindow");if(noticeAlertWindow.length<1)return!0;var noticeTitle=noticeAlertWindow.find("#noticeTitle"),noticeText=noticeAlertWindow.find("#noticeText"),noticeBG=noticeAlertWindow.find("#noticeBG");noticeAlertWindow.find("#__noticeCookieName").html(notice.name+"_"+moment(notice.activeDate).format("MMMDDYYYY_HHmmss")),noticeBG.css("background-color",notice.color),noticeTitle.css("color",notice.fontColor),noticeTitle.html(notice.name),noticeText.html(notice.message),UIkit.modal(noticeAlertWindow,{bgclose:!1}).show()}function hideNoticeAlertWindow(){var noticeAlertWindow=$("#noticeAlertWindow");if(noticeAlertWindow.length<1)return!0;UIkit.modal(noticeAlertWindow).hide()}var noticeUI={};return noticeUI.setShowNotice=function(socket,notice){socket.emit("setShowNotice",notice)},noticeUI.updateShowNotice=function(socket){socket.removeAllListeners("updateShowNotice"),socket.on("updateShowNotice",function(notice){var $noticeDiv=$("div#notice-banner"),$dateFormated=moment(notice.activeDate).format("MM/DD/YYYY HH:mm"),$message=" - Important: "+notice.message,$bgColor=notice.color,$fontColor=notice.fontColor;$noticeDiv.css("background",$bgColor),$noticeDiv.css("color",$fontColor),$noticeDiv.html($dateFormated+$message),$noticeDiv.removeClass("uk-hidden"),$(".sidebar").css("top","105px"),helpers.resizeAll(),notice.alertWindow&&showNoticeAlertWindow(notice)})},noticeUI.setClearNotice=function(socket){socket.emit("setClearNotice")},noticeUI.updateClearNotice=function(socket){socket.removeAllListeners("updateClearNotice"),socket.on("updateClearNotice",function(){$("div#notice-banner").addClass("uk-hidden"),$(".sidebar").css("top","75px"),helpers.resizeAll(),hideNoticeAlertWindow()})},noticeUI}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(2),__webpack_require__(9),__webpack_require__(7),__webpack_require__(40),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($){var ticketsUI={};return ticketsUI.updateSubscribe=function(socket){socket.removeAllListeners("ticket:subscriber:update"),socket.on("ticket:subscriber:update",function(data){var $subscribeSwitch=$('input#subscribeSwitch[data-subscribe-userId="'+data.user+'"]');$subscribeSwitch.length>0&&(data.subscribe?$subscribeSwitch.prop("checked",!0):$subscribeSwitch.prop("checked",!1))})},ticketsUI}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(2),__webpack_require__(9),__webpack_require__(7),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,_,moment,helpers){var logsIO={};return function(){[].forEach.call(document.querySelectorAll("pre"),function($pre){for(var matches,lines=$($pre).html().split("\n"),i=0;i<lines.length;i++)(null!=(matches=/^\s+/.exec(lines[i]))?matches[0]:null)&&lines[i].replace(/^\s+/,"");return $($pre).html(lines.join("\n").trim())})}(),logsIO.getLogData=function(socket){socket.removeAllListeners("logs:data"),socket.on("logs:data",function(data){var $sLogs=$("#serverlogs");$sLogs.length>0&&($sLogs.append(data),$sLogs.append("\n<br />"),$sLogs.scrollTop(9.99999999999989e28),helpers.scrollToBottom($sLogs))})},logsIO}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(7),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,helpers){function onStatusChange(type,item,percent){var $statusBox=$("#"+type+"-import-status-box > ul");if(item)if(1===item.state)$statusBox.append('<li><div data-import-username="'+item.username+'" style="display:flex;">Importing '+item.username+"<span>...</span></div></li>");else if(2===item.state){var span=$statusBox.find('div[data-import-username="'+item.username+'"] > span');span.length>0&&(span.css({display:"inline-flex",marginLeft:"5px"}),span.html('<i class="md-color-green material-icons" style="font-size:18px;line-height:18px;vertical-align:middle;">check</i>'))}else if(3===item.state){var span1=$statusBox.find('div[data-import-username="'+item.username+'"] > span');span1.length>0&&(span1.css({display:"inline-flex",marginLeft:"5px"}),span1.html('<i class="md-color-red material-icons" style="font-size:18px;line-height:18px;vertical-align:middle;">close</i>'))}scrollStatusBox(),$(".js-"+type+"-progress").find(".uk-progress-bar").css({width:percent+"%"})}function finishImport(type,completedCount){var $statusBox=$("#"+type+"-import-status-box");1===completedCount?$statusBox.find("ul").append("<li>Imported "+completedCount+" account</li>"):$statusBox.find("ul").append("<li>Imported "+completedCount+" accounts</li>"),scrollStatusBox(),$("#wizard_"+type).find(".button_finish").removeClass("disabled")}function scrollStatusBox(){var e=$("#ldap-import-status-box");e.length>0&&(e=e[0],e.scrollTop=e.scrollHeight-e.getBoundingClientRect().height)}var socket,loggedInAccount,accountsImporter={};return accountsImporter.init=function(sock){socket=sock,loggedInAccount=window.trudeskSessionService.getUser(),socket.removeAllListeners("$trudesk:accounts:import:error"),socket.on("$trudesk:accounts:import:error",function(data){var error=data.error;console.error(error),helpers.showSnackbar(error,!0)}),socket.removeAllListeners("$trudesk:accounts:import:onStatusChange"),socket.on("$trudesk:accounts:import:onStatusChange",function(data){var type=data.type,item=data.item,totalCount=data.totalCount,completedCount=data.completedCount;onStatusChange(type,item,Math.floor(completedCount/totalCount*100)),completedCount>=totalCount&&finishImport(type,completedCount)})},accountsImporter.sendAccountData=function(type,addedUsers,updatedUsers){null!==socket&&void 0!==socket&&socket.emit("$trudesk:accounts:import:"+type,{addedUsers:addedUsers,updatedUsers:updatedUsers})},accountsImporter}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(39),__webpack_require__(5),__webpack_require__(71),__webpack_require__(7),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,socket,UI,tour,helpers){return angular.module("trudesk.controllers.common",["trudesk.controllers.messages"]).controller("commonCtrl",function($scope,$window,$http,$cookies,$timeout,$log){$scope.setDefaultCreateTicketValues=function(){$timeout(function(){UI.$html.on("show.uk.modal",function(event){var modal=$(event.target);if(modal.length>0){var $group=modal.find("select#group");if(angular.isDefined($group[0])){var $group_selectize=$group[0].selectize,options=$group_selectize.options,first=_.chain(options).map(function(v,k){if(angular.isDefined(v.$order)&&1===v.$order)return k}).first().value();first&&$group_selectize.addItem(first,!0),$group_selectize.refreshItems()}var $type=modal.find("select#type");if(angular.isDefined($type[0])){var $type_selectize=$type[0].selectize;options=$type_selectize.options,first=_.chain(options).map(function(v,k){if(angular.isDefined(v.$order)&&1===v.$order)return k}).first().value(),first&&$type_selectize.addItem(first,!0),$type_selectize.refreshItems()}}})},0,!1)},$scope.loadNoticeAlertWindow=function(){$timeout(function(){if(UI.$html.on("hide.uk.modal",function(event){var modal=$(event.target);if(modal.length>0){var form=modal.find("form")[0];_.isUndefined(form)||form.reset(),modal.find("option").prop("selected",!1);modal.find("form").find("select").each(function(){var self=$(this),$selectize=self[0].selectize;_.isUndefined($selectize)||$selectize.clear()});modal.find("*.md-input-filled").each(function(){$(this).removeClass("md-input-filled")})}}),$scope.noticeAlertWindow=$("#noticeAlertWindow"),$scope.noticeAlertWindow.length>0){var cookieName=$("#__noticeCookieName").text();if(angular.isUndefined(cookieName)||_.isEmpty(cookieName))return!0;if("true"===$cookies.get(cookieName)||angular.isUndefined($cookies.get(cookieName))){UI.modal($scope.noticeAlertWindow,{bgclose:!1}).show()}}},0,!1)},$scope.confirmNoticeClick=function(){if(!($scope.noticeAlertWindow.length<1)){var cookieName=$("#__noticeCookieName").text(),expiresDate=new Date;expiresDate.setDate(expiresDate.getDate()+1),$cookies.put(cookieName,"false",{expires:expiresDate}),UI.modal($scope.noticeAlertWindow).hide()}},$scope.clearNotifications=function($event){$event.preventDefault(),$event.stopPropagation(),socket.ui.clearNotifications()},$scope.loadTour=function(){$timeout(function(){"true"===$("#__tourEnabled").text()&&("/dashboard"!==$window.location.pathname?$window.location.href="/dashboard":tour.init())},0,!1)},$scope.markRead=function($event){var $id=$($event.currentTarget).attr("data-notificationid");$id.length<1||socket.ui.markNotificationRead($id)},$scope.closeNoticeAlert=function($event){$event.preventDefault(),UI.modal("#noticeAlertWindow").hide()},$scope.showPrivacyPolicyModal=function($event){if($event.preventDefault(),$scope.privacyPolicyWindow=$("#privacyPolicyWindow"),$scope.privacyPolicyWindow.length>0){UI.modal($scope.privacyPolicyWindow,{bgclose:!0}).show()}},$scope.showAllNotifications=function($event){if($event.preventDefault(),$scope.showAllNotificationsWindow=$("#viewAllNotificationsModal"),$scope.showAllNotificationsWindow.length>0){var modal=UI.modal($scope.showAllNotificationsWindow,{bgclose:!0});helpers.hideAllpDropDowns(),modal.show()}}}).directive("closeUkDropdown",function($document,$timeout){return{restrict:"A",link:function(scope,element){function mouseup(){var this_dropdown=element.parents(".uk-dropdown");this_dropdown.removeClass("uk-dropdown-shown"),$timeout(function(){this_dropdown.removeClass("uk-dropdown-active"),this_dropdown.parents("*[data-uk-dropdown]").removeClass("uk-open").attr("aria-expanded",!1)},280)}element.off("mouseup",mouseup),element.on("mouseup",mouseup)}}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(72),__webpack_require__(5),__webpack_require__(19)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function($,Shepherd,UIKit){function advanceTourDelayed(){setTimeout(function(){tour.next()},300)}var tour={};return tour=new Shepherd.Tour({defaults:{classes:"shepherd-theme-square shepherd-theme-arrows"}}),tour.addStep("welcome",{title:"Welcome!",text:'<div class="logo" style="margin-left: 70px;"><svg style="width: 140px; height: 75px;" viewBox="0 0 288.9 70.1"><path style="fill: #222;" d="M28.5,28.4c-0.1,1.6-0.7,3.4-1.6,5.4c-2.4-0.3-4.6-0.4-6.8-0.4h-1.7c-2.9,13.9-4.3,22.6-4.3,26.1 c0,1.8,0.4,2.7,1.2,2.7c0.8,0,2.9-0.8,6.2-2.3l1.7,3.1C17.7,67.7,12.5,70,7.8,70c-2.2,0-4-0.7-5.4-2.1c-1.4-1.4-2.1-3.2-2.1-5.5\tc0-2.3,0.3-4.9,0.8-7.7c0.5-2.9,1.3-6.4,2.2-10.6c0.9-4.2,1.6-7.5,2.1-10.1c-2.3,0.2-4,0.4-5.2,0.6c-0.1-0.8-0.2-1.8-0.2-3\tc0-1.3,0.1-2.3,0.3-3.1h5.9c0.5-3.4,0.8-6.6,0.8-9.6L6.8,16v-0.3c4.9-1.7,9.5-2.5,13.8-2.5c0.2,1.3,0.4,2.8,0.4,4.7\tc0,1.9-0.5,5.4-1.6,10.6H28.5z"/><path style="fill: #222;" d="M29.6,69.1H29c-0.1-0.5-0.2-1.6-0.2-3.4c0-1.8,0.8-6.6,2.5-14.4c1.7-7.8,2.5-12.3,2.5-13.4\tc0-1.9-0.9-4.1-2.6-6.4l-0.8-1.1l0.1-1.2c3.4-0.9,8.8-1.4,16.2-1.4c0.8,1.6,1.1,3.9,1.1,6.8c0.7-1.1,2.1-2.6,4.3-4.5\tc2.2-1.9,4.4-2.8,6.8-2.8c3.4,0,5.1,2.9,5.1,8.8c-0.3,0.4-0.7,0.9-1.3,1.5c-0.5,0.6-1.6,1.4-3.2,2.5c-1.6,1.1-3.1,1.7-4.6,2\tc-0.1,0-0.6-0.8-1.6-2.5c-1-1.7-1.8-2.5-2.3-2.5c-1.6,0.6-2.9,1.5-4.1,2.8c-2.9,12.9-4.3,21.3-4.3,25.1c0,1.4,0,2.3,0.1,2.9\tC40.5,68.7,36.2,69.1,29.6,69.1z"/><path style="fill: #222;" d="M62.7,61.8c0-2.7,0.8-7.2,2.4-13.7c1.6-6.5,2.4-10.4,2.4-11.9c0-1.5-1.1-3.4-3.4-5.9l0.1-1.2\tc4.3-0.9,9.9-1.3,16.8-1.3c0.3,0.8,0.5,2.3,0.5,4.4c0,2.1-0.9,6.7-2.6,13.6c-1.8,6.9-2.6,11.3-2.6,12.9s0.6,2.5,1.9,2.5\tc1.8,0,3.9-0.7,6.3-2c0.3-1.5,0.9-4.4,1.9-8.6c2.3-10,3.4-17.2,3.4-21.5c2.2-0.9,6.1-1.3,11.8-1.3h1.8c0,2.9-0.9,8.7-2.6,17.2\tc-1.8,8.5-2.6,13.5-2.6,15c0,1.5,0.3,2.2,0.9,2.2c0.4,0,2.2-0.8,5.3-2.3l1.8,3c-5.6,4.6-10.4,6.9-14.6,6.9c-2,0-3.7-0.6-5.1-1.7\tc-1.4-1.1-2.2-2.6-2.4-4.4c-5.1,4.1-9.7,6.2-13.8,6.2c-2.2,0-4-0.7-5.4-2.2C63.4,66.5,62.7,64.4,62.7,61.8z"/><path style="fill: #222;" d="M153.2,63.1c-5.3,4.6-10,6.8-14,6.8c-4,0-6.4-2-7-6c-1.9,1.9-4,3.3-6.3,4.4c-2.3,1.1-4.3,1.6-6.1,1.6\tc-3,0-5.6-1.3-7.7-3.9c-2.1-2.6-3.2-6.7-3.2-12.2c0-8.3,1.8-14.7,5.3-19.5c3.5-4.7,7.5-7.1,11.9-7.1c4.4,0,8.1,1,11.1,3\tc1.9-10.1,2.9-18.1,2.9-23.9l-0.5-3.9c4.7-1.6,9.3-2.4,13.8-2.4c0.5,1.1,0.8,2.3,0.8,3.7c0,4.6-1.4,13.8-4.1,27.8\tc-2.8,14-4.1,23.5-4.1,28.5c0,1.5,0.3,2.3,1,2.3c0.4,0,1.6-0.6,3.6-1.8l0.9-0.6L153.2,63.1z M130.6,32.8c-2.2,0-4.1,2.2-5.7,6.5\tc-1.6,4.3-2.4,8.6-2.4,12.8c0,4.2,0.3,6.9,0.9,8.1c0.6,1.2,1.5,1.8,2.7,1.8c2.1,0,4.1-0.8,6.1-2.5c0.2-2.5,1.6-10.8,4.2-25\tC134.3,33.4,132.3,32.8,130.6,32.8z"/><path style="fill: #222;" d="M155.5,52.6c0-7.8,2.4-14,7.1-18.5c4.7-4.5,10.1-6.8,16.1-6.8c3.7,0,6.7,0.9,9.1,2.7c2.4,1.8,3.6,4.2,3.6,7.3\tc0,3-0.8,5.6-2.3,7.6c-1.5,2.1-3.4,3.7-5.6,4.8c-4.4,2.2-8.5,3.6-12.2,4.1l-2.3,0.3c0.4,5.9,2.8,8.8,7.2,8.8c1.5,0,3.1-0.4,4.8-1.1\tc1.7-0.8,3-1.5,3.9-2.3l1.4-1.1l2.3,3c-0.5,0.7-1.5,1.6-3,2.7c-1.5,1.1-2.9,2.1-4.2,2.8c-3.6,2-7.6,3-11.9,3 c-4.3,0-7.7-1.5-10.2-4.6C156.7,62.3,155.5,58.1,155.5,52.6z M176.5,45.5c1.9-2.1,2.8-4.9,2.8-8.3c0-3.4-1-5.1-3-5.1\tc-2.4,0-4.2,2-5.5,6.1c-1.3,4-1.9,7.8-1.9,11.3C172.1,49,174.6,47.6,176.5,45.5z"/><path style="fill: #222;" d="M223.2,56.6c0,3.9-1.7,7.2-5.2,9.7c-3.5,2.5-7.4,3.8-11.9,3.8c-4.4,0-8-0.9-10.6-2.8c-2.6-1.9-3.9-3.5-3.9-5\tc0-0.9,1.1-2.3,3.3-4.3c2.2-2,4-3.2,5.5-3.6c3.1,2.3,5.7,6,7.7,11c2.3-0.2,3.5-1.3,3.5-3.3c0-2.9-2.5-7-7.6-12.2\tc-5.1-5.3-7.6-9.5-7.6-12.6c0-3.1,1.4-5.5,4.2-7.3c2.8-1.7,6.2-2.6,10.2-2.6c4,0,7,0.7,9,2.1c2,1.4,3,3.3,3,5.7\tc0,2.4-1.9,5.7-5.7,10c0.4,0.4,1,1,1.7,1.7c0.7,0.7,1.6,2.1,2.7,4.1C222.6,52.9,223.2,54.8,223.2,56.6z M218.1,35.2\tc0-2.2-1.5-3.3-4.5-3.3c-1.4,0-2.6,0.3-3.6,0.9c-0.9,0.6-1.4,1.3-1.4,2c0,1.4,1.4,3.3,4.1,5.8l1.4,1.2\tC216.8,39.6,218.1,37.4,218.1,35.2z"/><path style="fill: #222;" d="M238.1,6.9c0-2.1-0.2-3.5-0.6-4.4C242.4,0.8,247,0,251.3,0c0.6,0.6,0.8,2,0.8,4.3c0,5.2-1.7,15.1-5.2,29.8\tc5.6-4.6,11.1-6.8,16.5-6.8c2.4,0,4.5,0.8,6.2,2.3c1.7,1.5,2.5,3.7,2.5,6.6c0,5.4-4.4,9.3-13.2,11.7c2.1,6.5,3.9,10.9,5.4,13.2\tc0.7,1,1.2,1.5,1.5,1.5c0.7,0,2.1-0.5,4.3-1.6l1-0.5l1.5,3.2c-1.5,1.4-3.6,2.8-6.2,4.2c-2.7,1.4-5.1,2.1-7.3,2.1\tc-4.9,0-8.3-4.4-10.2-13.3c-0.9-3.8-1.4-7.4-1.6-10.7c4-0.9,7-2.1,9-3.4c2-1.3,3-3.1,3-5.2c0-2.1-1.1-3.1-3.2-3.1\tc-2.1,0-5.7,2.1-10.7,6.4c-3.1,13.2-4.7,22.2-4.7,27.1c-3.4,1-7.9,1.5-13.4,1.5c-0.1-1.1-0.1-2-0.1-2.8c0-2.7,1.8-11.9,5.4-27.6\tC236.3,23.1,238.1,12.5,238.1,6.9z"/><circle style="fill: #E74C3C;" cx="284.9" cy="64.7" r="4"/></svg></div>Welcome to the trudesk tour! <br /> I\'m going to guide you through the system and show you around a little. <br /><br /><span style="font-style: italic;">You may choose to skip the tour if you do not require it. Simply press the skip button below.</span>',buttons:[{text:"Lets Start",action:tour.next},{text:"Skip",classes:"uk-float-left",action:function(){var username=window.trudeskSessionService.getUser().username;$.ajax({url:"/api/v1/users/"+username+"/updatepreferences",method:"PUT",headers:{"Content-Type":"application/json"},data:JSON.stringify({preference:"tourCompleted",value:!0}),success:function(){tour.cancel()},error:function(error){console.error(error)}})}}],when:{show:function(){var overlay=$("#serverRestarting");overlay.css("z-index",999).removeClass("hide"),overlay.find("*").hide()},hide:function(){var overlay=$("#serverRestarting");overlay.animate({opacity:0},500,function(){overlay.css("z-index",9999).addClass("hide"),overlay.find("*").show()})}}}),tour.addStep("dashboard",{title:"Dashboard",text:"This is your dashboard screen. It will show you stats at a glance."}),tour.addStep("topbar",{title:"Top Nav",text:"This is your top nav. It has quick links to frequently used functions and notifications.",attachTo:".top-nav bottom"}),tour.addStep("addTicket",{title:"Quick Link - Add Ticket",text:"<strong> Add Ticket </strong> quick link will is the fastest way to submit and enter a ticket. Go ahead give it a push!",attachTo:".top-menu .tour-addTicket bottom",buttons:[],when:{show:function(){$(".tour-addTicket").on("click",advanceTourDelayed),$("button.uk-modal-close").attr("disabled",!0),$("button#submitNewTicket").attr("disabled",!0)},hide:function(){setTimeout(function(){$(".tour-addTicket").off("click",advanceTourDelayed)},5e3)}}}),tour.addStep("addTicketForm",{title:"Add Ticket Form",text:"The great ticket form. Use this to submit new request. Don't worry it's pretty simple. Remember, always try to be as detailed as possible.",attachTo:"#ticketCreateModal .uk-modal-dialog left",when:{hide:function(){UIKit.modal($("#ticketCreateModal")).hide()}}}),tour.addStep("messagesIcon",{title:"Messages Notification",text:"Here you will see your notification for chat messages sent by other users.",attachTo:".tour-messagesNotification bottom"}),tour.addStep("ticketNotifications",{title:"Ticket Notifications",text:"This is where you'll get notification updates about tickets.",attachTo:".tour-ticketNotifications bottom"}),tour.addStep("onlineUserListButton",{title:"Chat - User List",text:"Push this to open the user list to quickly send a message to any user.",attachTo:".tour-onlineUserListButton bottom",buttons:[],when:{show:function(){$(".tour-onlineUserListButton").on("click",function(){setTimeout(function(){tour.show("onlineUserList")},300)})},hide:function(){$(".tour-onlineUserListButton").off("click")}}}),tour.addStep("onlineUserList",{title:"Chat - User List",text:"There it is! Your user list. Lets move on!",when:{hide:function(){}}}),tour.addStep("sidebar_tickets",{title:"Tickets",text:"This is the core of trudesk. You'll find all your current and past tickets located here.",attachTo:".navTickets right",buttons:[],when:{show:function(){UIKit.offcanvas.hide(),$("#page-content").css({opacity:.5}),$(".navTickets").on("click",function(){tour.next()})}}}),tour.addStep("tickets_page",{title:"Tickets",text:"Here you will find all new, open, or pending tickets. If any tickets are overdue they will flash red. <br /><br />Take a minute to review this screen and click next to proceed."}),tour.addStep("sidebar_messages",{title:"Messages",text:"This will take you to your messages. Messages are sent between users privately and securely.",attachTo:".navMessages right",buttons:[],when:{show:function(){$(".navMessages").on("click",function(){setTimeout(function(){tour.next()},1e3)})}}}),tour.addStep("message_list",{title:"Message List",text:"Here you will find your current active conversations. If there are no current conversation, you can start a conversation. We will view that next.",attachTo:"ul.message-items right"}),tour.addStep("start_conversation",{title:"Start New Conversation",text:"Simply click the (+) sign to start a new conversation with a user.",attachTo:"#convo-actions a right",buttons:[],when:{show:function(){$("#convo-actions a").on("click",function(){tour.next()})}}}),tour.addStep("all_user_list",{title:"User List",text:"Here you will find the same list as before, the all user list. Clicking on a user will start the conversation.",attachTo:"#new-convo-user-list right",when:{show:function(){$(".all-user-list *").css({"pointer-events":"none"})}}}),tour.on("complete",function(){}),tour.init=function(){tour.start()},tour}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19)],__WEBPACK_AMD_DEFINE_FACTORY__=e,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){return void 0===t}function r(t){return t&&t.constructor===Array}function o(t){return t&&t.constructor===Object}function s(t){return"object"==typeof t}function h(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}function c(t,e){var n=void 0;return i(t.matches)?i(t.matchesSelector)?i(t.msMatchesSelector)?i(t.webkitMatchesSelector)?i(t.mozMatchesSelector)?i(t.oMatchesSelector)||(n=t.oMatchesSelector):n=t.mozMatchesSelector:n=t.webkitMatchesSelector:n=t.msMatchesSelector:n=t.matchesSelector:n=t.matches,n.call(t,e)}function l(t){if(s(t))return t.hasOwnProperty("element")&&t.hasOwnProperty("on")?t:null;var e=S.exec(t);if(!e)return null;var n=e[2];return"["===n[0]&&(n=n.substring(1,n.length-1)),{element:e[1],on:n}}function a(t,e){if(null===t||i(t))return t;if(s(t))return t;for(var n=t.split(" "),r={},o=e.length-1,h=n.length-1;h>=0;h--){if(0===o){r[e[o]]=n.slice(0,h+1).join(" ");break}r[e[o]]=n[h],o--}return r}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=function(t,e,n){for(var i=!0;i;){var r=t,o=e,s=n;i=!1,null===r&&(r=Function.prototype);var h=Object.getOwnPropertyDescriptor(r,o);if(void 0!==h){if("value"in h)return h.value;var c=h.get;if(void 0===c)return;return c.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return;t=l,e=o,n=s,i=!0,h=l=void 0}},p=t.Utils,f=p.Evented,v=p.addClass,m=p.extend,y=p.hasClass,g=p.removeClass,b=p.uniqueId,w=new f,k={"top right":"bottom left","top left":"bottom right","top center":"bottom center","middle right":"middle left","middle left":"middle right","middle center":"middle center","bottom left":"top right","bottom right":"top left","bottom center":"top center",top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center",middle:"middle center"},S=/^(.+) (top|left|right|bottom|center|\[[a-z ]+\])$/,O=function(s){function p(t,n){return e(this,p),d(Object.getPrototypeOf(p.prototype),"constructor",this).call(this,t,n),this.tour=t,this.bindMethods(),this.setOptions(n),this}return n(p,s),u(p,[{key:"bindMethods",value:function(){var t=this;["_show","show","hide","isOpen","cancel","complete","scrollTo","destroy","render"].map(function(e){t[e]=t[e].bind(t)})}},{key:"setOptions",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t,this.destroy(),this.id=this.options.id||this.id||"step-"+b();var e=this.options.when;if(e)for(var n in e)if({}.hasOwnProperty.call(e,n)){var s=e[n];this.on(n,s,this)}var h=JSON.stringify(this.options.buttons),c=i(h)||"true"===h,l="{}"===h||"[]"===h||"null"===h||"false"===h,a=!c&&r(this.options.buttons),u=!c&&o(this.options.buttons);c?this.options.buttons=[{text:"Next",action:this.tour.next,classes:"btn"}]:!l&&u?this.options.buttons=[this.options.buttons]:!l&&a||(this.options.buttons=!1)}},{key:"getTour",value:function(){return this.tour}},{key:"bindAdvance",value:function(){var t=this,e=a(this.options.advanceOn,["selector","event"]),n=e.event,r=e.selector,o=function(e){t.isOpen()&&(i(r)?t.el&&e.target===t.el&&t.tour.next():c(e.target,r)&&t.tour.next())};document.body.addEventListener(n,o),this.on("destroy",function(){return document.body.removeEventListener(n,o)})}},{key:"getAttachTo",value:function(){var t=l(this.options.attachTo)||{},e=m({},t);return"string"==typeof t.element&&(e.element=document.querySelector(t.element),e.element||console.error("The element for this Shepherd step was not found "+t.element)),e}},{key:"setupTether",value:function(){if(i(t))throw new Error("Using the attachment feature of Shepherd requires the Tether library");var e=this.getAttachTo(),n=k[e.on]||k.right;i(e.element)&&(e.element="viewport",n="middle center");var r={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:e.element,offset:e.offset||"0 0",attachment:n};this.tether&&this.tether.destroy(),this.tether=new t(m(r,this.options.tetherOptions))}},{key:"show",value:function(){var t=this;if(!i(this.options.beforeShowPromise)){var e=this.options.beforeShowPromise();if(!i(e))return e.then(function(){return t._show()})}this._show()}},{key:"_show",value:function(){var t=this;this.trigger("before-show"),this.el||this.render(),v(this.el,"shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){t.scrollTo()}),this.trigger("show")}},{key:"hide",value:function(){this.trigger("before-hide"),g(this.el,"shepherd-open"),document.body.removeAttribute("data-shepherd-step"),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("hide")}},{key:"isOpen",value:function(){return this.el&&y(this.el,"shepherd-open")}},{key:"cancel",value:function(){this.tour.cancel(),this.trigger("cancel")}},{key:"complete",value:function(){this.tour.complete(),this.trigger("complete")}},{key:"scrollTo",value:function(){var t=this.getAttachTo(),e=t.element;i(this.options.scrollToHandler)?i(e)||e.scrollIntoView():this.options.scrollToHandler(e)}},{key:"destroy",value:function(){!i(this.el)&&this.el.parentNode&&(this.el.parentNode.removeChild(this.el),delete this.el),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("destroy")}},{key:"render",value:function(){var t=this;i(this.el)||this.destroy(),this.el=h("<div class='shepherd-step "+(this.options.classes||"")+"' data-id='"+this.id+"' "+(this.options.idAttribute?'id="'+this.options.idAttribute+'"':"")+"></div>");var e=document.createElement("div");e.className="shepherd-content",this.el.appendChild(e);var n=document.createElement("header");if(e.appendChild(n),this.options.title&&(n.innerHTML+="<h3 class='shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title"),this.options.showCancelLink){var r=h("<a href class='shepherd-cancel-link'>✕</a>");n.appendChild(r),this.el.className+=" shepherd-has-cancel-link",this.bindCancelLink(r)}i(this.options.text)||function(){var n=h("<div class='shepherd-text'></div>"),i=t.options.text;"function"==typeof i&&(i=i.call(t,n)),i instanceof HTMLElement?n.appendChild(i):("string"==typeof i&&(i=[i]),i.map(function(t){n.innerHTML+="<p>"+t+"</p>"})),e.appendChild(n)}(),this.options.buttons&&function(){var n=document.createElement("footer"),i=h("<ul class='shepherd-buttons'></ul>");t.options.buttons.map(function(e){var n=h("<li><a class='shepherd-button "+(e.classes||"")+"'>"+e.text+"</a>");i.appendChild(n),t.bindButtonEvents(e,n.querySelector("a"))}),n.appendChild(i),e.appendChild(n)}(),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn&&this.bindAdvance()}},{key:"bindCancelLink",value:function(t){var e=this;t.addEventListener("click",function(t){t.preventDefault(),e.cancel()})}},{key:"bindButtonEvents",value:function(t,e){var n=this;t.events=t.events||{},i(t.action)||(t.events.click=t.action);for(var r in t.events)if({}.hasOwnProperty.call(t.events,r)){var o=t.events[r];"string"==typeof o&&function(){var t=o;o=function(){return n.tour.show(t)}}(),e.addEventListener(r,o)}this.on("destroy",function(){for(var n in t.events)if({}.hasOwnProperty.call(t.events,n)){var i=t.events[n];e.removeEventListener(n,i)}})}}]),p}(f),T=function(t){function r(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e(this,r),d(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,n),this.bindMethods(),this.options=n,this.steps=this.options.steps||[],["complete","cancel","hide","start","show","active","inactive"].map(function(e){!function(e){t.on(e,function(n){n=n||{},n.tour=t,w.trigger(e,n)})}(e)}),this}return n(r,t),u(r,[{key:"bindMethods",value:function(){var t=this;["next","back","cancel","complete","hide"].map(function(e){t[e]=t[e].bind(t)})}},{key:"addStep",value:function(t,e){return i(e)&&(e=t),e instanceof O?e.tour=this:("string"!=typeof t&&"number"!=typeof t||(e.id=t.toString()),e=m({},this.options.defaults,e),e=new O(this,e)),this.steps.push(e),this}},{key:"removeStep",value:function(t){for(var e=this.getCurrentStep(),n=0;n<this.steps.length;++n){var i=this.steps[n];if(i.id===t){i.isOpen()&&i.hide(),i.destroy(),this.steps.splice(n,1);break}}e&&e.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.hide())}},{key:"getById",value:function(t){for(var e=0;e<this.steps.length;++e){var n=this.steps[e];if(n.id===t)return n}}},{key:"getCurrentStep",value:function(){return this.currentStep}},{key:"next",value:function(){var t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?(this.hide(t),this.trigger("complete"),this.done()):this.show(t+1,!0)}},{key:"back",value:function(){var t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)}},{key:"cancel",value:function(){this.currentStep&&this.currentStep.hide(),this.trigger("cancel"),this.done()}},{key:"complete",value:function(){this.currentStep&&this.currentStep.hide(),this.trigger("complete"),this.done()}},{key:"hide",value:function(){this.currentStep&&this.currentStep.hide(),this.trigger("hide"),this.done()}},{key:"done",value:function(){w.activeTour=null,g(document.body,"shepherd-active"),this.trigger("inactive",{tour:this})}},{key:"show",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]||arguments[1];this.currentStep?this.currentStep.hide():(v(document.body,"shepherd-active"),this.trigger("active",{tour:this})),w.activeTour=this;var n=void 0;if(n="string"==typeof t?this.getById(t):this.steps[t])if(i(n.options.showOn)||n.options.showOn())this.trigger("show",{step:n,previous:this.currentStep}),this.currentStep&&this.currentStep.hide(),this.currentStep=n,n.show();else{var r=this.steps.indexOf(n),o=e?r+1:r-1;this.show(o,e)}}},{key:"start",value:function(){this.trigger("start"),this.currentStep=null,this.next()}}]),r}(f);return m(w,{Tour:T,Step:O,Evented:f}),w})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(5),__webpack_require__(58),__webpack_require__(49),__webpack_require__(50)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,UIKit){return angular.module("trudesk.controllers.profile",["trudesk.services.session"]).controller("profileCtrl",function(SessionService,$scope,$window,$http,$log,$timeout){function fixInputLabels(){$timeout(function(){$("input.md-input").each(function(){var vm=this,self=$(vm);if(!_.isEmpty(self.val())){var s=self.parent(".md-input-wrapper");s.length>0&&s.addClass("md-input-filled")}})},0)}function generateL2Auth(completed){var id=SessionService.getUser()._id;if(_.isUndefined(id))return helpers.UI.showSnackbar("Unable to get user ID.",!0);$http.post("/api/v1/users/"+id+"/generatel2auth").then(function(response){if(response.data.success)_.isFunction(completed)&&completed(null,response.data.generatedKey);else if(helpers.UI.showSnackbar("Error: Unknown error has occurred.",!0),_.isFunction(completed))return completed("Error: Unknown error has occurred.")},function(err){$log.error("[trudesk:profile:generateL2Auth]"),$log.error(err),helpers.UI.showSnackbar("Error: Could not generate new secret! Check Console",!0),_.isFunction(completed)&&completed(err)})}function removeL2Auth(completed){var id=SessionService.getUser()._id;if(_.isUndefined(id))return helpers.UI.showSnackbar("Unable to get user ID.",!0);$http.post("/api/v1/users/"+id+"/removel2auth").success(function(){_.isFunction(completed)&&completed()}).error(function(e){$log.error("[trudesk:profile:removeL2Auth]"),$log.error(e),helpers.UI.showSnackbar("Error: Could not remove. Check Console",!0),_.isFunction(completed)&&completed(e)})}function getFormData(){var data={};return data.username=$("#aUsername").val(),data.fullname=$("#aFullname").val(),data.password=$("#aPass").val(),data.cPassword=$("#aPassConfirm").val(),data.email=$("#aEmail").val(),data}function resetForm(){$("#aPass").val(""),$("#aPassConfirm").val("")}$scope.init=function(){fixInputLabels()},$scope.updateUser=function($event){$event.preventDefault();var id=$("div[data-user_id]").attr("data-user_id");if(!_.isUndefined(id)){var data=getFormData();$http.put("/api/v1/users/"+data.username,{aId:id,aFullname:data.fullname,aPass:data.password,aPassConfirm:data.cPassword,aEmail:data.email,saveGroups:!1}).success(function(){resetForm(),helpers.UI.showSnackbar({text:"Profile Successfully Saved",textColor:"#f8f8f2"})}).error(function(e){$log.log("[trudesk:profile:updateUser] - "+e.error.message),helpers.UI.showSnackbar("Error "+e.error.message,!0)})}},$scope.showTour=function(){var username=SessionService.getUser().username;$http.put("/api/v1/users/"+username+"/updatepreferences",{preference:"tourCompleted",value:!1}).success(function(){$window.location.href="/"}).error(function(e){$log.log("[trudesk:profile:showTour] - "+e.error.message),helpers.UI.showSnackbar("Error "+e.error.message,!0)})},$scope.back=function($event){History.go(-1),$event.preventDefault()},$scope.generateApiKey=function($event){$event.preventDefault();var id=$("div[data-user_id]").attr("data-user_id");_.isUndefined(id)||$http.post("/api/v1/users/"+id+"/generateapikey").success(function(tokenJson){$("#aApiKey").val(tokenJson.token),$(".removeApiButton").removeClass("hide"),$(".generateApiButton").addClass("hide"),helpers.UI.showSnackbar("API Key Successfully Generated",!1)}).error(function(e){$log.log("[trudesk:profile:generateApiKey] - "+e),helpers.UI.showSnackbar("Error: Unable to generate API Key!",!0)})},$scope.removeApiKey=function($event){$event.preventDefault();var id=$("div[data-user_id]").attr("data-user_id");_.isUndefined(id)||$http.post("/api/v1/users/"+id+"/removeapikey").success(function(){$("#aApiKey").val(""),$(".generateApiButton").removeClass("hide"),$(".removeApiButton").addClass("hide"),helpers.UI.showSnackbar("API Key Successfully Revoked",!1)}).error(function(e){$log.log("[trudesk:profile:removeApiKey]",e),helpers.UI.showSnackbar("Error: Unable to remove API Key!",!0)})},$scope.otpChange=function(event){var $totpSettings=$(".totp-settings-wrap"),$totpPanel=$totpSettings.find(".panel-body2"),$tOTPKey=$totpSettings.find("#tOTPKey"),$qrCode=$totpSettings.find("#totp-qrcode");event.preventDefault(),$scope.otpEnabled?UIKit.modal.confirm('<span style="font-size: 16px; color: #FF9800;">WARNING: Disabling Two Factor Authentication will remove your shared secret. A new key will generate when re-enabled.</span><br />Are you sure you want to disable two factor authentication?',function(){removeL2Auth(function(err){angular.element(event.target).attr("checked",!1),$totpPanel.slideUp(400,function(){$totpPanel.css({overflow:"hidden",margin:0}),$qrCode.find("canvas").remove(),$tOTPKey.val(),$timeout(function(){$scope.otpEnabled=!1},0)})})},{labels:{Ok:"Yes",Cancel:"No"}}):generateL2Auth(function(err,key){if(err||angular.isUndefined(key));else{$timeout(function(){$scope.otpEnabled=!0,angular.element(event.target).prop("checked",!0)},0);var host=$("div[data-host]").attr("data-host"),username=SessionService.getUser().username,qrKey="otpauth://totp/"+host+"-"+username+":"+host+"-"+username+"?secret="+key+"&issuer=Trudesk";$qrCode.qrcode({width:242,height:242,text:qrKey}),$tOTPKey.val(key),$totpPanel.css({margin:"10px 7px 7px 7px"}),$totpPanel.find("input").removeClass("hide"),$totpPanel.removeClass("hide"),fixInputLabels(),$totpPanel.slideDown()}})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(5),__webpack_require__(59),__webpack_require__(49),__webpack_require__(23),__webpack_require__(21),__webpack_require__(22)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,UIkit,accountsPage){return angular.module("trudesk.controllers.accounts",[]).controller("accountsCtrl",function($scope,$http,$timeout,$log){function checkGroupValidation(){var data={},form=$("#createAccountForm");return data.aGrps=form.find('select[name="caGrps[]"]').val(),!data.aGrps||data.aGrps.length<1?($('label[for="caGrps"]').css("color","#d85030"),$('select[name="caGrps[]"] + .selectize-control > .selectize-input').css("border-bottom","1px solid #d85030"),$(".aGrps-error-message").removeClass("hide").css("display","block").css("color","#d85030").css("font-weight","bold"),!1):($('label[for="caGrps"]').css("color","#4d4d4d"),$('select[name="caGrps[]"] + .selectize-control > .selectize-input').css("border-bottom","1px solid rgba(0,0,0,.12)"),$(".aGrps-error-message").addClass("hide"),!0)}function throttledAccountPicClick(){$timeout(function(){var $profileImageInput=$("#profileImageInput");$profileImageInput.on("click",function(event){event.stopPropagation()}),$profileImageInput.trigger("click")},0)}$scope.createAccount=function(event){var data={},form=$("#createAccountForm");return form.isValid(null,null,!1)?checkGroupValidation()?(event.preventDefault(),form.serializeArray().map(function(x){data[x.name]=x.value}),data.aGrps=form.find('select[name="caGrps[]"]').val(),void $http({method:"POST",url:"/api/v1/users/create",data:data,headers:{"Content-Type":"application/json"}}).success(function(data){if(!data.success){if(data.error)return void helpers.UI.showSnackbar("Error: "+data.error,!0);helpers.UI.showSnackbar("Error Creating Account",!0)}helpers.UI.showSnackbar({text:"Account Created"}),History.pushState(null,null,"/accounts/?refresh="+(Math.floor(9e4*Math.random())+1e4)),UIkit.modal("#accountCreateModal").hide()}).error(function(err){$log.log("[trudesk:accounts:createAccount]",err),helpers.UI.showSnackbar("An error occurred while creating the account. Check Console.",!0)})):(event.preventDefault(),!1):(checkGroupValidation(),!1)};var running=!1;$scope.deleteAccount=function($event){if(running)return!0;$event.preventDefault();var self=$($event.target),username=self.attr("data-username");if(_.isUndefined(username))return!0;running=!0,$http.delete("/api/v1/users/"+username).success(function(data){if(!data.success)return helpers.UI.showSnackbar(data.error,!0),running=!1,!0;data.disabled?(self.parents(".tru-card-head").addClass("tru-card-head-deleted"),self.addClass("hide"),self.parents(".uk-nav").find(".enable-account-action").removeClass("hide"),helpers.UI.showSnackbar("Account "+username+" Successfully Disabled",!1)):(self.parents(".tru-card[data-card-username]").parent().remove(),UIkit.$html.trigger("changed.uk.dom"),helpers.UI.showSnackbar("Account "+username+" Successfully Deleted",!1)),running=!1}).error(function(err){$log.log("[trudesk:accounts:deleteAccount] - Error: "+err.error),helpers.UI.showSnackbar(err.error,!0),running=!1})},$scope.enableAccount=function($event){$event.preventDefault();var self=$($event.target),username=self.attr("data-username");if(_.isUndefined(username))return!0;$http.get("/api/v1/users/"+username+"/enable").success(function(data){if(!data.success)return void helpers.UI.showSnackbar(data.error,!0);self.parents(".tru-card-head").removeClass("tru-card-head-deleted"),self.addClass("hide"),self.parents(".uk-nav").find(".delete-account-action").removeClass("hide"),helpers.UI.showSnackbar("Account successfully enabled",!1)}).error(function(err){$log.log("[trudesk:accounts:enableAccount] - Error: "+err.error),helpers.UI.showSnackbar(err.error,!0)})},$scope.editAccount=function($event){$event.preventDefault();var self=$($event.target),username=self.attr("data-username");if(_.isUndefined(username))return!0;var $menu=self.parents(".tru-card-head-menu");_.isUndefined($menu)||$menu.find(".uk-dropdown").removeClass("uk-dropdown-shown uk-dropdown-active"),$http.get("/api/v1/users/"+username).success(function(data){var editAccountModal=$("#editAccountModal"),form=editAccountModal.find("form#editAccountForm"),user=data.user;if(_.isUndefined(user)||_.isNull(user))return!0;var $userHeadingContent=$(".user-heading-content");$userHeadingContent.find(".js-username").text(user.username),$userHeadingContent.find(".js-user-title").text(user.title),form.find("#aId").val(user._id),form.find("#aUsername").val(user.username).prop("disabled",!0).parent().addClass("md-input-filled"),form.find("#aFullname").val(user.fullname).parent().addClass("md-input-filled"),form.find("#aTitle").val(user.title).parent().addClass("md-input-filled"),form.find("#aEmail").val(user.email).parent().addClass("md-input-filled"),form.find('#aRole option[value="'+user.role+'"]').prop("selected",!0);var $selectizeRole=form.find("#aRole")[0].selectize;$selectizeRole.setValue(user.role,!0),$selectizeRole.refreshItems(),form.find("#aGrps").multiSelect("deselect_all"),form.find("#aGrps").multiSelect("select",data.groups);var aImageUploadForm=$("form#aUploadImageForm"),image=aImageUploadForm.find("img"),input_id=aImageUploadForm.find("input#imageUpload_id"),input_username=aImageUploadForm.find("input#imageUpload_username");input_id.val(user._id),input_username.val(user.username),user.image?image.attr("src","/uploads/users/"+user.image+"?r="+(Math.floor(9e4*Math.random())+1e4)):image.attr("src","/uploads/users/defaultProfile.jpg?r="+(Math.floor(9e4*Math.random())+1e4));var modal=UIkit.modal("#editAccountModal");modal.isActive()||modal.show()}).error(function(err){$log.log("[trudesk:Accounts:editAccount] - Error: "+err.error),helpers.UI.showSnackbar(err.error,!0)})},$scope.saveAccount=function(){var form=$("#editAccountForm"),data=form.serializeObject();data.aUsername=form.find("#aUsername").val(),data.aGrps=form.find("#aGrps").val(),data.saveGroups=!0,$http({method:"PUT",url:"/api/v1/users/"+data.aUsername,data:data,headers:{"Content-Type":"application/json"}}).success(function(data){if(!data.success){if(data.error)return void helpers.UI.showSnackbar("Error: "+data.error,!0);helpers.UI.showSnackbar("Error Saving Account",!0)}helpers.UI.showSnackbar("Account Saved",!1),UIkit.modal("#editAccountModal").hide(),accountsPage.init(null,!0)}).error(function(err){$log.log("[trudesk:accounts:saveAccount] - "+err.error.message),helpers.UI.showSnackbar("Error: "+err.error.message,!0)})},$scope.accountEditPic=function(){throttledAccountPicClick()},$scope.selectAccountsImport=function(event,type){if($(event.currentTarget).hasClass("card-disabled"))return!1;switch(type){case"csv":$("#csv_wizard_card").removeClass("uk-hidden"),$("#json-import-selector").addClass("card-disabled"),$("#ldap-import-selector").addClass("card-disabled");break;case"json":$("#json_wizard_card").removeClass("uk-hidden"),$("#csv-import-selector").addClass("card-disabled"),$("#ldap-import-selector").addClass("card-disabled");break;case"ldap":$("#ldap_wizard_card").removeClass("uk-hidden"),$("#csv-import-selector").addClass("card-disabled"),$("#json-import-selector").addClass("card-disabled")}},$scope.resetWizardSelection=function(){$("#csv_wizard_card").addClass("uk-hidden"),$("#json_wizard_card").addClass("uk-hidden"),$("#ldap_wizard_card").addClass("uk-hidden"),$("#csv-import-selector").removeClass("card-disabled"),$("#json-import-selector").removeClass("card-disabled"),$("#ldap-import-selector").removeClass("card-disabled")}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){(function($){!function(root,factory){"use strict";module.exports=factory(__webpack_require__(0))}(0,function(jQuery){"use strict";return function($){function getWindowSize(dimension,config){var ddeClientHeight,visualSize,zoomFactor,lBound,uBound,_window=config.window,scrollbarsConsumeSpace=0!==browserScrollbarWidth(),getLayoutViewportWidth=config.useLayoutViewport&&"Width"===dimension,useClientSize=scrollbarsConsumeSpace||!supportsWindowInnerWidth()||getLayoutViewportWidth,size=useClientSize?_window.document.documentElement["client"+dimension]:getWindowInnerSize(dimension,_window);return config.useLayoutViewport&&!useClientSize&&(visualSize=size,zoomFactor=getPinchZoomFactor(_window,{asRange:!0}),size=Math.round(visualSize*zoomFactor.calculated),supportsSubpixelAccuracy()||(ddeClientHeight=_window.document.documentElement.clientHeight,lBound=(visualSize-1)*zoomFactor.min,uBound=(visualSize+1)*zoomFactor.max,(size<=ddeClientHeight+3&&size>=ddeClientHeight-3||lBound<=ddeClientHeight&&uBound>=ddeClientHeight&&uBound<ddeClientHeight+30)&&(size=ddeClientHeight))),size}function getPinchZoomFactor(_window,options){var ddeClientWidth,windowInnerWidth,asRange=options&&options.asRange,factors={calculated:1,min:1,max:1};return 0!==browserScrollbarWidth()||!supportsWindowInnerWidth()||(_window||(_window=window),ddeClientWidth=_window.document.documentElement.clientWidth,windowInnerWidth=getWindowInnerWidth(_window),factors.calculated=ddeClientWidth/windowInnerWidth,asRange&&(supportsSubpixelAccuracy()?factors.min=factors.max=factors.calculated:(factors.min=ddeClientWidth/(windowInnerWidth+1),factors.max=ddeClientWidth/(windowInnerWidth-1)))),asRange?factors:factors.calculated}function getWindowQueryConfig(args){var isWindowArg0,isOptionArg0,isOptionArg1,_window=window,_useVisualViewport=!0;return args&&args.length&&(args=Array.prototype.slice.call(args),isWindowArg0=isWindow(args[0]),isWindowArg0||(args[0]=castStringToViewportOption(args[0])),isOptionArg0=!isWindowArg0&&args[0],isOptionArg0||(args[1]=castStringToViewportOption(args[1])),isOptionArg1=!isOptionArg0&&args[1],isWindowArg0?(_window=args[0],isOptionArg1&&args[1].viewport&&(_useVisualViewport=isVisualViewport(args[1].viewport))):isOptionArg0?(args[0].viewport&&(_useVisualViewport=isVisualViewport(args[0].viewport)),isWindow(args[1])&&(_window=args[1])):!args[0]&&args[1]&&(isOptionArg1&&args[1].viewport?_useVisualViewport=isVisualViewport(args[1].viewport):isWindow(args[1])&&(_window=args[1]))),{window:_window,useVisualViewport:_useVisualViewport,useLayoutViewport:!_useVisualViewport}}function isVisualViewport(name){var viewport=isString(name)&&name.toLowerCase();if(name&&!viewport)throw new Error("Invalid viewport option: "+name);if(viewport&&"visual"!==viewport&&"layout"!==viewport)throw new Error("Invalid viewport name: "+name);return"visual"===viewport}function castStringToViewportOption(arg){return isString(arg)&&""!==arg?{viewport:arg}:arg}function supportsWindowInnerWidth(){return void 0===_supportsWindowInnerWidth&&(_supportsWindowInnerWidth=getWindowInnerWidth()>10),_supportsWindowInnerWidth}function browserScrollbarWidth(){var testEl;return void 0===_scrollbarWidth&&(testEl=document.createElement("div"),testEl.style.cssText="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;",document.body.appendChild(testEl),_scrollbarWidth=testEl.offsetWidth-testEl.clientWidth,document.body.removeChild(testEl)),_scrollbarWidth}function testDocumentScroll(){var initialDocumentState,_testEl,initialScrollWidth,responds,iframe=createTestIframe(),_document=iframe&&iframe.contentDocument||document,_body=_document.body,inIframe=_document!==document;_testEl=_document.createElement("div"),_testEl.style.cssText="width: 1px; height: 1px; position: relative; top: 0px; left: 32000px;",inIframe||(initialDocumentState=prepareGlobalDocument()),initialScrollWidth=_body.scrollWidth,_body.appendChild(_testEl),responds=initialScrollWidth!==_body.scrollWidth,_body.removeChild(_testEl),inIframe||restoreGlobalDocument(initialDocumentState),elementNameForDocSizeQuery=responds?"documentElement":"body",iframe&&document.body.removeChild(iframe)}function createTestIframe(){var iframe=document.createElement("iframe"),body=document.body;if(iframe.style.cssText="position: absolute; top: -600px; left: -600px; width: 500px; height: 500px; margin: 0px; padding: 0px; border: none; display: block;",iframe.frameborder="0",body.appendChild(iframe),iframe.src="about:blank",iframe.contentDocument)return iframe.contentDocument.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><title></title><style type="text/css">html, body { overflow: hidden; }</style></head><body></body></html>'),iframe}function prepareGlobalDocument(){var ddEStyle,bodyStyle,ddE=document.documentElement,body=document.body,ddEComputedStyles=useGetComputedStyle?window.getComputedStyle(ddE,null):ddE.currentStyle,bodyComputedStyles=useGetComputedStyle?window.getComputedStyle(body,null):body.currentStyle,ddEOverflowX=(ddEComputedStyles.overflowX||ddEComputedStyles.overflow||"visible").toLowerCase(),bodyOverflowX=(bodyComputedStyles.overflowX||bodyComputedStyles.overflow||"visible").toLowerCase(),modifyBody="hidden"!==bodyOverflowX,modifyDocumentElement="visible"===ddEOverflowX,initialState={documentElement:{modified:modifyDocumentElement},body:{modified:modifyBody}};return modifyDocumentElement&&(ddEStyle=ddE.style,initialState.documentElement.styleOverflowX=ddEStyle.overflowX,ddEStyle.overflowX="auto"),modifyBody&&(bodyStyle=body.style,initialState.body.styleOverflowX=bodyStyle.overflowX,bodyStyle.overflowX="hidden"),initialState}function restoreGlobalDocument(previousState){previousState.documentElement.modified&&(document.documentElement.style.overflowX=previousState.documentElement.styleOverflowX),previousState.body.modified&&(document.body.style.overflowX=previousState.body.styleOverflowX)}function guessDocumentSize(dimension,_document){var ddE=_document.documentElement;return Math.max(ddE.body["scroll"+dimension],_document["scroll"+dimension],ddE.body["offset"+dimension],_document["offset"+dimension],_document["client"+dimension])}function getWindowInnerWidth(_window){return getWindowInnerSize("Width",_window)}function getWindowInnerSize(dimension,_window){var size=(_window||window)["inner"+dimension];return size&&checkForFractions(size),size}function checkForFractions(sizeMeasurement){!_supportsSubpixelAccuracy&&isFloat(sizeMeasurement)&&(_supportsSubpixelAccuracy=!0)}function supportsSubpixelAccuracy(){return!!_supportsSubpixelAccuracy}function isWindow(value){return null!=value&&value.window==value}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&"[object String]"===Object.prototype.toString.call(value)||!1}function isFloat(num){return num===+num&&num!==(0|num)}function getIEVersion(){var userAgent,userAgentTestRx;return void 0===ieVersion&&(ieVersion=!1,userAgent=navigator&&navigator.userAgent,navigator&&"Microsoft Internet Explorer"===navigator.appName&&userAgent&&(userAgentTestRx=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=userAgentTestRx.exec(userAgent)&&(ieVersion=parseFloat(RegExp.$1)))),ieVersion}var _scrollbarWidth,_supportsWindowInnerWidth,_supportsSubpixelAccuracy,elementNameForDocSizeQuery,ieVersion,useGetComputedStyle=!!window.getComputedStyle;if($.documentWidth=function(_document){var width;_document||(_document=document);try{void 0===elementNameForDocSizeQuery&&testDocumentScroll(),width=_document[elementNameForDocSizeQuery].scrollWidth}catch(e){width=guessDocumentSize("Width",_document)}return width},$.documentHeight=function(_document){var height;_document||(_document=document);try{void 0===elementNameForDocSizeQuery&&testDocumentScroll(),height=_document[elementNameForDocSizeQuery].scrollHeight}catch(e){height=guessDocumentSize("Height",_document)}return height},$.windowWidth=function(options,_window){return getWindowSize("Width",getWindowQueryConfig(arguments))},$.windowHeight=function(options,_window){return getWindowSize("Height",getWindowQueryConfig(arguments))},$.pinchZoomFactor=function(_window){return getPinchZoomFactor(_window)},$.scrollbarWidth=browserScrollbarWidth,"function"==typeof $&&!function(){var ieVersion=getIEVersion();return ieVersion&&ieVersion<8}()&&!function(){return 9===getIEVersion()}())try{$(function(){void 0===elementNameForDocSizeQuery&&testDocumentScroll(),browserScrollbarWidth()})}catch(e){}}(void 0!==jQuery?jQuery:"undefined"!=typeof Zepto?Zepto:$),jQuery.documentSize})}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(5),__webpack_require__(49),__webpack_require__(22)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,UIkit){return angular.module("trudesk.controllers.groups",[]).controller("groupsCtrl",function($scope,$http,$timeout,$log){function refreshGrid(){$("#group_list").find(".tru-card-wrapper").each(function(){$(this).remove()}),$http.get("/api/v1/groups/all").success(function(data){var $groupList=$("#group_list"),html="";_.each(data.groups,function(group){html+=buildHTML(group)}),angular.injector(["ng","trudesk"]).invoke(["$compile","$rootScope",function($compile,$rootScope){var $scope=$groupList.append(html).scope();$compile($groupList)($scope||$rootScope),$rootScope.$digest()}]),UIkit.$html.trigger("changed.uk.dom")}).error(function(err){$log.log("[trudesk:groups:refreshGrid] - Error: "+err.error),helpers.UI.showSnackbar(err.error,!0)})}function buildHTML(group){var html="";return html+='<div class="tru-card-wrapper" data-uk-filter="'+group.name+'">',html+='<div class="tru-card tru-card-hover">',html+='<div class="tru-card-head">',html+="<div class=\"tru-card-head-menu\" data-uk-dropdown=\"{pos: 'bottom-right',mode:'click'}\">",html+='<i class="material-icons tru-icon">&#xE5D4;</i>',html+='<div class="uk-dropdown uk-dropdown-small">',html+='<ul class="uk-nav">',html+='<li><a href="#" class="no-ajaxy" data-group-id="'+group._id+'" ng-click="editGroup($event)">Edit</a></li>',html+='<li><a href="#" class="no-ajaxy" data-group-id="'+group._id+'" ng-click="deleteGroup($event)">Remove</a></li>',html+="</ul>",html+="</div>",html+="</div>",html+='<h3 class="tru-card-head-text uk-text-center" style="padding-top:60px;">',html+=group.name,html+='<span class="uk-text-truncate">',html+=_.size(group.members).toString()+" "+(1===_.size(group.members)?"member":"members"),html+="</span>",html+="</h3>",html+="</div>",html+="</div>",html+="</div>"}$scope.editGroup=function($event){if(_.isNull($event.target)||_.isUndefined($event.target))return!1;var self=$($event.target),groupId=self.attr("data-group-id");$http.get("/api/v1/groups/"+groupId).success(function(data){var group=data.group,form=$("#editGroupForm");form.find("#__EditId").text(group._id),form.find("#gName").val(group.name).parent().addClass("md-input-filled");var mappedMembers=_.map(group.members,"_id"),mappedSendMailTo=_.map(group.sendMailTo,"_id");form.find("#gMembers").multiSelect("deselect_all"),form.find("#gMembers").multiSelect("select",mappedMembers),form.find("#gSendMailTo").multiSelect("deselect_all"),form.find("#gSendMailTo").multiSelect("select",mappedSendMailTo),UIkit.modal("#groupEditModal").show()}).error(function(err){$log.log("[trudesk:groups:editGroup] - Error: "+err),helpers.UI.showSnackbar(err,!0)})},$scope.saveEditGroup=function($event){var id=$($event.target).parents("form").find("#__EditId").text();if(_.isUndefined(id))return helpers.UI.showSnackbar("Unable to get Group ID",!0),!1;var $form=$("#editGroupForm"),formData=$form.serializeObject(),members=$form.find("#gMembers").val(),sendMailTo=$form.find("#gSendMailTo").val(),apiData={name:formData.gName,members:members,sendMailTo:sendMailTo};$http({method:"PUT",url:"/api/v1/groups/"+id,data:apiData,headers:{"Content-Type":"application/json"}}).success(function(){helpers.UI.showSnackbar("Group Saved Successfully",!1),UIkit.modal("#groupEditModal").hide(),refreshGrid()}).error(function(err){$log.log("[trudesk:groups:saveEditGroup] - Error: "+err),helpers.UI.showSnackbar(err.error,!0)})},$scope.createGroup=function(){var formData=$("#createGroupForm").serializeObject(),apiData={name:formData.gName,members:formData.gMembers,sendMailTo:formData.gSendMailTo};$http({method:"POST",url:"/api/v1/groups/create",data:apiData,headers:{"Content-Type":"application/json"}}).success(function(){helpers.UI.showSnackbar("Group Created Successfully",!1),UIkit.modal("#groupCreateModal").hide(),$timeout(function(){refreshGrid()},0)}).error(function(err){$log.log("[trudesk:groups:createGroup] - Error: "+err),helpers.UI.showSnackbar(err,!0)})},$scope.deleteGroup=function(event){event.preventDefault();var self=$(event.target),groupID=self.attr("data-group-id"),card=self.parents(".tru-card-wrapper");groupID&&UIkit.modal.confirm("Are you sure you want to delete group: <strong>"+card.find("h3").attr("data-group-name")+"</strong>",function(){helpers.showLoader(.8),$http.delete("/api/v1/groups/"+groupID).success(function(){helpers.hideLoader(),helpers.UI.showSnackbar("Group Successfully Deleted",!1),card.remove(),UIkit.$html.trigger("changed.uk.dom")}).error(function(err){helpers.hideLoader(),$log.log("[trudesk:groups:deleteGroup] - Error: "+err.error),helpers.UI.showSnackbar(err.error,!0)})},{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(5),__webpack_require__(39),__webpack_require__(40),__webpack_require__(52),__webpack_require__(7),__webpack_require__(50),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,UIkit,socket,nav,md,helpers){return angular.module("trudesk.controllers.singleTicket",["trudesk.services.session"]).controller("singleTicket",function(SessionService,$rootScope,$scope,$http,$q,$log){$scope.loggedInAccount=SessionService.getUser();var ticketStatus=$("#__ticketStatus").html(),assigneeListBtn=$(".ticket-assignee > a");assigneeListBtn.length>0&&ticketStatus.length>0&&"3"===ticketStatus&&(assigneeListBtn.removeAttr("data-notifications"),assigneeListBtn.removeAttr("data-updateUi"),nav.notifications()),$scope.showStatusSelect=function(){var statusSelect=$("#statusSelect");statusSelect.length>0&&(statusSelect.hasClass("hide")?(statusSelect.removeClass("hide"),statusSelect.addClass("shown")):(statusSelect.addClass("hide"),statusSelect.removeClass("shown")))},$scope.changeStatus=function(status){var id=$("#__ticketId").html(),statusSelectBox=$("#statusSelect");statusSelectBox.length>0&&(statusSelectBox.addClass("hide"),statusSelectBox.removeClass("shown")),socket.ui.sendUpdateTicketStatus(id,status)},$scope.clearAssignee=function(){var id=$("#__ticketId").html();id.length>0&&socket.ui.clearAssignee(id)},$scope.types=[],$scope.priorities=[{name:"Normal",value:1},{name:"Urgent",value:2},{name:"Critical",value:3}],$scope.groups=[],$scope.selected_priority=_.findWhere($scope.priorities,{value:$scope.ticketPriority});var ticketTypes=$http.get("/api/v1/tickets/types").success(function(data){_.each(data,function(item){$scope.types.push(item)})}).error(function(e){$log.log("[trudesk:singleTicket:ticketTypes] - "+e)});$q.all([ticketTypes]).then(function(){$scope.selected_type=_.findWhere($scope.types,{_id:$scope.ticketType})});var groupHttpGet=$http.get("/api/v1/groups").success(function(data){_.each(data.groups,function(item){$scope.groups.push(item)})}).error(function(e){$log.log("[trudesk:singleTicket:groupHttpGet] - "+e)});$q.all([groupHttpGet]).then(function(){$scope.selected_group=_.findWhere($scope.groups,{_id:$scope.ticketGroup})}),$scope.updateTicketType=function(){var id=$("#__ticketId").html();id.length>0&&socket.ui.setTicketType(id,$scope.selected_type)},$scope.updateTicketPriority=function(){var id=$("#__ticketId").html();id.length>0&&socket.ui.setTicketPriority(id,$scope.selected_priority)},$scope.updateTicketGroup=function(){var id=$("#__ticketId").html();id.length>0&&socket.ui.setTicketGroup(id,$scope.selected_group)},$scope.updateTicketIssue=function(){var id=$("#__ticketId").html();if(id.length>0){var form=$("form#edit-issue-form");if(!form.isValid(null,null,!1))return!0;var issue=form.find("textarea#issueText").val();issue="<p>"+issue+"</p>",socket.ui.setTicketIssue(id,issue)}},$scope.editIssueCancelClicked=function($event){$event.preventDefault();var issueForm=$(".edit-issue-form"),issueText=$(".initial-issue").find(".issue-text").find(".issue-body");if(issueForm.length>0&&issueText.length>0){issueText.removeClass("hide"),issueForm.addClass("hide");var iText=$(".issue-text").find("div.issue-body").html();iText=md(iText),iText=iText.trim(),$("#issueText").val(iText)}},$scope.showUploadAttachment=function($event){$event.preventDefault();var self=$($event.currentTarget),inputField=self.parents("form").find("input.attachmentInput");inputField.length>0&&$(inputField).trigger("click")},$scope.SubscriberChange=function(){var id=$("#__ticketId").html();$http.put("/api/v1/tickets/"+id+"/subscribe",{user:$scope.user,subscribe:$scope.subscribed}).success(function(){}).error(function(e){$log.log("[trudesk:singleTicket:SubscriberChange] - "+e),helpers.UI.showSnackbar("Error: "+e.message,!0)})},$scope.showCreateTags=function(event){event.preventDefault();var tagModal=$("#createTagModal");tagModal.length>0&&UIkit.modal(tagModal,{bgclose:!1}).show()},$scope.showTags=function(event){event.preventDefault();var tagModal=$("#addTagModal");if(tagModal.length>0){tagModal.find("option").prop("selected",!1);var selectedItems=[];$(".__TAG_SELECTED").each(function(){var i=$(this).text();i.length>0&&selectedItems.push(i)}),_.each(selectedItems,function(item){tagModal.find("#tags").find('option[value="'+item+'"]').prop("selected","selected")}),tagModal.find("select").trigger("chosen:updated"),UIkit.modal("#addTagModal",{bgclose:!1}).show()}},$scope.submitAddNewTag=function(event){event.preventDefault();var form=$("form#createTagForm");if(form.length>0){var tag=form.find("#tag").val();$http({method:"POST",url:"/api/v1/tickets/addtag",data:{tag:tag},headers:{"Content-Type":"application/json"}}).success(function(data){var tagModal=$("#createTagModal"),tagFormField=$("select#tags");tagFormField.append('<option id="TAG__'+data.tag._id+'" value="'+data.tag._id+'">'+data.tag.name+"</option>"),tagFormField.find("option#TAG__"+data.tag._id).prop("selected",!0),tagFormField.trigger("chosen:updated"),form.find("#tag").val(""),tagModal.length>0&&UIkit.modal(tagModal).hide(),setTimeout(function(){$scope.showTags(event)},250)}).error(function(err){$log.log("[trudesk:tickets:addTag} - Error: "+err.error),helpers.UI.showSnackbar("Error: "+err.error,!0)})}},$scope.submitAddTags=function(event){event.preventDefault();var id=$("#__ticketId").text(),form=$(event.target);if(!(form.length<1)){var tagField=form.find("#tags");tagField.length<1||$http.put("/api/v1/tickets/"+id,{tags:tagField.val()}).success(function(){helpers.UI.showSnackbar("Tags have been added.",!1),socket.ui.refreshTicketTags(id),UIkit.modal("#addTagModal").hide()}).error(function(e){$log.log("[trudesk:singleTicket:submitAddTags] - "+e),helpers.UI.showSnackbar("Error: "+e.message,!0),UIkit.modal("#addTagModal").hide()})}},$scope.clearTags=function(event){event.preventDefault();var id=$("#__ticketId").text();$http.put("/api/v1/tickets/"+id,{tags:[]}).success(function(){socket.ui.refreshTicketTags(id),$("#addTagModal").find("option").prop("selected",!1),$("#addTagModal").find("select").trigger("chosen:updated"),UIkit.modal("#addTagModal").hide()}).error(function(e){$log.log("[trudesk:singleTicket:clearTags] - "+e.message),helpers.UI.showSnackbar("Error: "+e.message,!0),UIkit.modal("#addTagModal").hide()})},$scope.submitComment=function(event){event.preventDefault();var form=$(event.target);if(!(form.length<1)){var id=form.find('input[name="ticketId"]'),commentField=form.find("#commentReply");commentField.length<1||id.length<1||form.isValid(null,null,!1)&&$http.post("/api/v1/tickets/addcomment",{comment:commentField.val(),_id:id.val().toString(),ownerId:$scope.loggedInAccount._id}).success(function(){commentField.val("")}).error(function(e){$log.error("[trudesk:singleTicket:submitComment]"),$log.error(e),helpers.UI.showSnackbar("Error: "+e.error,!0)})}},$scope.submitInternalNote=function(event){event.preventDefault();var id=$("#__ticketId").text(),form=$(event.target);if(!(form.length<1)){var noteField=form.find("#ticket-note");noteField.length<1||id.length<1||form.isValid(null,null,!1)&&$http.post("/api/v1/tickets/addnote",{note:noteField.val(),ticketid:id,owner:$scope.loggedInAccount._id}).success(function(){noteField.val("")}).error(function(e){$log.error("[trudesk:singleTicket:submitInternalNote]"),$log.error(e),helpers.UI.showSnackbar("Error: "+e.error,!0)})}},$scope.closeAddTagModal=function(){UIkit.modal("#addTagModal").hide()}}).directive("closeMouseUp",["$document",function($document){return{restrict:"A",link:function(scope,element){function mouseup($event){var target=$event.target.offsetParent;if($(target).length>0&&$(target).hasClass("floating-ticket-status"))return!1;element.hasClass("hide")||element.addClass("hide"),element.hasClass("shown")&&element.removeClass("shown")}$document.on("mouseup",mouseup),scope.$on("$destroy",function(){$document.off("mouseup",mouseup)}),element.on("$destroy",function(){$document.off("mouseup",mouseup)})}}}])}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(39),__webpack_require__(52),__webpack_require__(5),__webpack_require__(49),__webpack_require__(50)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,socket,md,UIkit){return angular.module("trudesk.controllers.messages",["trudesk.services.session"]).controller("messagesCtrl",function(SessionService,$scope,$document,$http,$window,$cookies,$timeout,$log){$scope.loadConversation=function(convoId){History.pushState(null,null,"/messages/"+convoId)},$scope.sendChatMessage=function(cid,toUserId,event){var form=$(event.target);if(!(form.length<1)){var input=form.find('input[name="chatMessage"]');if(input.val().length<1)return!1;socket.chat.sendChatMessage(cid,toUserId,input.val(),function(err){err&&$log.warn(err),input.val(""),socket.chat.stopTyping(cid,toUserId)}),event.preventDefault()}},$scope.onKeyDown=function(cid,toUserId,$event){13!==$event.keyCode&&socket.chat.startTyping(cid,toUserId)},$scope.showUserList=function($event,callback){_.isUndefined($event)||$event.preventDefault();var convoList=$document[0].getElementById("convo-list");convoList.style.transition="opacity 0.25s",convoList.style.opacity=0;var allUserList=$document[0].getElementById("new-convo-user-list");allUserList.style.opacity=0,allUserList.classList.remove("hide"),allUserList.style.display="block",allUserList.style.transition="opacity 0.25s",$timeout(function(){convoList.style.display="none",allUserList.style.opacity=1;var actions=$document[0].getElementById("convo-actions").children;if([].forEach.call(actions,function(el){"none"===el.style.display?el.style.display="block":el.style.display="none"}),_.isFunction(callback))return callback()},200)},$scope.hideUserList=function($event){_.isUndefined($event)||$event.preventDefault();var allUserList=$document[0].getElementById("new-convo-user-list");allUserList.style.transition="opacity 0.25s",allUserList.style.opacity=0;var convoList=$document[0].getElementById("convo-list");convoList.style.transition="opacity 0.25s",convoList.style.opacity=0,$timeout(function(){allUserList.style.display="none",convoList.style.display="block",convoList.style.opacity=1,$document[0].querySelector(".search-box > input").value="",$(".all-user-list li").each(function(){$(this).show()});var actions=$document[0].getElementById("convo-actions").children;[].forEach.call(actions,function(el){"none"===el.style.display?el.style.display="block":el.style.display="none"})},200)},$scope.showNewConvo=$("#__showNewConvo").text(),$scope.showNewConvo.length>0&&$scope.showUserList(void 0,function(){return _.defer(function(){helpers.resizeFullHeight(),helpers.hideAllpDropDowns()},500)}),$scope.startNewConversation=function(userId){var $loggedInAccountId=SessionService.getUser()._id;$http.post("/api/v1/messages/conversation/start",{owner:$loggedInAccountId,participants:[userId,$loggedInAccountId]}).then(function(response){var conversation=response.data.conversation;_.isUndefined(conversation)||History.pushState(null,null,"/messages/"+conversation._id)},function(err){$log.error("[trudesk.Messages.startNewConversation()] - Error: "),$log.error(err)})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(39),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,socketClient){return angular.module("trudesk.controllers.notices",[]).controller("noticesCtrl",function($scope,$http,$log){function clearChecked(){$('#noticesTable input[type="checkbox"]:checked').each(function(){$(this).prop("checked",!1)})}function getChecked(){var checkedIds=[];return $('#noticesTable input[type="checkbox"]:checked').each(function(){var self=$(this),$noticeTR=self.parents("tr");if(!_.isUndefined($noticeTR)){var noticeOId=$noticeTR.attr("data-noticeOId");!_.isUndefined(noticeOId)&&noticeOId.length>0&&checkedIds.push(noticeOId)}}),checkedIds}function removeCheckedFromGrid(id){$("#noticesTable #c_"+id+'[type="checkbox"]:checked').each(function(){var self=$(this),$noticeTR=self.parents("tr");_.isUndefined($noticeTR)||$noticeTR.remove()})}$scope.editNotice=function($event){if(_.isNull($event.target)||_.isUndefined($event.target)||"label"===$event.target.tagName.toLowerCase()||"input"===$event.target.tagName.toLowerCase())return!0;var id=$event.currentTarget.dataset.noticeoid;if(!id)return!0;History.pushState(null,null,"/notices/"+id)},$scope.submitCreateNoticeForm=function(event){event.preventDefault();var formData=$("#createNoticeForm").serializeObject();if(!formData.nName||!formData.nMessage)return!1;var apiData={name:formData.nName,message:formData.nMessage,color:formData.nColor,fontColor:formData.nFontColor,alertWindow:"on"===formData.nAlertWindow};$http({method:"POST",url:"/api/v1/notices/create",data:apiData,headers:{"Content-Type":"application/json"}}).success(function(){helpers.UI.showSnackbar("Notice Created Successfully.",!1),History.pushState(null,null,"/notices/")}).error(function(err){$log.log("[trudesk:notices:submitCreateNoticeForm] - "+err),helpers.UI.showSnackbar(err,!0)})},$scope.submitEditNoticeForm=function(event){event.preventDefault();var noticeId=$("#__noticeId").text(),formData=$("#editNoticeForm").serializeObject(),apiData={name:formData.nName,message:formData.nMessage,color:formData.nColor,fontColor:formData.nFontColor,alertWindow:"on"===formData.nAlertWindow};$http({method:"PUT",url:"/api/v1/notices/"+noticeId,data:apiData,headers:{"Content-Type":"application/json"}}).success(function(){helpers.UI.showSnackbar("Notice Saved Successfully.",!1),History.pushState(null,null,"/notices/")}).error(function(err){$log.log("[trudesk:notices:submitEditNoticeForm] - "+err),helpers.UI.showSnackbar(err,!0)})},$scope.activateNotice=function(){var id=getChecked();if(id.length<0)return!0;id=id[0];var $data={active:!0};$http.get("/api/v1/notices/clearactive").success(function(){$http({method:"PUT",url:"/api/v1/notices/"+id,data:$data,headers:{"Content-Type":"application/json"}}).success(function(){socketClient.ui.setShowNotice(id),helpers.UI.showSnackbar("Notice has been activated",!1),clearChecked(),History.pushState(null,null,"/notices/")}).error(function(err){$log.log("[trudesk:notices:activateNotice] - "+err),helpers.UI.showSnackbar(err,!0)})}).error(function(){}),helpers.hideAllpDropDowns()},$scope.clearNotice=function(){$http.get("/api/v1/notices/clearactive").success(function(){socketClient.ui.setClearNotice(),helpers.UI.showSnackbar("Notice has been deactivated",!1)}).error(function(err){$log.log("[trudesk:notices:clearNotice] - "+err),helpers.UI.showSnackbar({text:"Error: "+err.message,actionTextColor:"#B92929"})}),helpers.hideAllpDropDowns()},$scope.deleteNotices=function(){var ids=getChecked();_.each(ids,function(id){$http.delete("/api/v1/notices/"+id).success(function(data){if(!data.success)return void helpers.UI.showSnackbar({text:"Error: "+data.error,actionTextColor:"#B92929"});removeCheckedFromGrid(id),helpers.resizeDataTables(".noticesList"),helpers.UI.showSnackbar({text:"Notice Successfully Deleted"})}).error(function(err){$log.log("[trudesk:notices:deleteNotices] - "+err),helpers.UI.showSnackbar({text:"Error: "+err,actionTextColor:"#B92929"})})})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers){return angular.module("trudesk.controllers.plugins",[]).controller("pluginsCtrl",function($scope,$http,$log,$timeout,$window){function compareVersions(v1,comparator,v2){"use strict";if(comparator="="===comparator?"==":comparator,-1===["==","===","<","<=",">",">=","!=","!=="].indexOf(comparator))throw new Error("Invalid comparator. "+comparator);for(var v1parts=v1.split("."),v2parts=v2.split("."),maxLen=Math.max(v1parts.length,v2parts.length),part1,part2,cmp=0,i=0;i<maxLen&&!cmp;i++)part1=parseInt(v1parts[i],10)||0,part2=parseInt(v2parts[i],10)||0,part1<part2&&(cmp=1),part1>part2&&(cmp=-1);return eval("0"+comparator+cmp)}var $tableBody=$("#plugin_list_table > tbody");$scope.installedPlugins=[],$scope.init=function(){$scope.installedPlugins=angular.fromJson($scope.installedPlugins),$http({method:"GET",url:"http://plugins.trudesk.io/api/plugins",headers:{"Content-Type":"apllication/json"}}).success(function(data){if(!data.success){if(data.error)return void helpers.UI.showSnackbar({text:"Error: "+data.error,actionTextColor:"#B92929"});helpers.UI.showSnackbar({text:"Error getting plugin list!",actionTextColor:"#B92929"})}var plugins=_.sortBy(data.plugins,"name");$tableBody.children().remove();var html="";_.each(plugins,function(p){var description="No Description Set";p.pluginjson.description&&(description=p.pluginjson.description);var loadedPlugin=_.findWhere($scope.installedPlugins,{name:p.name}),hasPluginInstalled=void 0!==loadedPlugin,update=!1;hasPluginInstalled&&(update=compareVersions(loadedPlugin.version,"<",p.pluginjson.version));var canUserManage=helpers.canUser("plugins:manage");html+='<tr data-plugin-id="'+p._id+'" data-plugin-name="'+p.name.toLowerCase()+'">',html+='<td style="vertical-align: middle;">'+p.name.toLowerCase()+"</td>",html+='<td style="vertical-align: middle;">'+description+"</td>",html+='<td style="vertical-align: middle;">'+p.pluginjson.version+"</td>",canUserManage?hasPluginInstalled?(html+='<td style="text-align: right;"><button class="uk-button uk-button-danger uk-button-small" ng-click="removePlugin(\''+p._id+"')\">Remove</button>",update&&(html+='<button class="uk-button uk-button-primary uk-button-small" style="margin-left: 5px;" ng-click="installPlugin(\''+p._id+"')\">Update</button>"),html+="</td>"):html+='<td style="text-align: right;"><button class="uk-button uk-button-success uk-button-small" ng-click="installPlugin(\''+p._id+"')\">Install</button></td>":html+="<td></td>",html+="</tr>"}),angular.injector(["ng","trudesk"]).invoke(["$compile","$rootScope",function($compile,$rootScope){var $scope=$tableBody.append(html).scope();$compile($tableBody)($scope||$rootScope),$rootScope.$digest()}])}).error(function(err){err&&($log.error("[trudesk:plugins:init] - "+err.error.message),helpers.UI.showSnackbar({text:"Error: "+err.error.message,actionTextColor:"#B92929"})),$tableBody.children().remove(),$tableBody.append('<tr style="background: #B92929 !important;"><td style="color: #fff;">Unable to load plugin list!</td><td></td><td></td><td></td></tr>')})},$scope.installPlugin=function(pluginId){$http({url:"/api/v1/plugins/install/"+pluginId,method:"GET",headers:{"Content-Type":"apllication/json"}}).success(function(data){if(!data.success){if(data.error)return void helpers.UI.showSnackbar({text:"Error: "+data.error,actionTextColor:"#B92929"});helpers.UI.showSnackbar({text:"Error installing plugin!",actionTextColor:"#B92929"})}helpers.UI.showSnackbar({text:"Installed Plugin. Restarting Server..."}),$("#serverRestarting").removeClass("hide"),$timeout(function(){$window.location.reload()},5e3)}).error(function(err){err&&($log.error("[trudesk:plugins:installPlugin] - "+err.error.message),helpers.UI.showSnackbar({text:"Error: "+err.error.message,actionTextColor:"#B92929"}))})},$scope.removePlugin=function(pluginId){$http({url:"/api/v1/plugins/remove/"+pluginId,method:"DELETE"}).success(function(data){if(!data.success){if(data.error)return void helpers.UI.showSnackbar({text:"Error: "+data.error,actionTextColor:"#B92929"});helpers.UI.showSnackbar({text:"Error removing plugin!",actionTextColor:"#B92929"})}helpers.UI.showSnackbar({text:"Removed Plugin. Restarting Server..."}),$("#serverRestarting").removeClass("hide"),$timeout(function(){$window.location.reload()},5e3)}).error(function(err){err&&($log.error("[trudesk:plugins:removePlugin] - "+err.error.message),helpers.UI.showSnackbar({text:"Error: "+err.error.message,actionTextColor:"#B92929"}))})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(9),__webpack_require__(7),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,moment,helpers){return angular.module("trudesk.controllers.reports",[]).controller("reportsCtrl",function($scope,$http,$log,$timeout){function changeView(selector){var $activeReportType=$(".active_report_type"),$selector=$(selector);if($selector.hasClass("active_report_type"))return!0;$activeReportType.animate({opacity:0},100,function(){$activeReportType.removeClass("active_report_type"),$activeReportType.addClass("hide"),$selector.css({opacity:0}),$selector.removeClass("hide"),$selector.addClass("active_report_type"),helpers.resizeFullHeight(),$selector.animate({opacity:1},600)})}function showLoader(){var $loader=$("#loader-wrapper");$loader.css({opacity:0,display:"block"}),$loader.animate({opacity:.8},600)}function hideLoader(){var $loader=$("#loader-wrapper");$loader.animate({opacity:0},200,function(){$loader.hide()})}function downloadReport(response,filename){var headers=response.headers(),blob=new Blob([response.data],{type:headers["content-type"]}),link=document.createElement("a");link.href=window.URL.createObjectURL(blob),link.download=filename+".csv",link.click()}$(".filterDate_Start").each(function(index,element){var $e=$(element);$e.off("hide.uk.datepicker"),$e.on("hide.uk.datepicker",function(e){$timeout(function(){$(e.target).validate()},0)})}),$(".filterDate_End").each(function(index,element){var $e=$(element);$e.off("hide.uk.datepicker"),$e.on("hide.uk.datepicker",function(e){$timeout(function(){$(e.target).validate()},0)})}),$scope.selectReport=function(event,type){switch(event.preventDefault(),type.toLowerCase()){case"tickets_by_group":changeView("#report_tickets_by_group");break;case"tickets_by_priorities":changeView("#report_tickets_by_priorities");break;case"tickets_by_status":changeView("#report_tickets_by_status");break;case"tickets_by_tags":changeView("#report_tickets_by_tags");break;case"tickets_by_types":changeView("#report_tickets_by_types");break;case"tickets_by_users":changeView("#report_tickets_by_users")}},$scope.submitGenerateReport=function(event,type){var form=$(event.target).parents("form");if(!form.isValid(null,null,!1))return!0;event.preventDefault();var data={};form.serializeArray().map(function(x){data[x.name]=x.value});var startDate=moment(data.filterDate_Start),endDate=moment(data.filterDate_End),groups=[];switch(type.toLowerCase()){case"group":showLoader(),groups=form.find("select#groups").val(),$http({method:"POST",url:"/api/v1/reports/generate/tickets_by_group",data:{startDate:startDate,endDate:endDate,groups:groups},headers:{"Content-Type":"application/json"}}).then(function(response){downloadReport(response,"report_tickets_by_group__"+data.filterDate_Start)},function(response){$log.log(response.statusText)}).then(function(){hideLoader()});break;case"priorities":showLoader();var priorities=form.find("select#priorities").val();groups=form.find("select#groups").val(),$http({method:"POST",url:"/api/v1/reports/generate/tickets_by_priority",data:{startDate:startDate,endDate:endDate,groups:groups,priorities:priorities},headers:{"Content-Type":"application/json"}}).then(function(response){downloadReport(response,"report_tickets_by_priorities__"+data.filterDate_Start)},function(response){$log.log(response.statusText)}).then(function(){hideLoader()});break;case"status":showLoader();var status=form.find("select#status").val();groups=form.find("select#groups").val(),$http({method:"POST",url:"/api/v1/reports/generate/tickets_by_status",data:{startDate:startDate,endDate:endDate,groups:groups,status:status},headers:{"Content-Type":"application/json"}}).then(function(response){downloadReport(response,"report_tickets_by_status__"+data.filterDate_Start)},function(response){$log.log(response.statusText)}).then(function(){hideLoader()});break;case"tags":showLoader();var tags=form.find("select#tags").val();groups=form.find("select#groups").val(),$http({method:"POST",url:"/api/v1/reports/generate/tickets_by_tags",data:{startDate:startDate,endDate:endDate,groups:groups,tags:tags},headers:{"Content-Type":"application/json"}}).then(function(response){downloadReport(response,"report_tickets_by_tags__"+data.filterDate_Start)},function(response){$log.log(response.statusText)}).then(function(){hideLoader()});break;case"types":showLoader();var types=form.find("select#types").val();groups=form.find("select#groups").val(),$http({method:"POST",url:"/api/v1/reports/generate/tickets_by_type",data:{startDate:startDate,endDate:endDate,groups:groups,types:types},headers:{"Content-Type":"application/json"}}).then(function(response){downloadReport(response,"report_tickets_by_types__"+data.filterDate_Start)},function(response){$log.log(response.statusText)}).then(function(){hideLoader()});break;case"users":showLoader();var users=form.find("select#users").val();groups=form.find("select#groups").val(),$http({method:"POST",url:"/api/v1/reports/generate/tickets_by_user",data:{startDate:startDate,endDate:endDate,groups:groups,users:users},headers:{"Content-Type":"application/json"}}).then(function(response){downloadReport(response,"report_tickets_by_users__"+data.filterDate_Start)},function(response){$log.log(response.statusText)}).then(function(){hideLoader()})}}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(2),__webpack_require__(0),__webpack_require__(7),__webpack_require__(57),__webpack_require__(5),__webpack_require__(49)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,_,$,helpers,ui,UIkit){return angular.module("trudesk.controllers.settings",["ngSanitize"]).directive("selectize",function($timeout){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){var $element;$timeout(function(){$element=$(element).selectize(scope.$eval(attrs.selectize)),ngModel&&$(element).selectize().on("change",function(){scope.$apply(function(){var newValue=$(element).selectize().val();ngModel.$setViewValue(newValue)})})})}}}).controller("settingsCtrl",function($scope,$http,$timeout,$log){$scope.init=function(){$timeout(function(){if($("input.md-input").each(function(){var vm=this,self=$(vm);if(!_.isEmpty(self.val())){var s=self.parent(".md-input-wrapper");s.length>0&&s.addClass("md-input-filled")}}),""!==$scope.mailerCheckTicketType){var $mailerCheckTicketTypeSelect=$("#mailerCheckTicketType");if($mailerCheckTicketTypeSelect.length<1)return;$mailerCheckTicketTypeSelect.find('option[value="'+$scope.mailerCheckTicketType+'"]').prop("selected",!0);var $selectizeTicketType=$mailerCheckTicketTypeSelect[0].selectize;$selectizeTicketType.setValue($scope.mailerCheckTicketType,!0),$selectizeTicketType.refreshItems()}},0)},$scope.$watch("mailerEnabled",function(newVal){$("input#mailerHost").attr("disabled",!newVal),$("input#mailerSSL").attr("disabled",!newVal),$("input#mailerPort").attr("disabled",!newVal),$("input#mailerUsername").attr("disabled",!newVal),$("input#mailerPassword").attr("disabled",!newVal),$("input#mailerFrom").attr("disabled",!newVal),$("button#mailerSubmit").attr("disabled",!newVal)}),$scope.$watch("defaultTicketType",function(newValue){newValue&&$http.put("/api/v1/settings",{name:"ticket:type:default",value:newValue},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){$log.error(err),helpers.UI.showSnackbar("Error: "+err,!0)})}),$scope.mailerEnabledChange=function(){var vm=this;$scope.mailerEnabled=vm.mailerEnabled,$http.put("/api/v1/settings",{name:"mailer:enable",value:$scope.mailerEnabled},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar("Error: "+err,!0)})},$scope.mailerSSLChange=function(){var vm=this;$scope.mailerSSL=vm.mailerSSL,$http.put("/api/v1/settings",{name:"mailer:ssl",value:$scope.mailerSSL},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar("Error: "+err,!0)})},$scope.submitTestMailer=function($event){$event.preventDefault(),helpers.UI.showSnackbar("Testing...",!1),$http.post("/api/v1/settings/testmailer",{},{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Successfully Connected",!1)},function(response){helpers.UI.showSnackbar("Error: "+response.data.error,!0)})},$scope.mailerFormSubmit=function($event){$event.preventDefault(),$http.put("/api/v1/settings",[{name:"mailer:host",value:$scope.mailerHost},{name:"mailer:ssl",value:$scope.mailerSSL},{name:"mailer:port",value:$scope.mailerPort},{name:"mailer:username",value:$scope.mailerUsername},{name:"mailer:password",value:$scope.mailerPassword},{name:"mailer:from",value:$scope.mailerFrom}],{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Mailer Settings Saved",!1)},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.tpsEnabledChange=function(){var vm=this;$scope.tpsEnabled=vm.tpsEnabled,$http.put("/api/v1/settings",{name:"tps:enable",value:$scope.tpsEnabled},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.tpsFormSubmit=function($event){$event.preventDefault(),$http.put("/api/v1/settings",[{name:"tps:username",value:$scope.tpsUsername},{name:"tps:apikey",value:$scope.tpsApiKey}],{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("TPS Settings Saved",!1)},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.$watch("mailerCheckEnabled",function(newVal){var $mailerCheckTicketTypeSelectize=$("select#mailerCheckTicketType").selectize()[0];$("input#mailerCheckHost").attr("disabled",!newVal),$("input#mailerCheckPort").attr("disabled",!newVal),$("input#mailerCheckUsername").attr("disabled",!newVal),$("input#mailerCheckPassword").attr("disabled",!newVal),$("button#mailerCheckSubmit").attr("disabled",!newVal),_.isUndefined($mailerCheckTicketTypeSelectize)||(!0==!newVal?$mailerCheckTicketTypeSelectize.selectize.disable():$mailerCheckTicketTypeSelectize.selectize.enable())}),$scope.mailerCheckEnabledChange=function(){var vm=this;$scope.mailerCheckEnabled=vm.mailerCheckEnabled,$http.put("/api/v1/settings",{name:"mailer:check:enable",value:$scope.mailerCheckEnabled},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.mailerCheckFormSubmit=function($event){$event.preventDefault();var mailerCheckTicketTypeValue=$("#mailerCheckTicketType option[selected]").val();$http.put("/api/v1/settings",[{name:"mailer:check:host",value:$scope.mailerCheckHost},{name:"mailer:check:port",value:$scope.mailerCheckPort},{name:"mailer:check:username",value:$scope.mailerCheckUsername},{name:"mailer:check:password",value:$scope.mailerCheckPassword},{name:"mailer:check:ticketype",value:mailerCheckTicketTypeValue}],{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Mail Check Settings Saved",!1),UIkit.modal.confirm("Settings will take affect after server restart. <br /> <br /> Would you like to restart the server now?",function(){$http.get("/api/v1/admin/restart").success(function(){}).error(function(err){helpers.hideLoader(),$log.log("[trudesk:settings:mailerCheckSubmit] - Error: "+err.error),$log.error(err)})},{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-primary"})},function(err){helpers.UI.showSnackbar(err.data.error,!0),$log.error(err)})},$scope.savePrivacyPolicy=function($event){$event.preventDefault(),$http.put("/api/v1/settings",{name:"legal:privacypolicy",value:$scope.privacyPolicy},{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Privacy Policy Updated",!1)},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.showTourChanged=function(){var vm=this;$scope.showTour=vm.showTour,$http.put("/api/v1/settings",{name:"showTour:enable",value:$scope.showTour},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.showOverdueTicketsChanged=function(){var vm=this;$scope.showOverdueTickets=vm.showOverdueTickets,$http.put("/api/v1/settings",{name:"showOverdueTickets:enable",value:$scope.showOverdueTickets},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.allowPublicTicketsChanged=function(){var vm=this;$scope.allowPublicTickets=vm.allowPublicTickets,$http.put("/api/v1/settings",{name:"allowPublicTickets:enable",value:$scope.allowPublicTickets},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.allowUserRegistrationChanged=function(){var vm=this;$scope.allowUserRegistration=vm.allowUserRegistration,$http.put("/api/v1/settings",{name:"allowUserRegistration:enable",value:$scope.allowUserRegistration},{headers:{"Content-Type":"application/json"}}).then(function(){},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.showCreateTagWindow=function($event){$event.preventDefault();var createTagModal=$("#createTagModal");createTagModal.length>0&&UIkit.modal(createTagModal,{bgclose:!1}).show()},$scope.createTag=function($event){$event.preventDefault();var form=$("#createTagForm");if(!form.isValid(null,null,!1))return!0;var tagName=form.find('input[name="tagName"]').val();if(!tagName||tagName.length<3)return!0;$http.post("/api/v1/tickets/addtag",{tag:tagName},{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Tag: "+tagName+" created successfully",!1),History.pushState(null,null,"/settings/tags/?refresh=1")},function(err){helpers.UI.showSnackbar("Unable to create tag. Check console",!0),$log.error(err)})},$scope.showCreateTicketTypeWindow=function($event){$event.preventDefault();var createTicketTypeModal=$("#createTicketTypeModal");createTicketTypeModal.length>0&&UIkit.modal(createTicketTypeModal,{bgclose:!1}).show()},$scope.createTicketType=function(event){event.preventDefault();var form=$("#createTicketTypeForm");if(!form.isValid(null,null,!1))return!0;var typeName=form.find('input[name="typeName"]').val();if(!typeName||typeName.length<3)return!0;$http.post("/api/v1/tickets/types/create",{name:typeName},{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Type: "+typeName+" created successfully",!1),History.pushState(null,null,"/settings/tickettypes/?refresh=1")},function(err){helpers.UI.showSnackbar("Unable to create ticket type. Check console",!0),$log.error(err)})},$scope.editTicketType=function($event){if(_.isNull($event.target)||_.isUndefined($event.target)||"label"===$event.target.tagName.toLowerCase()||"input"===$event.target.tagName.toLowerCase())return!0;var ticketTypeId=$event.currentTarget.dataset.tickettypeoid;if(!ticketTypeId)return!0;History.pushState(null,null,"/settings/tickettypes/"+ticketTypeId)},$scope.updateTicketType=function(typeId){if(!typeId||typeId.length<1)return helpers.UI.showSnackbar("Unable to get type id",!0),!0;var typeName=$("#editType_Name").val();$http.put("/api/v1/tickets/types/"+typeId,{name:typeName},{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Type: "+typeName+" updated successfully",!1)},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.showDeleteTicketType=function(typeId,hasTickets){if(event.preventDefault(),hasTickets){var delTicketTypeModal=$("#deleteTicketTypeModal");delTicketTypeModal.length>0&&UIkit.modal(delTicketTypeModal,{bgclose:!1}).show()}else $scope.submitDeleteTicketType(typeId,void 0)},$scope.submitDeleteTicketType=function(typeId,event){if(event&&event.preventDefault(),_.isUndefined(typeId)||typeId.length<1)return helpers.UI.showSnackbar("Unable to get tag ID",!0),!0;var typeName=$("input#del_type_name").val(),newTypeId=$('form#deleteTicketTypeForm select[name="type"]').val();if(!newTypeId||newTypeId.length<1)return helpers.UI.showSnackbar("Unable to get new ticket type. Aborting...",!0),!0;$http({method:"DELETE",url:"/api/v1/tickets/types/"+typeId,data:{newTypeId:newTypeId},headers:{"Content-Type":"application/json"}}).then(function(response){if(response.data.success)return helpers.UI.showSnackbar("Successfully removed ticket type: "+typeName,!1),History.pushState(null,null,"/settings/tickettypes/")},function(response){_.isUndefined(response.data.error.custom)?($log.error("[trudesk:settings:submitDeleteTicketType] Error -",response.data.error),helpers.UI.showSnackbar("Unable to remove ticket type. Check console.",!0)):($log.error("[trudesk:settings:submitDeleteTicketType] Error -",response.data.error),helpers.UI.showSnackbar(response.data.error.message,!0))})},$scope.editTag=function($event){if(_.isNull($event.target)||_.isUndefined($event.target)||"label"===$event.target.tagName.toLowerCase()||"input"===$event.target.tagName.toLowerCase())return!0;var id=$event.currentTarget.dataset.tagoid;if(!id)return!0;History.pushState(null,null,"/settings/tags/"+id)},$scope.updateTag=function(){var $tagId=$("#__editTag_TagId");if($tagId.length<1)return helpers.UI.showSnackbar("Unable to get tag ID",!0),!0;var id=$tagId.text(),tagName=$("#editTag_Name").val();$http.put("/api/v1/tickets/tags/"+id,{name:tagName},{headers:{"Content-Type":"application/json"}}).then(function(){helpers.UI.showSnackbar("Tag: "+tagName+" updated successfully",!1)},function(err){helpers.UI.showSnackbar(err,!0)})},$scope.showDeleteTagConfirm=function(){var tagName=$("#__editTag_TagName").text();UIkit.modal.confirm("Really delete tag "+tagName+'<br /><i style="font-size: 13px; color: #e53935;">This will remove the tag from all associated tickets!</i>',function(){return $scope.deleteTag()},{labels:{Ok:"Yes",Cancel:"No"}})},$scope.deleteTag=function(){var $tagId=$("#__editTag_TagId");if($tagId.length<1)return helpers.UI.showSnackbar("Unable to get tag ID",!0),!0;var id=$tagId.text(),tagName=$("#__editTag_TagName").text();$http({method:"DELETE",url:"/api/v1/tickets/tags/"+id}).then(function(response){if(response.data.success)return helpers.UI.showSnackbar("Successfully removed tag: "+tagName,!1),History.pushState(null,null,"/settings/tags/")},function(response){$log.error("[trudesk:settings:deleteTag] Error - "+response.data.error),helpers.UI.showSnackbar("Unable to remove Tag. Check console.",!0)})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}]);